{"version":3,"file":"4d99978a-54a1ce709f7c24d87da5.js","mappings":"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","sources":["webpack://v4/./node_modules/troika-three-text/dist/troika-three-text.esm.js"],"sourcesContent":["import _get from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _classCallCheck from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _toConsumableArray from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/kennethchoi/Desktop/website-repos/playground/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { Texture, LinearFilter, Color, InstancedBufferGeometry, Sphere, Box3, BackSide, DoubleSide, InstancedBufferAttribute, PlaneGeometry, BufferGeometry, Float32BufferAttribute, Vector2, Vector4, Matrix3, Mesh, FrontSide, MeshBasicMaterial, Matrix4, Vector3 } from 'three';\nimport { terminateWorker, defineWorkerModule } from 'troika-worker-utils';\nimport createSDFGenerator from 'webgl-sdf-generator';\nimport bidiFactory from 'bidi-js';\nimport { createDerivedMaterial, voidMainRegExp } from 'troika-three-utils';\n\n/**\n * Factory function that creates a self-contained environment for processing text typesetting requests.\n *\n * It is important that this function has no closure dependencies, so that it can be easily injected\n * into the source for a Worker without requiring a build step or complex dependency loading. All its\n * dependencies must be passed in at initialization.\n *\n * @param {function} fontParser - a function that accepts an ArrayBuffer of the font data and returns\n * a standardized structure giving access to the font and its glyphs:\n *   {\n *     unitsPerEm: number,\n *     ascender: number,\n *     descender: number,\n *     capHeight: number,\n *     xHeight: number,\n *     lineGap: number,\n *     forEachGlyph(string, fontSize, letterSpacing, callback) {\n *       //invokes callback for each glyph to render, passing it an object:\n *       callback({\n *         index: number,\n *         advanceWidth: number,\n *         xMin: number,\n *         yMin: number,\n *         xMax: number,\n *         yMax: number,\n *         path: string,\n *         pathCommandCount: number\n *       })\n *     }\n *   }\n * @param {object} bidi - the bidi.js implementation object\n * @param {Object} config\n * @return {Object}\n */\nfunction createTypesetter(fontParser, bidi, config) {\n  var defaultFontURL = config.defaultFontURL;\n\n  /**\n   * Holds parsed font objects by url\n   */\n  var fonts = Object.create(null);\n  var INF = Infinity;\n\n  // Set of Unicode Default_Ignorable_Code_Point characters, these will not produce visible glyphs\n  // eslint-disable-next-line no-misleading-character-class\n  var DEFAULT_IGNORABLE_CHARS = /[\\u00AD\\u034F\\u061C\\u115F-\\u1160\\u17B4-\\u17B5\\u180B-\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u3164\\uFE00-\\uFE0F\\uFEFF\\uFFA0\\uFFF0-\\uFFF8]/;\n\n  // This regex (instead of /\\s/) allows us to select all whitespace EXCEPT for non-breaking white spaces\n  var lineBreakingWhiteSpace = \"[^\\\\S\\\\u00A0]\";\n\n  // Incomplete set of characters that allow line breaking after them\n  // In the future we may consider a full Unicode line breaking algorithm impl: https://www.unicode.org/reports/tr14\n  var BREAK_AFTER_CHARS = new RegExp(\"\".concat(lineBreakingWhiteSpace, \"|[\\\\-\\\\u007C\\\\u00AD\\\\u2010\\\\u2012-\\\\u2014\\\\u2027\\\\u2056\\\\u2E17\\\\u2E40]\"));\n\n  /**\n   * Load a given font url\n   */\n  function doLoadFont(url, callback) {\n    function tryLoad() {\n      var onError = function onError(err) {\n        console.error(\"Failure loading font \".concat(url).concat(url === defaultFontURL ? '' : '; trying fallback'), err);\n        if (url !== defaultFontURL) {\n          url = defaultFontURL;\n          tryLoad();\n        }\n      };\n      try {\n        var request = new XMLHttpRequest();\n        request.open('get', url, true);\n        request.responseType = 'arraybuffer';\n        request.onload = function () {\n          if (request.status >= 400) {\n            onError(new Error(request.statusText));\n          } else if (request.status > 0) {\n            try {\n              var fontObj = fontParser(request.response);\n              callback(fontObj);\n            } catch (e) {\n              onError(e);\n            }\n          }\n        };\n        request.onerror = onError;\n        request.send();\n      } catch (err) {\n        onError(err);\n      }\n    }\n    tryLoad();\n  }\n\n  /**\n   * Load a given font url if needed, invoking a callback when it's loaded. If already\n   * loaded, the callback will be called synchronously.\n   */\n  function loadFont(fontUrl, callback) {\n    if (!fontUrl) fontUrl = defaultFontURL;\n    var font = fonts[fontUrl];\n    if (font) {\n      // if currently loading font, add to callbacks, otherwise execute immediately\n      if (font.pending) {\n        font.pending.push(callback);\n      } else {\n        callback(font);\n      }\n    } else {\n      fonts[fontUrl] = {\n        pending: [callback]\n      };\n      doLoadFont(fontUrl, function (fontObj) {\n        var callbacks = fonts[fontUrl].pending;\n        fonts[fontUrl] = fontObj;\n        callbacks.forEach(function (cb) {\n          return cb(fontObj);\n        });\n      });\n    }\n  }\n\n  /**\n   * Main entry point.\n   * Process a text string with given font and formatting parameters, and return all info\n   * necessary to render all its glyphs.\n   */\n  function typeset(_ref, callback) {\n    var _ref$text = _ref.text,\n      text = _ref$text === void 0 ? '' : _ref$text,\n      _ref$font = _ref.font,\n      font = _ref$font === void 0 ? defaultFontURL : _ref$font,\n      _ref$sdfGlyphSize = _ref.sdfGlyphSize,\n      sdfGlyphSize = _ref$sdfGlyphSize === void 0 ? 64 : _ref$sdfGlyphSize,\n      _ref$fontSize = _ref.fontSize,\n      fontSize = _ref$fontSize === void 0 ? 1 : _ref$fontSize,\n      _ref$letterSpacing = _ref.letterSpacing,\n      letterSpacing = _ref$letterSpacing === void 0 ? 0 : _ref$letterSpacing,\n      _ref$lineHeight = _ref.lineHeight,\n      lineHeight = _ref$lineHeight === void 0 ? 'normal' : _ref$lineHeight,\n      _ref$maxWidth = _ref.maxWidth,\n      maxWidth = _ref$maxWidth === void 0 ? INF : _ref$maxWidth,\n      direction = _ref.direction,\n      _ref$textAlign = _ref.textAlign,\n      textAlign = _ref$textAlign === void 0 ? 'left' : _ref$textAlign,\n      _ref$textIndent = _ref.textIndent,\n      textIndent = _ref$textIndent === void 0 ? 0 : _ref$textIndent,\n      _ref$whiteSpace = _ref.whiteSpace,\n      whiteSpace = _ref$whiteSpace === void 0 ? 'normal' : _ref$whiteSpace,\n      _ref$overflowWrap = _ref.overflowWrap,\n      overflowWrap = _ref$overflowWrap === void 0 ? 'normal' : _ref$overflowWrap,\n      _ref$anchorX = _ref.anchorX,\n      anchorX = _ref$anchorX === void 0 ? 0 : _ref$anchorX,\n      _ref$anchorY = _ref.anchorY,\n      anchorY = _ref$anchorY === void 0 ? 0 : _ref$anchorY,\n      _ref$includeCaretPosi = _ref.includeCaretPositions,\n      includeCaretPositions = _ref$includeCaretPosi === void 0 ? false : _ref$includeCaretPosi,\n      _ref$chunkedBoundsSiz = _ref.chunkedBoundsSize,\n      chunkedBoundsSize = _ref$chunkedBoundsSiz === void 0 ? 8192 : _ref$chunkedBoundsSiz,\n      _ref$colorRanges = _ref.colorRanges,\n      colorRanges = _ref$colorRanges === void 0 ? null : _ref$colorRanges;\n    var metricsOnly = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var mainStart = now();\n    var timings = {\n      fontLoad: 0,\n      typesetting: 0\n    };\n\n    // Ensure newlines are normalized\n    if (text.indexOf('\\r') > -1) {\n      console.info('Typesetter: got text with \\\\r chars; normalizing to \\\\n');\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    }\n\n    // Ensure we've got numbers not strings\n    fontSize = +fontSize;\n    letterSpacing = +letterSpacing;\n    maxWidth = +maxWidth;\n    lineHeight = lineHeight || 'normal';\n    textIndent = +textIndent;\n    loadFont(font, function (fontObj) {\n      var hasMaxWidth = isFinite(maxWidth);\n      var glyphIds = null;\n      var glyphPositions = null;\n      var glyphData = null;\n      var glyphColors = null;\n      var caretPositions = null;\n      var visibleBounds = null;\n      var chunkedBounds = null;\n      var maxLineWidth = 0;\n      var renderableGlyphCount = 0;\n      var canWrap = whiteSpace !== 'nowrap';\n      var ascender = fontObj.ascender,\n        descender = fontObj.descender,\n        unitsPerEm = fontObj.unitsPerEm,\n        lineGap = fontObj.lineGap,\n        capHeight = fontObj.capHeight,\n        xHeight = fontObj.xHeight;\n      timings.fontLoad = now() - mainStart;\n      var typesetStart = now();\n\n      // Find conversion between native font units and fontSize units; this will already be done\n      // for the gx/gy values below but everything else we'll need to convert\n      var fontSizeMult = fontSize / unitsPerEm;\n\n      // Determine appropriate value for 'normal' line height based on the font's actual metrics\n      // TODO this does not guarantee individual glyphs won't exceed the line height, e.g. Roboto; should we use yMin/Max instead?\n      if (lineHeight === 'normal') {\n        lineHeight = (ascender - descender + lineGap) / unitsPerEm;\n      }\n\n      // Determine line height and leading adjustments\n      lineHeight = lineHeight * fontSize;\n      var halfLeading = (lineHeight - (ascender - descender) * fontSizeMult) / 2;\n      var topBaseline = -(ascender * fontSizeMult + halfLeading);\n      var caretHeight = Math.min(lineHeight, (ascender - descender) * fontSizeMult);\n      var caretBottomOffset = (ascender + descender) / 2 * fontSizeMult - caretHeight / 2;\n\n      // Distribute glyphs into lines based on wrapping\n      var lineXOffset = textIndent;\n      var currentLine = new TextLine();\n      var lines = [currentLine];\n      fontObj.forEachGlyph(text, fontSize, letterSpacing, function (glyphObj, glyphX, charIndex) {\n        var char = text.charAt(charIndex);\n        var glyphWidth = glyphObj.advanceWidth * fontSizeMult;\n        var curLineCount = currentLine.count;\n        var nextLine;\n\n        // Calc isWhitespace and isEmpty once per glyphObj\n        if (!('isEmpty' in glyphObj)) {\n          glyphObj.isWhitespace = !!char && new RegExp(lineBreakingWhiteSpace).test(char);\n          glyphObj.canBreakAfter = !!char && BREAK_AFTER_CHARS.test(char);\n          glyphObj.isEmpty = glyphObj.xMin === glyphObj.xMax || glyphObj.yMin === glyphObj.yMax || DEFAULT_IGNORABLE_CHARS.test(char);\n        }\n        if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\n          renderableGlyphCount++;\n        }\n\n        // If a non-whitespace character overflows the max width, we need to soft-wrap\n        if (canWrap && hasMaxWidth && !glyphObj.isWhitespace && glyphX + glyphWidth + lineXOffset > maxWidth && curLineCount) {\n          // If it's the first char after a whitespace, start a new line\n          if (currentLine.glyphAt(curLineCount - 1).glyphObj.canBreakAfter) {\n            nextLine = new TextLine();\n            lineXOffset = -glyphX;\n          } else {\n            // Back up looking for a whitespace character to wrap at\n            for (var i = curLineCount; i--;) {\n              // If we got the start of the line there's no soft break point; make hard break if overflowWrap='break-word'\n              if (i === 0 && overflowWrap === 'break-word') {\n                nextLine = new TextLine();\n                lineXOffset = -glyphX;\n                break;\n              }\n              // Found a soft break point; move all chars since it to a new line\n              else if (currentLine.glyphAt(i).glyphObj.canBreakAfter) {\n                nextLine = currentLine.splitAt(i + 1);\n                var adjustX = nextLine.glyphAt(0).x;\n                lineXOffset -= adjustX;\n                for (var j = nextLine.count; j--;) {\n                  nextLine.glyphAt(j).x -= adjustX;\n                }\n                break;\n              }\n            }\n          }\n          if (nextLine) {\n            currentLine.isSoftWrapped = true;\n            currentLine = nextLine;\n            lines.push(currentLine);\n            maxLineWidth = maxWidth; //after soft wrapping use maxWidth as calculated width\n          }\n        }\n\n        var fly = currentLine.glyphAt(currentLine.count);\n        fly.glyphObj = glyphObj;\n        fly.x = glyphX + lineXOffset;\n        fly.width = glyphWidth;\n        fly.charIndex = charIndex;\n\n        // Handle hard line breaks\n        if (char === '\\n') {\n          currentLine = new TextLine();\n          lines.push(currentLine);\n          lineXOffset = -(glyphX + glyphWidth + letterSpacing * fontSize) + textIndent;\n        }\n      });\n\n      // Calculate width of each line (excluding trailing whitespace) and maximum block width\n      lines.forEach(function (line) {\n        for (var i = line.count; i--;) {\n          var _line$glyphAt = line.glyphAt(i),\n            glyphObj = _line$glyphAt.glyphObj,\n            x = _line$glyphAt.x,\n            width = _line$glyphAt.width;\n          if (!glyphObj.isWhitespace) {\n            line.width = x + width;\n            if (line.width > maxLineWidth) {\n              maxLineWidth = line.width;\n            }\n            return;\n          }\n        }\n      });\n\n      // Find overall position adjustments for anchoring\n      var anchorXOffset = 0;\n      var anchorYOffset = 0;\n      if (anchorX) {\n        if (typeof anchorX === 'number') {\n          anchorXOffset = -anchorX;\n        } else if (typeof anchorX === 'string') {\n          anchorXOffset = -maxLineWidth * (anchorX === 'left' ? 0 : anchorX === 'center' ? 0.5 : anchorX === 'right' ? 1 : parsePercent(anchorX));\n        }\n      }\n      if (anchorY) {\n        if (typeof anchorY === 'number') {\n          anchorYOffset = -anchorY;\n        } else if (typeof anchorY === 'string') {\n          var height = lines.length * lineHeight;\n          anchorYOffset = anchorY === 'top' ? 0 : anchorY === 'top-baseline' ? -topBaseline : anchorY === 'top-cap' ? -topBaseline - capHeight * fontSizeMult : anchorY === 'top-ex' ? -topBaseline - xHeight * fontSizeMult : anchorY === 'middle' ? height / 2 : anchorY === 'bottom' ? height : anchorY === 'bottom-baseline' ? height - halfLeading + descender * fontSizeMult : parsePercent(anchorY) * height;\n        }\n      }\n      if (!metricsOnly) {\n        // Resolve bidi levels\n        var bidiLevelsResult = bidi.getEmbeddingLevels(text, direction);\n\n        // Process each line, applying alignment offsets, adding each glyph to the atlas, and\n        // collecting all renderable glyphs into a single collection.\n        glyphIds = new Uint16Array(renderableGlyphCount);\n        glyphPositions = new Float32Array(renderableGlyphCount * 2);\n        glyphData = {};\n        visibleBounds = [INF, INF, -INF, -INF];\n        chunkedBounds = [];\n        var lineYOffset = topBaseline;\n        if (includeCaretPositions) {\n          caretPositions = new Float32Array(text.length * 3);\n        }\n        if (colorRanges) {\n          glyphColors = new Uint8Array(renderableGlyphCount * 3);\n        }\n        var renderableGlyphIndex = 0;\n        var prevCharIndex = -1;\n        var colorCharIndex = -1;\n        var chunk;\n        var currentColor;\n        lines.forEach(function (line, lineIndex) {\n          var lineGlyphCount = line.count,\n            lineWidth = line.width;\n\n          // Ignore empty lines\n          if (lineGlyphCount > 0) {\n            // Count trailing whitespaces, we want to ignore these for certain things\n            var trailingWhitespaceCount = 0;\n            for (var i = lineGlyphCount; i-- && line.glyphAt(i).glyphObj.isWhitespace;) {\n              trailingWhitespaceCount++;\n            }\n\n            // Apply horizontal alignment adjustments\n            var _lineXOffset = 0;\n            var justifyAdjust = 0;\n            if (textAlign === 'center') {\n              _lineXOffset = (maxLineWidth - lineWidth) / 2;\n            } else if (textAlign === 'right') {\n              _lineXOffset = maxLineWidth - lineWidth;\n            } else if (textAlign === 'justify' && line.isSoftWrapped) {\n              // count non-trailing whitespace characters, and we'll adjust the offsets per character in the next loop\n              var whitespaceCount = 0;\n              for (var _i = lineGlyphCount - trailingWhitespaceCount; _i--;) {\n                if (line.glyphAt(_i).glyphObj.isWhitespace) {\n                  whitespaceCount++;\n                }\n              }\n              justifyAdjust = (maxLineWidth - lineWidth) / whitespaceCount;\n            }\n            if (justifyAdjust || _lineXOffset) {\n              var justifyOffset = 0;\n              for (var _i2 = 0; _i2 < lineGlyphCount; _i2++) {\n                var glyphInfo = line.glyphAt(_i2);\n                var _glyphObj = glyphInfo.glyphObj;\n                glyphInfo.x += _lineXOffset + justifyOffset;\n                // Expand non-trailing whitespaces for justify alignment\n                if (justifyAdjust !== 0 && _glyphObj.isWhitespace && _i2 < lineGlyphCount - trailingWhitespaceCount) {\n                  justifyOffset += justifyAdjust;\n                  glyphInfo.width += justifyAdjust;\n                }\n              }\n            }\n\n            // Perform bidi range flipping\n            var flips = bidi.getReorderSegments(text, bidiLevelsResult, line.glyphAt(0).charIndex, line.glyphAt(line.count - 1).charIndex);\n            for (var fi = 0; fi < flips.length; fi++) {\n              var _flips$fi = _slicedToArray(flips[fi], 2),\n                start = _flips$fi[0],\n                end = _flips$fi[1];\n              // Map start/end string indices to indices in the line\n              var left = Infinity,\n                right = -Infinity;\n              for (var _i3 = 0; _i3 < lineGlyphCount; _i3++) {\n                if (line.glyphAt(_i3).charIndex >= start) {\n                  // gte to handle removed characters\n                  var startInLine = _i3,\n                    endInLine = _i3;\n                  for (; endInLine < lineGlyphCount; endInLine++) {\n                    var info = line.glyphAt(endInLine);\n                    if (info.charIndex > end) {\n                      break;\n                    }\n                    if (endInLine < lineGlyphCount - trailingWhitespaceCount) {\n                      //don't include trailing ws in flip width\n                      left = Math.min(left, info.x);\n                      right = Math.max(right, info.x + info.width);\n                    }\n                  }\n                  for (var j = startInLine; j < endInLine; j++) {\n                    var _glyphInfo = line.glyphAt(j);\n                    _glyphInfo.x = right - (_glyphInfo.x + _glyphInfo.width - left);\n                  }\n                  break;\n                }\n              }\n            }\n\n            // Assemble final data arrays\n            var glyphObj;\n            var setGlyphObj = function setGlyphObj(g) {\n              return glyphObj = g;\n            };\n            for (var _i4 = 0; _i4 < lineGlyphCount; _i4++) {\n              var _glyphInfo2 = line.glyphAt(_i4);\n              glyphObj = _glyphInfo2.glyphObj;\n              var glyphId = glyphObj.index;\n\n              // Replace mirrored characters in rtl\n              var rtl = bidiLevelsResult.levels[_glyphInfo2.charIndex] & 1; //odd level means rtl\n              if (rtl) {\n                var mirrored = bidi.getMirroredCharacter(text[_glyphInfo2.charIndex]);\n                if (mirrored) {\n                  fontObj.forEachGlyph(mirrored, 0, 0, setGlyphObj);\n                }\n              }\n\n              // Add caret positions\n              if (includeCaretPositions) {\n                var charIndex = _glyphInfo2.charIndex;\n                var caretLeft = _glyphInfo2.x + anchorXOffset;\n                var caretRight = _glyphInfo2.x + _glyphInfo2.width + anchorXOffset;\n                caretPositions[charIndex * 3] = rtl ? caretRight : caretLeft; //start edge x\n                caretPositions[charIndex * 3 + 1] = rtl ? caretLeft : caretRight; //end edge x\n                caretPositions[charIndex * 3 + 2] = lineYOffset + caretBottomOffset + anchorYOffset; //common bottom y\n\n                // If we skipped any chars from the previous glyph (due to ligature subs), fill in caret\n                // positions for those missing char indices; currently this uses a best-guess by dividing\n                // the ligature's width evenly. In the future we may try to use the font's LigatureCaretList\n                // table to get better interior caret positions.\n                var ligCount = charIndex - prevCharIndex;\n                if (ligCount > 1) {\n                  fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\n                }\n                prevCharIndex = charIndex;\n              }\n\n              // Track current color range\n              if (colorRanges) {\n                var _charIndex = _glyphInfo2.charIndex;\n                while (_charIndex > colorCharIndex) {\n                  colorCharIndex++;\n                  if (colorRanges.hasOwnProperty(colorCharIndex)) {\n                    currentColor = colorRanges[colorCharIndex];\n                  }\n                }\n              }\n\n              // Get atlas data for renderable glyphs\n              if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\n                var idx = renderableGlyphIndex++;\n\n                // Add this glyph's path data\n                if (!glyphData[glyphId]) {\n                  glyphData[glyphId] = {\n                    path: glyphObj.path,\n                    pathBounds: [glyphObj.xMin, glyphObj.yMin, glyphObj.xMax, glyphObj.yMax]\n                  };\n                }\n\n                // Determine final glyph position and add to glyphPositions array\n                var glyphX = _glyphInfo2.x + anchorXOffset;\n                var glyphY = lineYOffset + anchorYOffset;\n                glyphPositions[idx * 2] = glyphX;\n                glyphPositions[idx * 2 + 1] = glyphY;\n\n                // Track total visible bounds\n                var visX0 = glyphX + glyphObj.xMin * fontSizeMult;\n                var visY0 = glyphY + glyphObj.yMin * fontSizeMult;\n                var visX1 = glyphX + glyphObj.xMax * fontSizeMult;\n                var visY1 = glyphY + glyphObj.yMax * fontSizeMult;\n                if (visX0 < visibleBounds[0]) visibleBounds[0] = visX0;\n                if (visY0 < visibleBounds[1]) visibleBounds[1] = visY0;\n                if (visX1 > visibleBounds[2]) visibleBounds[2] = visX1;\n                if (visY1 > visibleBounds[3]) visibleBounds[3] = visY1;\n\n                // Track bounding rects for each chunk of N glyphs\n                if (idx % chunkedBoundsSize === 0) {\n                  chunk = {\n                    start: idx,\n                    end: idx,\n                    rect: [INF, INF, -INF, -INF]\n                  };\n                  chunkedBounds.push(chunk);\n                }\n                chunk.end++;\n                var chunkRect = chunk.rect;\n                if (visX0 < chunkRect[0]) chunkRect[0] = visX0;\n                if (visY0 < chunkRect[1]) chunkRect[1] = visY0;\n                if (visX1 > chunkRect[2]) chunkRect[2] = visX1;\n                if (visY1 > chunkRect[3]) chunkRect[3] = visY1;\n\n                // Add to glyph ids array\n                glyphIds[idx] = glyphId;\n\n                // Add colors\n                if (colorRanges) {\n                  var _start = idx * 3;\n                  glyphColors[_start] = currentColor >> 16 & 255;\n                  glyphColors[_start + 1] = currentColor >> 8 & 255;\n                  glyphColors[_start + 2] = currentColor & 255;\n                }\n              }\n            }\n          }\n\n          // Increment y offset for next line\n          lineYOffset -= lineHeight;\n        });\n\n        // Fill in remaining caret positions in case the final character was a ligature\n        if (caretPositions) {\n          var ligCount = text.length - prevCharIndex;\n          if (ligCount > 1) {\n            fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\n          }\n        }\n      }\n\n      // Timing stats\n      timings.typesetting = now() - typesetStart;\n      callback({\n        glyphIds: glyphIds,\n        //font indices for each glyph\n        glyphPositions: glyphPositions,\n        //x,y of each glyph's origin in layout\n        glyphData: glyphData,\n        //dict holding data about each glyph appearing in the text\n        caretPositions: caretPositions,\n        //startX,endX,bottomY caret positions for each char\n        caretHeight: caretHeight,\n        //height of cursor from bottom to top\n        glyphColors: glyphColors,\n        //color for each glyph, if color ranges supplied\n        chunkedBounds: chunkedBounds,\n        //total rects per (n=chunkedBoundsSize) consecutive glyphs\n        fontSize: fontSize,\n        //calculated em height\n        unitsPerEm: unitsPerEm,\n        //font units per em\n        ascender: ascender * fontSizeMult,\n        //font ascender\n        descender: descender * fontSizeMult,\n        //font descender\n        capHeight: capHeight * fontSizeMult,\n        //font cap-height\n        xHeight: xHeight * fontSizeMult,\n        //font x-height\n        lineHeight: lineHeight,\n        //computed line height\n        topBaseline: topBaseline,\n        //y coordinate of the top line's baseline\n        blockBounds: [\n        //bounds for the whole block of text, including vertical padding for lineHeight\n        anchorXOffset, anchorYOffset - lines.length * lineHeight, anchorXOffset + maxLineWidth, anchorYOffset],\n        visibleBounds: visibleBounds,\n        //total bounds of visible text paths, may be larger or smaller than blockBounds\n        timings: timings\n      });\n    });\n  }\n\n  /**\n   * For a given text string and font parameters, determine the resulting block dimensions\n   * after wrapping for the given maxWidth.\n   * @param args\n   * @param callback\n   */\n  function measure(args, callback) {\n    typeset(args, function (result) {\n      var _result$blockBounds = _slicedToArray(result.blockBounds, 4),\n        x0 = _result$blockBounds[0],\n        y0 = _result$blockBounds[1],\n        x1 = _result$blockBounds[2],\n        y1 = _result$blockBounds[3];\n      callback({\n        width: x1 - x0,\n        height: y1 - y0\n      });\n    }, {\n      metricsOnly: true\n    });\n  }\n  function parsePercent(str) {\n    var match = str.match(/^([\\d.]+)%$/);\n    var pct = match ? parseFloat(match[1]) : NaN;\n    return isNaN(pct) ? 0 : pct / 100;\n  }\n  function fillLigatureCaretPositions(caretPositions, ligStartIndex, ligCount) {\n    var ligStartX = caretPositions[ligStartIndex * 3];\n    var ligEndX = caretPositions[ligStartIndex * 3 + 1];\n    var ligY = caretPositions[ligStartIndex * 3 + 2];\n    var guessedAdvanceX = (ligEndX - ligStartX) / ligCount;\n    for (var i = 0; i < ligCount; i++) {\n      var startIndex = (ligStartIndex + i) * 3;\n      caretPositions[startIndex] = ligStartX + guessedAdvanceX * i;\n      caretPositions[startIndex + 1] = ligStartX + guessedAdvanceX * (i + 1);\n      caretPositions[startIndex + 2] = ligY;\n    }\n  }\n  function now() {\n    return (self.performance || Date).now();\n  }\n\n  // Array-backed structure for a single line's glyphs data\n  function TextLine() {\n    this.data = [];\n  }\n  var textLineProps = ['glyphObj', 'x', 'width', 'charIndex'];\n  TextLine.prototype = {\n    width: 0,\n    isSoftWrapped: false,\n    get count() {\n      return Math.ceil(this.data.length / textLineProps.length);\n    },\n    glyphAt: function glyphAt(i) {\n      var fly = TextLine.flyweight;\n      fly.data = this.data;\n      fly.index = i;\n      return fly;\n    },\n    splitAt: function splitAt(i) {\n      var newLine = new TextLine();\n      newLine.data = this.data.splice(i * textLineProps.length);\n      return newLine;\n    }\n  };\n  TextLine.flyweight = textLineProps.reduce(function (obj, prop, i, all) {\n    Object.defineProperty(obj, prop, {\n      get: function get() {\n        return this.data[this.index * textLineProps.length + i];\n      },\n      set: function set(val) {\n        this.data[this.index * textLineProps.length + i] = val;\n      }\n    });\n    return obj;\n  }, {\n    data: null,\n    index: 0\n  });\n  return {\n    typeset: typeset,\n    measure: measure,\n    loadFont: loadFont\n  };\n}\nvar now = function now() {\n  return (self.performance || Date).now();\n};\nvar mainThreadGenerator = /*#__PURE__*/createSDFGenerator();\nvar warned;\n\n/**\n * Generate an SDF texture image for a single glyph path, placing the result into a webgl canvas at a\n * given location and channel. Utilizes the webgl-sdf-generator external package for GPU-accelerated SDF\n * generation when supported.\n */\nfunction generateSDF(width, height, path, viewBox, distance, exponent, canvas, x, y, channel) {\n  var useWebGL = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : true;\n  // Allow opt-out\n  if (!useWebGL) {\n    return generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel);\n  }\n\n  // Attempt GPU-accelerated generation first\n  return generateSDF_GL(width, height, path, viewBox, distance, exponent, canvas, x, y, channel).then(null, function (err) {\n    // WebGL failed either due to a hard error or unexpected results; fall back to JS in workers\n    if (!warned) {\n      console.warn(\"WebGL SDF generation failed, falling back to JS\", err);\n      warned = true;\n    }\n    return generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel);\n  });\n}\nvar queue = [];\nvar chunkTimeBudget = 5; // ms\nvar timer = 0;\nfunction nextChunk() {\n  var start = now();\n  while (queue.length && now() - start < chunkTimeBudget) {\n    queue.shift()();\n  }\n  timer = queue.length ? setTimeout(nextChunk, 0) : 0;\n}\n\n/**\n * WebGL-based implementation executed on the main thread. Requests are executed in time-bounded\n * macrotask chunks to allow render frames to execute in between.\n */\nvar generateSDF_GL = function generateSDF_GL() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return new Promise(function (resolve, reject) {\n    queue.push(function () {\n      var start = now();\n      try {\n        var _mainThreadGenerator$;\n        (_mainThreadGenerator$ = mainThreadGenerator.webgl).generateIntoCanvas.apply(_mainThreadGenerator$, args);\n        resolve({\n          timing: now() - start\n        });\n      } catch (err) {\n        reject(err);\n      }\n    });\n    if (!timer) {\n      timer = setTimeout(nextChunk, 0);\n    }\n  });\n};\nvar threadCount = 4; // how many workers to spawn\nvar idleTimeout = 2000; // workers will be terminated after being idle this many milliseconds\nvar threads = {};\nvar callNum = 0;\n\n/**\n * Fallback JS-based implementation, fanned out to a number of worker threads for parallelism\n */\nfunction generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel) {\n  var workerId = 'TroikaTextSDFGenerator_JS_' + callNum++ % threadCount;\n  var thread = threads[workerId];\n  if (!thread) {\n    thread = threads[workerId] = {\n      workerModule: defineWorkerModule({\n        name: workerId,\n        workerId: workerId,\n        dependencies: [createSDFGenerator, now],\n        init: function init(_createSDFGenerator, now) {\n          var generate = _createSDFGenerator().javascript.generate;\n          return function () {\n            var start = now();\n            var textureData = generate.apply(void 0, arguments);\n            return {\n              textureData: textureData,\n              timing: now() - start\n            };\n          };\n        },\n        getTransferables: function getTransferables(result) {\n          return [result.textureData.buffer];\n        }\n      }),\n      requests: 0,\n      idleTimer: null\n    };\n  }\n  thread.requests++;\n  clearTimeout(thread.idleTimer);\n  return thread.workerModule(width, height, path, viewBox, distance, exponent).then(function (_ref2) {\n    var textureData = _ref2.textureData,\n      timing = _ref2.timing;\n    // copy result data into the canvas\n    var start = now();\n    // expand single-channel data into rgba\n    var imageData = new Uint8Array(textureData.length * 4);\n    for (var i = 0; i < textureData.length; i++) {\n      imageData[i * 4 + channel] = textureData[i];\n    }\n    mainThreadGenerator.webglUtils.renderImageData(canvas, imageData, x, y, width, height, 1 << 3 - channel);\n    timing += now() - start;\n\n    // clean up workers after a while\n    if (--thread.requests === 0) {\n      thread.idleTimer = setTimeout(function () {\n        terminateWorker(workerId);\n      }, idleTimeout);\n    }\n    return {\n      timing: timing\n    };\n  });\n}\nfunction warmUpSDFCanvas(canvas) {\n  if (!canvas._warm) {\n    mainThreadGenerator.webgl.isSupported(canvas);\n    canvas._warm = true;\n  }\n}\nvar resizeWebGLCanvasWithoutClearing = mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;\n\n/*!\nCustom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.\nOriginal MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE\n*/\nfunction typrFactory() {\n  return \"undefined\" == typeof window && (self.window = self), function (r) {\n    var e = {\n      parse: function parse(r) {\n        var t = e._bin,\n          a = new Uint8Array(r);\n        if (\"ttcf\" == t.readASCII(a, 0, 4)) {\n          var n = 4;\n          t.readUshort(a, n), n += 2, t.readUshort(a, n), n += 2;\n          var o = t.readUint(a, n);\n          n += 4;\n          for (var s = [], i = 0; i < o; i++) {\n            var h = t.readUint(a, n);\n            n += 4, s.push(e._readFont(a, h));\n          }\n          return s;\n        }\n        return [e._readFont(a, 0)];\n      },\n      _readFont: function _readFont(r, t) {\n        var a = e._bin,\n          n = t;\n        a.readFixed(r, t), t += 4;\n        var o = a.readUshort(r, t);\n        t += 2, a.readUshort(r, t), t += 2, a.readUshort(r, t), t += 2, a.readUshort(r, t), t += 2;\n        for (var s = [\"cmap\", \"head\", \"hhea\", \"maxp\", \"hmtx\", \"name\", \"OS/2\", \"post\", \"loca\", \"glyf\", \"kern\", \"CFF \", \"GPOS\", \"GSUB\", \"SVG \"], i = {\n            _data: r,\n            _offset: n\n          }, h = {}, f = 0; f < o; f++) {\n          var d = a.readASCII(r, t, 4);\n          t += 4, a.readUint(r, t), t += 4;\n          var u = a.readUint(r, t);\n          t += 4;\n          var l = a.readUint(r, t);\n          t += 4, h[d] = {\n            offset: u,\n            length: l\n          };\n        }\n        for (f = 0; f < s.length; f++) {\n          var v = s[f];\n          h[v] && (i[v.trim()] = e[v.trim()].parse(r, h[v].offset, h[v].length, i));\n        }\n        return i;\n      },\n      _tabOffset: function _tabOffset(r, t, a) {\n        for (var n = e._bin, o = n.readUshort(r, a + 4), s = a + 12, i = 0; i < o; i++) {\n          var h = n.readASCII(r, s, 4);\n          s += 4, n.readUint(r, s), s += 4;\n          var f = n.readUint(r, s);\n          if (s += 4, n.readUint(r, s), s += 4, h == t) return f;\n        }\n        return 0;\n      }\n    };\n    e._bin = {\n      readFixed: function readFixed(r, e) {\n        return (r[e] << 8 | r[e + 1]) + (r[e + 2] << 8 | r[e + 3]) / 65540;\n      },\n      readF2dot14: function readF2dot14(r, t) {\n        return e._bin.readShort(r, t) / 16384;\n      },\n      readInt: function readInt(r, t) {\n        return e._bin._view(r).getInt32(t);\n      },\n      readInt8: function readInt8(r, t) {\n        return e._bin._view(r).getInt8(t);\n      },\n      readShort: function readShort(r, t) {\n        return e._bin._view(r).getInt16(t);\n      },\n      readUshort: function readUshort(r, t) {\n        return e._bin._view(r).getUint16(t);\n      },\n      readUshorts: function readUshorts(r, t, a) {\n        for (var n = [], o = 0; o < a; o++) n.push(e._bin.readUshort(r, t + 2 * o));\n        return n;\n      },\n      readUint: function readUint(r, t) {\n        return e._bin._view(r).getUint32(t);\n      },\n      readUint64: function readUint64(r, t) {\n        return 4294967296 * e._bin.readUint(r, t) + e._bin.readUint(r, t + 4);\n      },\n      readASCII: function readASCII(r, e, t) {\n        for (var a = \"\", n = 0; n < t; n++) a += String.fromCharCode(r[e + n]);\n        return a;\n      },\n      readUnicode: function readUnicode(r, e, t) {\n        for (var a = \"\", n = 0; n < t; n++) {\n          var o = r[e++] << 8 | r[e++];\n          a += String.fromCharCode(o);\n        }\n        return a;\n      },\n      _tdec: \"undefined\" != typeof window && window.TextDecoder ? new window.TextDecoder() : null,\n      readUTF8: function readUTF8(r, t, a) {\n        var n = e._bin._tdec;\n        return n && 0 == t && a == r.length ? n.decode(r) : e._bin.readASCII(r, t, a);\n      },\n      readBytes: function readBytes(r, e, t) {\n        for (var a = [], n = 0; n < t; n++) a.push(r[e + n]);\n        return a;\n      },\n      readASCIIArray: function readASCIIArray(r, e, t) {\n        for (var a = [], n = 0; n < t; n++) a.push(String.fromCharCode(r[e + n]));\n        return a;\n      },\n      _view: function _view(r) {\n        return r._dataView || (r._dataView = r.buffer ? new DataView(r.buffer, r.byteOffset, r.byteLength) : new DataView(new Uint8Array(r).buffer));\n      }\n    }, e._lctf = {}, e._lctf.parse = function (r, t, a, n, o) {\n      var s = e._bin,\n        i = {},\n        h = t;\n      s.readFixed(r, t), t += 4;\n      var f = s.readUshort(r, t);\n      t += 2;\n      var d = s.readUshort(r, t);\n      t += 2;\n      var u = s.readUshort(r, t);\n      return t += 2, i.scriptList = e._lctf.readScriptList(r, h + f), i.featureList = e._lctf.readFeatureList(r, h + d), i.lookupList = e._lctf.readLookupList(r, h + u, o), i;\n    }, e._lctf.readLookupList = function (r, t, a) {\n      var n = e._bin,\n        o = t,\n        s = [],\n        i = n.readUshort(r, t);\n      t += 2;\n      for (var h = 0; h < i; h++) {\n        var f = n.readUshort(r, t);\n        t += 2;\n        var d = e._lctf.readLookupTable(r, o + f, a);\n        s.push(d);\n      }\n      return s;\n    }, e._lctf.readLookupTable = function (r, t, a) {\n      var n = e._bin,\n        o = t,\n        s = {\n          tabs: []\n        };\n      s.ltype = n.readUshort(r, t), t += 2, s.flag = n.readUshort(r, t), t += 2;\n      var i = n.readUshort(r, t);\n      t += 2;\n      for (var h = s.ltype, f = 0; f < i; f++) {\n        var d = n.readUshort(r, t);\n        t += 2;\n        var u = a(r, h, o + d, s);\n        s.tabs.push(u);\n      }\n      return s;\n    }, e._lctf.numOfOnes = function (r) {\n      for (var e = 0, t = 0; t < 32; t++) 0 != (r >>> t & 1) && e++;\n      return e;\n    }, e._lctf.readClassDef = function (r, t) {\n      var a = e._bin,\n        n = [],\n        o = a.readUshort(r, t);\n      if (t += 2, 1 == o) {\n        var s = a.readUshort(r, t);\n        t += 2;\n        var i = a.readUshort(r, t);\n        t += 2;\n        for (var h = 0; h < i; h++) n.push(s + h), n.push(s + h), n.push(a.readUshort(r, t)), t += 2;\n      }\n      if (2 == o) {\n        var f = a.readUshort(r, t);\n        t += 2;\n        for (h = 0; h < f; h++) n.push(a.readUshort(r, t)), t += 2, n.push(a.readUshort(r, t)), t += 2, n.push(a.readUshort(r, t)), t += 2;\n      }\n      return n;\n    }, e._lctf.getInterval = function (r, e) {\n      for (var t = 0; t < r.length; t += 3) {\n        var a = r[t],\n          n = r[t + 1];\n        if (r[t + 2], a <= e && e <= n) return t;\n      }\n      return -1;\n    }, e._lctf.readCoverage = function (r, t) {\n      var a = e._bin,\n        n = {};\n      n.fmt = a.readUshort(r, t), t += 2;\n      var o = a.readUshort(r, t);\n      return t += 2, 1 == n.fmt && (n.tab = a.readUshorts(r, t, o)), 2 == n.fmt && (n.tab = a.readUshorts(r, t, 3 * o)), n;\n    }, e._lctf.coverageIndex = function (r, t) {\n      var a = r.tab;\n      if (1 == r.fmt) return a.indexOf(t);\n      if (2 == r.fmt) {\n        var n = e._lctf.getInterval(a, t);\n        if (-1 != n) return a[n + 2] + (t - a[n]);\n      }\n      return -1;\n    }, e._lctf.readFeatureList = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = [],\n        s = a.readUshort(r, t);\n      t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = a.readASCII(r, t, 4);\n        t += 4;\n        var f = a.readUshort(r, t);\n        t += 2;\n        var d = e._lctf.readFeatureTable(r, n + f);\n        d.tag = h.trim(), o.push(d);\n      }\n      return o;\n    }, e._lctf.readFeatureTable = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = {},\n        s = a.readUshort(r, t);\n      t += 2, s > 0 && (o.featureParams = n + s);\n      var i = a.readUshort(r, t);\n      t += 2, o.tab = [];\n      for (var h = 0; h < i; h++) o.tab.push(a.readUshort(r, t + 2 * h));\n      return o;\n    }, e._lctf.readScriptList = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = {},\n        s = a.readUshort(r, t);\n      t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = a.readASCII(r, t, 4);\n        t += 4;\n        var f = a.readUshort(r, t);\n        t += 2, o[h.trim()] = e._lctf.readScriptTable(r, n + f);\n      }\n      return o;\n    }, e._lctf.readScriptTable = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = {},\n        s = a.readUshort(r, t);\n      t += 2, o.default = e._lctf.readLangSysTable(r, n + s);\n      var i = a.readUshort(r, t);\n      t += 2;\n      for (var h = 0; h < i; h++) {\n        var f = a.readASCII(r, t, 4);\n        t += 4;\n        var d = a.readUshort(r, t);\n        t += 2, o[f.trim()] = e._lctf.readLangSysTable(r, n + d);\n      }\n      return o;\n    }, e._lctf.readLangSysTable = function (r, t) {\n      var a = e._bin,\n        n = {};\n      a.readUshort(r, t), t += 2, n.reqFeature = a.readUshort(r, t), t += 2;\n      var o = a.readUshort(r, t);\n      return t += 2, n.features = a.readUshorts(r, t, o), n;\n    }, e.CFF = {}, e.CFF.parse = function (r, t, a) {\n      var n = e._bin;\n      (r = new Uint8Array(r.buffer, t, a))[t = 0], r[++t], r[++t], r[++t], t++;\n      var o = [];\n      t = e.CFF.readIndex(r, t, o);\n      for (var s = [], i = 0; i < o.length - 1; i++) s.push(n.readASCII(r, t + o[i], o[i + 1] - o[i]));\n      t += o[o.length - 1];\n      var h = [];\n      t = e.CFF.readIndex(r, t, h);\n      var f = [];\n      for (i = 0; i < h.length - 1; i++) f.push(e.CFF.readDict(r, t + h[i], t + h[i + 1]));\n      t += h[h.length - 1];\n      var d = f[0],\n        u = [];\n      t = e.CFF.readIndex(r, t, u);\n      var l = [];\n      for (i = 0; i < u.length - 1; i++) l.push(n.readASCII(r, t + u[i], u[i + 1] - u[i]));\n      if (t += u[u.length - 1], e.CFF.readSubrs(r, t, d), d.CharStrings) {\n        t = d.CharStrings;\n        u = [];\n        t = e.CFF.readIndex(r, t, u);\n        var v = [];\n        for (i = 0; i < u.length - 1; i++) v.push(n.readBytes(r, t + u[i], u[i + 1] - u[i]));\n        d.CharStrings = v;\n      }\n      if (d.ROS) {\n        t = d.FDArray;\n        var c = [];\n        t = e.CFF.readIndex(r, t, c), d.FDArray = [];\n        for (i = 0; i < c.length - 1; i++) {\n          var p = e.CFF.readDict(r, t + c[i], t + c[i + 1]);\n          e.CFF._readFDict(r, p, l), d.FDArray.push(p);\n        }\n        t += c[c.length - 1], t = d.FDSelect, d.FDSelect = [];\n        var U = r[t];\n        if (t++, 3 != U) throw U;\n        var g = n.readUshort(r, t);\n        t += 2;\n        for (i = 0; i < g + 1; i++) d.FDSelect.push(n.readUshort(r, t), r[t + 2]), t += 3;\n      }\n      return d.Encoding && (d.Encoding = e.CFF.readEncoding(r, d.Encoding, d.CharStrings.length)), d.charset && (d.charset = e.CFF.readCharset(r, d.charset, d.CharStrings.length)), e.CFF._readFDict(r, d, l), d;\n    }, e.CFF._readFDict = function (r, t, a) {\n      var n;\n      for (var o in t.Private && (n = t.Private[1], t.Private = e.CFF.readDict(r, n, n + t.Private[0]), t.Private.Subrs && e.CFF.readSubrs(r, n + t.Private.Subrs, t.Private)), t) -1 != [\"FamilyName\", \"FontName\", \"FullName\", \"Notice\", \"version\", \"Copyright\"].indexOf(o) && (t[o] = a[t[o] - 426 + 35]);\n    }, e.CFF.readSubrs = function (r, t, a) {\n      var n = e._bin,\n        o = [];\n      t = e.CFF.readIndex(r, t, o);\n      var s,\n        i = o.length;\n      s = i < 1240 ? 107 : i < 33900 ? 1131 : 32768, a.Bias = s, a.Subrs = [];\n      for (var h = 0; h < o.length - 1; h++) a.Subrs.push(n.readBytes(r, t + o[h], o[h + 1] - o[h]));\n    }, e.CFF.tableSE = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 0, 111, 112, 113, 114, 0, 115, 116, 117, 118, 119, 120, 121, 122, 0, 123, 0, 124, 125, 126, 127, 128, 129, 130, 131, 0, 132, 133, 0, 134, 135, 136, 137, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 138, 0, 139, 0, 0, 0, 0, 140, 141, 142, 143, 0, 0, 0, 0, 0, 144, 0, 0, 0, 145, 0, 0, 146, 147, 148, 149, 0, 0, 0, 0], e.CFF.glyphByUnicode = function (r, e) {\n      for (var t = 0; t < r.charset.length; t++) if (r.charset[t] == e) return t;\n      return -1;\n    }, e.CFF.glyphBySE = function (r, t) {\n      return t < 0 || t > 255 ? -1 : e.CFF.glyphByUnicode(r, e.CFF.tableSE[t]);\n    }, e.CFF.readEncoding = function (r, t, a) {\n      e._bin;\n      var n = [\".notdef\"],\n        o = r[t];\n      if (t++, 0 != o) throw \"error: unknown encoding format: \" + o;\n      var s = r[t];\n      t++;\n      for (var i = 0; i < s; i++) n.push(r[t + i]);\n      return n;\n    }, e.CFF.readCharset = function (r, t, a) {\n      var n = e._bin,\n        o = [\".notdef\"],\n        s = r[t];\n      if (t++, 0 == s) for (var i = 0; i < a; i++) {\n        var h = n.readUshort(r, t);\n        t += 2, o.push(h);\n      } else {\n        if (1 != s && 2 != s) throw \"error: format: \" + s;\n        for (; o.length < a;) {\n          h = n.readUshort(r, t);\n          t += 2;\n          var f = 0;\n          1 == s ? (f = r[t], t++) : (f = n.readUshort(r, t), t += 2);\n          for (i = 0; i <= f; i++) o.push(h), h++;\n        }\n      }\n      return o;\n    }, e.CFF.readIndex = function (r, t, a) {\n      var n = e._bin,\n        o = n.readUshort(r, t) + 1,\n        s = r[t += 2];\n      if (t++, 1 == s) for (var i = 0; i < o; i++) a.push(r[t + i]);else if (2 == s) for (i = 0; i < o; i++) a.push(n.readUshort(r, t + 2 * i));else if (3 == s) for (i = 0; i < o; i++) a.push(16777215 & n.readUint(r, t + 3 * i - 1));else if (1 != o) throw \"unsupported offset size: \" + s + \", count: \" + o;\n      return (t += o * s) - 1;\n    }, e.CFF.getCharString = function (r, t, a) {\n      var n = e._bin,\n        o = r[t],\n        s = r[t + 1];\n      r[t + 2], r[t + 3], r[t + 4];\n      var i = 1,\n        h = null,\n        f = null;\n      o <= 20 && (h = o, i = 1), 12 == o && (h = 100 * o + s, i = 2), 21 <= o && o <= 27 && (h = o, i = 1), 28 == o && (f = n.readShort(r, t + 1), i = 3), 29 <= o && o <= 31 && (h = o, i = 1), 32 <= o && o <= 246 && (f = o - 139, i = 1), 247 <= o && o <= 250 && (f = 256 * (o - 247) + s + 108, i = 2), 251 <= o && o <= 254 && (f = 256 * -(o - 251) - s - 108, i = 2), 255 == o && (f = n.readInt(r, t + 1) / 65535, i = 5), a.val = null != f ? f : \"o\" + h, a.size = i;\n    }, e.CFF.readCharString = function (r, t, a) {\n      for (var n = t + a, o = e._bin, s = []; t < n;) {\n        var i = r[t],\n          h = r[t + 1];\n        r[t + 2], r[t + 3], r[t + 4];\n        var f = 1,\n          d = null,\n          u = null;\n        i <= 20 && (d = i, f = 1), 12 == i && (d = 100 * i + h, f = 2), 19 != i && 20 != i || (d = i, f = 2), 21 <= i && i <= 27 && (d = i, f = 1), 28 == i && (u = o.readShort(r, t + 1), f = 3), 29 <= i && i <= 31 && (d = i, f = 1), 32 <= i && i <= 246 && (u = i - 139, f = 1), 247 <= i && i <= 250 && (u = 256 * (i - 247) + h + 108, f = 2), 251 <= i && i <= 254 && (u = 256 * -(i - 251) - h - 108, f = 2), 255 == i && (u = o.readInt(r, t + 1) / 65535, f = 5), s.push(null != u ? u : \"o\" + d), t += f;\n      }\n      return s;\n    }, e.CFF.readDict = function (r, t, a) {\n      for (var n = e._bin, o = {}, s = []; t < a;) {\n        var i = r[t],\n          h = r[t + 1];\n        r[t + 2], r[t + 3], r[t + 4];\n        var f = 1,\n          d = null,\n          u = null;\n        if (28 == i && (u = n.readShort(r, t + 1), f = 3), 29 == i && (u = n.readInt(r, t + 1), f = 5), 32 <= i && i <= 246 && (u = i - 139, f = 1), 247 <= i && i <= 250 && (u = 256 * (i - 247) + h + 108, f = 2), 251 <= i && i <= 254 && (u = 256 * -(i - 251) - h - 108, f = 2), 255 == i) throw u = n.readInt(r, t + 1) / 65535, f = 5, \"unknown number\";\n        if (30 == i) {\n          var l = [];\n          for (f = 1;;) {\n            var v = r[t + f];\n            f++;\n            var c = v >> 4,\n              p = 15 & v;\n            if (15 != c && l.push(c), 15 != p && l.push(p), 15 == p) break;\n          }\n          for (var U = \"\", g = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, \".\", \"e\", \"e-\", \"reserved\", \"-\", \"endOfNumber\"], S = 0; S < l.length; S++) U += g[l[S]];\n          u = parseFloat(U);\n        }\n        if (i <= 21) if (d = [\"version\", \"Notice\", \"FullName\", \"FamilyName\", \"Weight\", \"FontBBox\", \"BlueValues\", \"OtherBlues\", \"FamilyBlues\", \"FamilyOtherBlues\", \"StdHW\", \"StdVW\", \"escape\", \"UniqueID\", \"XUID\", \"charset\", \"Encoding\", \"CharStrings\", \"Private\", \"Subrs\", \"defaultWidthX\", \"nominalWidthX\"][i], f = 1, 12 == i) d = [\"Copyright\", \"isFixedPitch\", \"ItalicAngle\", \"UnderlinePosition\", \"UnderlineThickness\", \"PaintType\", \"CharstringType\", \"FontMatrix\", \"StrokeWidth\", \"BlueScale\", \"BlueShift\", \"BlueFuzz\", \"StemSnapH\", \"StemSnapV\", \"ForceBold\", 0, 0, \"LanguageGroup\", \"ExpansionFactor\", \"initialRandomSeed\", \"SyntheticBase\", \"PostScript\", \"BaseFontName\", \"BaseFontBlend\", 0, 0, 0, 0, 0, 0, \"ROS\", \"CIDFontVersion\", \"CIDFontRevision\", \"CIDFontType\", \"CIDCount\", \"UIDBase\", \"FDArray\", \"FDSelect\", \"FontName\"][h], f = 2;\n        null != d ? (o[d] = 1 == s.length ? s[0] : s, s = []) : s.push(u), t += f;\n      }\n      return o;\n    }, e.cmap = {}, e.cmap.parse = function (r, t, a) {\n      r = new Uint8Array(r.buffer, t, a), t = 0;\n      var n = e._bin,\n        o = {};\n      n.readUshort(r, t), t += 2;\n      var s = n.readUshort(r, t);\n      t += 2;\n      var i = [];\n      o.tables = [];\n      for (var h = 0; h < s; h++) {\n        var f = n.readUshort(r, t);\n        t += 2;\n        var d = n.readUshort(r, t);\n        t += 2;\n        var u = n.readUint(r, t);\n        t += 4;\n        var l = \"p\" + f + \"e\" + d,\n          v = i.indexOf(u);\n        if (-1 == v) {\n          var c;\n          v = o.tables.length, i.push(u);\n          var p = n.readUshort(r, u);\n          0 == p ? c = e.cmap.parse0(r, u) : 4 == p ? c = e.cmap.parse4(r, u) : 6 == p ? c = e.cmap.parse6(r, u) : 12 == p ? c = e.cmap.parse12(r, u) : console.debug(\"unknown format: \" + p, f, d, u), o.tables.push(c);\n        }\n        if (null != o[l]) throw \"multiple tables for one platform+encoding\";\n        o[l] = v;\n      }\n      return o;\n    }, e.cmap.parse0 = function (r, t) {\n      var a = e._bin,\n        n = {};\n      n.format = a.readUshort(r, t), t += 2;\n      var o = a.readUshort(r, t);\n      t += 2, a.readUshort(r, t), t += 2, n.map = [];\n      for (var s = 0; s < o - 6; s++) n.map.push(r[t + s]);\n      return n;\n    }, e.cmap.parse4 = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = {};\n      o.format = a.readUshort(r, t), t += 2;\n      var s = a.readUshort(r, t);\n      t += 2, a.readUshort(r, t), t += 2;\n      var i = a.readUshort(r, t);\n      t += 2;\n      var h = i / 2;\n      o.searchRange = a.readUshort(r, t), t += 2, o.entrySelector = a.readUshort(r, t), t += 2, o.rangeShift = a.readUshort(r, t), t += 2, o.endCount = a.readUshorts(r, t, h), t += 2 * h, t += 2, o.startCount = a.readUshorts(r, t, h), t += 2 * h, o.idDelta = [];\n      for (var f = 0; f < h; f++) o.idDelta.push(a.readShort(r, t)), t += 2;\n      for (o.idRangeOffset = a.readUshorts(r, t, h), t += 2 * h, o.glyphIdArray = []; t < n + s;) o.glyphIdArray.push(a.readUshort(r, t)), t += 2;\n      return o;\n    }, e.cmap.parse6 = function (r, t) {\n      var a = e._bin,\n        n = {};\n      n.format = a.readUshort(r, t), t += 2, a.readUshort(r, t), t += 2, a.readUshort(r, t), t += 2, n.firstCode = a.readUshort(r, t), t += 2;\n      var o = a.readUshort(r, t);\n      t += 2, n.glyphIdArray = [];\n      for (var s = 0; s < o; s++) n.glyphIdArray.push(a.readUshort(r, t)), t += 2;\n      return n;\n    }, e.cmap.parse12 = function (r, t) {\n      var a = e._bin,\n        n = {};\n      n.format = a.readUshort(r, t), t += 2, t += 2, a.readUint(r, t), t += 4, a.readUint(r, t), t += 4;\n      var o = a.readUint(r, t);\n      t += 4, n.groups = [];\n      for (var s = 0; s < o; s++) {\n        var i = t + 12 * s,\n          h = a.readUint(r, i + 0),\n          f = a.readUint(r, i + 4),\n          d = a.readUint(r, i + 8);\n        n.groups.push([h, f, d]);\n      }\n      return n;\n    }, e.glyf = {}, e.glyf.parse = function (r, e, t, a) {\n      for (var n = [], o = 0; o < a.maxp.numGlyphs; o++) n.push(null);\n      return n;\n    }, e.glyf._parseGlyf = function (r, t) {\n      var a = e._bin,\n        n = r._data,\n        o = e._tabOffset(n, \"glyf\", r._offset) + r.loca[t];\n      if (r.loca[t] == r.loca[t + 1]) return null;\n      var s = {};\n      if (s.noc = a.readShort(n, o), o += 2, s.xMin = a.readShort(n, o), o += 2, s.yMin = a.readShort(n, o), o += 2, s.xMax = a.readShort(n, o), o += 2, s.yMax = a.readShort(n, o), o += 2, s.xMin >= s.xMax || s.yMin >= s.yMax) return null;\n      if (s.noc > 0) {\n        s.endPts = [];\n        for (var i = 0; i < s.noc; i++) s.endPts.push(a.readUshort(n, o)), o += 2;\n        var h = a.readUshort(n, o);\n        if (o += 2, n.length - o < h) return null;\n        s.instructions = a.readBytes(n, o, h), o += h;\n        var f = s.endPts[s.noc - 1] + 1;\n        s.flags = [];\n        for (i = 0; i < f; i++) {\n          var d = n[o];\n          if (o++, s.flags.push(d), 0 != (8 & d)) {\n            var u = n[o];\n            o++;\n            for (var l = 0; l < u; l++) s.flags.push(d), i++;\n          }\n        }\n        s.xs = [];\n        for (i = 0; i < f; i++) {\n          var v = 0 != (2 & s.flags[i]),\n            c = 0 != (16 & s.flags[i]);\n          v ? (s.xs.push(c ? n[o] : -n[o]), o++) : c ? s.xs.push(0) : (s.xs.push(a.readShort(n, o)), o += 2);\n        }\n        s.ys = [];\n        for (i = 0; i < f; i++) {\n          v = 0 != (4 & s.flags[i]), c = 0 != (32 & s.flags[i]);\n          v ? (s.ys.push(c ? n[o] : -n[o]), o++) : c ? s.ys.push(0) : (s.ys.push(a.readShort(n, o)), o += 2);\n        }\n        var p = 0,\n          U = 0;\n        for (i = 0; i < f; i++) p += s.xs[i], U += s.ys[i], s.xs[i] = p, s.ys[i] = U;\n      } else {\n        var g;\n        s.parts = [];\n        do {\n          g = a.readUshort(n, o), o += 2;\n          var S = {\n            m: {\n              a: 1,\n              b: 0,\n              c: 0,\n              d: 1,\n              tx: 0,\n              ty: 0\n            },\n            p1: -1,\n            p2: -1\n          };\n          if (s.parts.push(S), S.glyphIndex = a.readUshort(n, o), o += 2, 1 & g) {\n            var m = a.readShort(n, o);\n            o += 2;\n            var b = a.readShort(n, o);\n            o += 2;\n          } else {\n            m = a.readInt8(n, o);\n            o++;\n            b = a.readInt8(n, o);\n            o++;\n          }\n          2 & g ? (S.m.tx = m, S.m.ty = b) : (S.p1 = m, S.p2 = b), 8 & g ? (S.m.a = S.m.d = a.readF2dot14(n, o), o += 2) : 64 & g ? (S.m.a = a.readF2dot14(n, o), o += 2, S.m.d = a.readF2dot14(n, o), o += 2) : 128 & g && (S.m.a = a.readF2dot14(n, o), o += 2, S.m.b = a.readF2dot14(n, o), o += 2, S.m.c = a.readF2dot14(n, o), o += 2, S.m.d = a.readF2dot14(n, o), o += 2);\n        } while (32 & g);\n        if (256 & g) {\n          var y = a.readUshort(n, o);\n          o += 2, s.instr = [];\n          for (i = 0; i < y; i++) s.instr.push(n[o]), o++;\n        }\n      }\n      return s;\n    }, e.GPOS = {}, e.GPOS.parse = function (r, t, a, n) {\n      return e._lctf.parse(r, t, a, n, e.GPOS.subt);\n    }, e.GPOS.subt = function (r, t, a, n) {\n      var o = e._bin,\n        s = a,\n        i = {};\n      if (i.fmt = o.readUshort(r, a), a += 2, 1 == t || 2 == t || 3 == t || 7 == t || 8 == t && i.fmt <= 2) {\n        var h = o.readUshort(r, a);\n        a += 2, i.coverage = e._lctf.readCoverage(r, h + s);\n      }\n      if (1 == t && 1 == i.fmt) {\n        var f = o.readUshort(r, a);\n        a += 2;\n        var d = e._lctf.numOfOnes(f);\n        0 != f && (i.pos = e.GPOS.readValueRecord(r, a, f));\n      } else if (2 == t && i.fmt >= 1 && i.fmt <= 2) {\n        f = o.readUshort(r, a);\n        a += 2;\n        var u = o.readUshort(r, a);\n        a += 2;\n        d = e._lctf.numOfOnes(f);\n        var l = e._lctf.numOfOnes(u);\n        if (1 == i.fmt) {\n          i.pairsets = [];\n          var v = o.readUshort(r, a);\n          a += 2;\n          for (var c = 0; c < v; c++) {\n            var p = s + o.readUshort(r, a);\n            a += 2;\n            var U = o.readUshort(r, p);\n            p += 2;\n            for (var g = [], S = 0; S < U; S++) {\n              var m = o.readUshort(r, p);\n              p += 2, 0 != f && (x = e.GPOS.readValueRecord(r, p, f), p += 2 * d), 0 != u && (P = e.GPOS.readValueRecord(r, p, u), p += 2 * l), g.push({\n                gid2: m,\n                val1: x,\n                val2: P\n              });\n            }\n            i.pairsets.push(g);\n          }\n        }\n        if (2 == i.fmt) {\n          var b = o.readUshort(r, a);\n          a += 2;\n          var y = o.readUshort(r, a);\n          a += 2;\n          var F = o.readUshort(r, a);\n          a += 2;\n          var _ = o.readUshort(r, a);\n          a += 2, i.classDef1 = e._lctf.readClassDef(r, s + b), i.classDef2 = e._lctf.readClassDef(r, s + y), i.matrix = [];\n          for (c = 0; c < F; c++) {\n            var C = [];\n            for (S = 0; S < _; S++) {\n              var x = null,\n                P = null;\n              0 != f && (x = e.GPOS.readValueRecord(r, a, f), a += 2 * d), 0 != u && (P = e.GPOS.readValueRecord(r, a, u), a += 2 * l), C.push({\n                val1: x,\n                val2: P\n              });\n            }\n            i.matrix.push(C);\n          }\n        }\n      } else {\n        if (9 == t && 1 == i.fmt) {\n          var I = o.readUshort(r, a);\n          a += 2;\n          var w = o.readUint(r, a);\n          if (a += 4, 9 == n.ltype) n.ltype = I;else if (n.ltype != I) throw \"invalid extension substitution\";\n          return e.GPOS.subt(r, n.ltype, s + w);\n        }\n        console.debug(\"unsupported GPOS table LookupType\", t, \"format\", i.fmt);\n      }\n      return i;\n    }, e.GPOS.readValueRecord = function (r, t, a) {\n      var n = e._bin,\n        o = [];\n      return o.push(1 & a ? n.readShort(r, t) : 0), t += 1 & a ? 2 : 0, o.push(2 & a ? n.readShort(r, t) : 0), t += 2 & a ? 2 : 0, o.push(4 & a ? n.readShort(r, t) : 0), t += 4 & a ? 2 : 0, o.push(8 & a ? n.readShort(r, t) : 0), t += 8 & a ? 2 : 0, o;\n    }, e.GSUB = {}, e.GSUB.parse = function (r, t, a, n) {\n      return e._lctf.parse(r, t, a, n, e.GSUB.subt);\n    }, e.GSUB.subt = function (r, t, a, n) {\n      var o = e._bin,\n        s = a,\n        i = {};\n      if (i.fmt = o.readUshort(r, a), a += 2, 1 != t && 4 != t && 5 != t && 6 != t) return null;\n      if (1 == t || 4 == t || 5 == t && i.fmt <= 2 || 6 == t && i.fmt <= 2) {\n        var h = o.readUshort(r, a);\n        a += 2, i.coverage = e._lctf.readCoverage(r, s + h);\n      }\n      if (1 == t && i.fmt >= 1 && i.fmt <= 2) {\n        if (1 == i.fmt) i.delta = o.readShort(r, a), a += 2;else if (2 == i.fmt) {\n          var f = o.readUshort(r, a);\n          a += 2, i.newg = o.readUshorts(r, a, f), a += 2 * i.newg.length;\n        }\n      } else if (4 == t) {\n        i.vals = [];\n        f = o.readUshort(r, a);\n        a += 2;\n        for (var d = 0; d < f; d++) {\n          var u = o.readUshort(r, a);\n          a += 2, i.vals.push(e.GSUB.readLigatureSet(r, s + u));\n        }\n      } else if (5 == t && 2 == i.fmt) {\n        if (2 == i.fmt) {\n          var l = o.readUshort(r, a);\n          a += 2, i.cDef = e._lctf.readClassDef(r, s + l), i.scset = [];\n          var v = o.readUshort(r, a);\n          a += 2;\n          for (d = 0; d < v; d++) {\n            var c = o.readUshort(r, a);\n            a += 2, i.scset.push(0 == c ? null : e.GSUB.readSubClassSet(r, s + c));\n          }\n        }\n      } else if (6 == t && 3 == i.fmt) {\n        if (3 == i.fmt) {\n          for (d = 0; d < 3; d++) {\n            f = o.readUshort(r, a);\n            a += 2;\n            for (var p = [], U = 0; U < f; U++) p.push(e._lctf.readCoverage(r, s + o.readUshort(r, a + 2 * U)));\n            a += 2 * f, 0 == d && (i.backCvg = p), 1 == d && (i.inptCvg = p), 2 == d && (i.ahedCvg = p);\n          }\n          f = o.readUshort(r, a);\n          a += 2, i.lookupRec = e.GSUB.readSubstLookupRecords(r, a, f);\n        }\n      } else {\n        if (7 == t && 1 == i.fmt) {\n          var g = o.readUshort(r, a);\n          a += 2;\n          var S = o.readUint(r, a);\n          if (a += 4, 9 == n.ltype) n.ltype = g;else if (n.ltype != g) throw \"invalid extension substitution\";\n          return e.GSUB.subt(r, n.ltype, s + S);\n        }\n        console.debug(\"unsupported GSUB table LookupType\", t, \"format\", i.fmt);\n      }\n      return i;\n    }, e.GSUB.readSubClassSet = function (r, t) {\n      var a = e._bin.readUshort,\n        n = t,\n        o = [],\n        s = a(r, t);\n      t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = a(r, t);\n        t += 2, o.push(e.GSUB.readSubClassRule(r, n + h));\n      }\n      return o;\n    }, e.GSUB.readSubClassRule = function (r, t) {\n      var a = e._bin.readUshort,\n        n = {},\n        o = a(r, t),\n        s = a(r, t += 2);\n      t += 2, n.input = [];\n      for (var i = 0; i < o - 1; i++) n.input.push(a(r, t)), t += 2;\n      return n.substLookupRecords = e.GSUB.readSubstLookupRecords(r, t, s), n;\n    }, e.GSUB.readSubstLookupRecords = function (r, t, a) {\n      for (var n = e._bin.readUshort, o = [], s = 0; s < a; s++) o.push(n(r, t), n(r, t + 2)), t += 4;\n      return o;\n    }, e.GSUB.readChainSubClassSet = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = [],\n        s = a.readUshort(r, t);\n      t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = a.readUshort(r, t);\n        t += 2, o.push(e.GSUB.readChainSubClassRule(r, n + h));\n      }\n      return o;\n    }, e.GSUB.readChainSubClassRule = function (r, t) {\n      for (var a = e._bin, n = {}, o = [\"backtrack\", \"input\", \"lookahead\"], s = 0; s < o.length; s++) {\n        var i = a.readUshort(r, t);\n        t += 2, 1 == s && i--, n[o[s]] = a.readUshorts(r, t, i), t += 2 * n[o[s]].length;\n      }\n      i = a.readUshort(r, t);\n      return t += 2, n.subst = a.readUshorts(r, t, 2 * i), t += 2 * n.subst.length, n;\n    }, e.GSUB.readLigatureSet = function (r, t) {\n      var a = e._bin,\n        n = t,\n        o = [],\n        s = a.readUshort(r, t);\n      t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = a.readUshort(r, t);\n        t += 2, o.push(e.GSUB.readLigature(r, n + h));\n      }\n      return o;\n    }, e.GSUB.readLigature = function (r, t) {\n      var a = e._bin,\n        n = {\n          chain: []\n        };\n      n.nglyph = a.readUshort(r, t), t += 2;\n      var o = a.readUshort(r, t);\n      t += 2;\n      for (var s = 0; s < o - 1; s++) n.chain.push(a.readUshort(r, t)), t += 2;\n      return n;\n    }, e.head = {}, e.head.parse = function (r, t, a) {\n      var n = e._bin,\n        o = {};\n      return n.readFixed(r, t), t += 4, o.fontRevision = n.readFixed(r, t), t += 4, n.readUint(r, t), t += 4, n.readUint(r, t), t += 4, o.flags = n.readUshort(r, t), t += 2, o.unitsPerEm = n.readUshort(r, t), t += 2, o.created = n.readUint64(r, t), t += 8, o.modified = n.readUint64(r, t), t += 8, o.xMin = n.readShort(r, t), t += 2, o.yMin = n.readShort(r, t), t += 2, o.xMax = n.readShort(r, t), t += 2, o.yMax = n.readShort(r, t), t += 2, o.macStyle = n.readUshort(r, t), t += 2, o.lowestRecPPEM = n.readUshort(r, t), t += 2, o.fontDirectionHint = n.readShort(r, t), t += 2, o.indexToLocFormat = n.readShort(r, t), t += 2, o.glyphDataFormat = n.readShort(r, t), t += 2, o;\n    }, e.hhea = {}, e.hhea.parse = function (r, t, a) {\n      var n = e._bin,\n        o = {};\n      return n.readFixed(r, t), t += 4, o.ascender = n.readShort(r, t), t += 2, o.descender = n.readShort(r, t), t += 2, o.lineGap = n.readShort(r, t), t += 2, o.advanceWidthMax = n.readUshort(r, t), t += 2, o.minLeftSideBearing = n.readShort(r, t), t += 2, o.minRightSideBearing = n.readShort(r, t), t += 2, o.xMaxExtent = n.readShort(r, t), t += 2, o.caretSlopeRise = n.readShort(r, t), t += 2, o.caretSlopeRun = n.readShort(r, t), t += 2, o.caretOffset = n.readShort(r, t), t += 2, t += 8, o.metricDataFormat = n.readShort(r, t), t += 2, o.numberOfHMetrics = n.readUshort(r, t), t += 2, o;\n    }, e.hmtx = {}, e.hmtx.parse = function (r, t, a, n) {\n      for (var o = e._bin, s = {\n          aWidth: [],\n          lsBearing: []\n        }, i = 0, h = 0, f = 0; f < n.maxp.numGlyphs; f++) f < n.hhea.numberOfHMetrics && (i = o.readUshort(r, t), t += 2, h = o.readShort(r, t), t += 2), s.aWidth.push(i), s.lsBearing.push(h);\n      return s;\n    }, e.kern = {}, e.kern.parse = function (r, t, a, n) {\n      var o = e._bin,\n        s = o.readUshort(r, t);\n      if (t += 2, 1 == s) return e.kern.parseV1(r, t - 2, a, n);\n      var i = o.readUshort(r, t);\n      t += 2;\n      for (var h = {\n          glyph1: [],\n          rval: []\n        }, f = 0; f < i; f++) {\n        t += 2;\n        a = o.readUshort(r, t);\n        t += 2;\n        var d = o.readUshort(r, t);\n        t += 2;\n        var u = d >>> 8;\n        if (0 != (u &= 15)) throw \"unknown kern table format: \" + u;\n        t = e.kern.readFormat0(r, t, h);\n      }\n      return h;\n    }, e.kern.parseV1 = function (r, t, a, n) {\n      var o = e._bin;\n      o.readFixed(r, t), t += 4;\n      var s = o.readUint(r, t);\n      t += 4;\n      for (var i = {\n          glyph1: [],\n          rval: []\n        }, h = 0; h < s; h++) {\n        o.readUint(r, t), t += 4;\n        var f = o.readUshort(r, t);\n        t += 2, o.readUshort(r, t), t += 2;\n        var d = f >>> 8;\n        if (0 != (d &= 15)) throw \"unknown kern table format: \" + d;\n        t = e.kern.readFormat0(r, t, i);\n      }\n      return i;\n    }, e.kern.readFormat0 = function (r, t, a) {\n      var n = e._bin,\n        o = -1,\n        s = n.readUshort(r, t);\n      t += 2, n.readUshort(r, t), t += 2, n.readUshort(r, t), t += 2, n.readUshort(r, t), t += 2;\n      for (var i = 0; i < s; i++) {\n        var h = n.readUshort(r, t);\n        t += 2;\n        var f = n.readUshort(r, t);\n        t += 2;\n        var d = n.readShort(r, t);\n        t += 2, h != o && (a.glyph1.push(h), a.rval.push({\n          glyph2: [],\n          vals: []\n        }));\n        var u = a.rval[a.rval.length - 1];\n        u.glyph2.push(f), u.vals.push(d), o = h;\n      }\n      return t;\n    }, e.loca = {}, e.loca.parse = function (r, t, a, n) {\n      var o = e._bin,\n        s = [],\n        i = n.head.indexToLocFormat,\n        h = n.maxp.numGlyphs + 1;\n      if (0 == i) for (var f = 0; f < h; f++) s.push(o.readUshort(r, t + (f << 1)) << 1);\n      if (1 == i) for (f = 0; f < h; f++) s.push(o.readUint(r, t + (f << 2)));\n      return s;\n    }, e.maxp = {}, e.maxp.parse = function (r, t, a) {\n      var n = e._bin,\n        o = {},\n        s = n.readUint(r, t);\n      return t += 4, o.numGlyphs = n.readUshort(r, t), t += 2, 65536 == s && (o.maxPoints = n.readUshort(r, t), t += 2, o.maxContours = n.readUshort(r, t), t += 2, o.maxCompositePoints = n.readUshort(r, t), t += 2, o.maxCompositeContours = n.readUshort(r, t), t += 2, o.maxZones = n.readUshort(r, t), t += 2, o.maxTwilightPoints = n.readUshort(r, t), t += 2, o.maxStorage = n.readUshort(r, t), t += 2, o.maxFunctionDefs = n.readUshort(r, t), t += 2, o.maxInstructionDefs = n.readUshort(r, t), t += 2, o.maxStackElements = n.readUshort(r, t), t += 2, o.maxSizeOfInstructions = n.readUshort(r, t), t += 2, o.maxComponentElements = n.readUshort(r, t), t += 2, o.maxComponentDepth = n.readUshort(r, t), t += 2), o;\n    }, e.name = {}, e.name.parse = function (r, t, a) {\n      var n = e._bin,\n        o = {};\n      n.readUshort(r, t), t += 2;\n      var s = n.readUshort(r, t);\n      t += 2, n.readUshort(r, t);\n      for (var i, h = [\"copyright\", \"fontFamily\", \"fontSubfamily\", \"ID\", \"fullName\", \"version\", \"postScriptName\", \"trademark\", \"manufacturer\", \"designer\", \"description\", \"urlVendor\", \"urlDesigner\", \"licence\", \"licenceURL\", \"---\", \"typoFamilyName\", \"typoSubfamilyName\", \"compatibleFull\", \"sampleText\", \"postScriptCID\", \"wwsFamilyName\", \"wwsSubfamilyName\", \"lightPalette\", \"darkPalette\"], f = t += 2, d = 0; d < s; d++) {\n        var u = n.readUshort(r, t);\n        t += 2;\n        var l = n.readUshort(r, t);\n        t += 2;\n        var v = n.readUshort(r, t);\n        t += 2;\n        var c = n.readUshort(r, t);\n        t += 2;\n        var p = n.readUshort(r, t);\n        t += 2;\n        var U = n.readUshort(r, t);\n        t += 2;\n        var g,\n          S = h[c],\n          m = f + 12 * s + U;\n        if (0 == u) g = n.readUnicode(r, m, p / 2);else if (3 == u && 0 == l) g = n.readUnicode(r, m, p / 2);else if (0 == l) g = n.readASCII(r, m, p);else if (1 == l) g = n.readUnicode(r, m, p / 2);else if (3 == l) g = n.readUnicode(r, m, p / 2);else {\n          if (1 != u) throw \"unknown encoding \" + l + \", platformID: \" + u;\n          g = n.readASCII(r, m, p), console.debug(\"reading unknown MAC encoding \" + l + \" as ASCII\");\n        }\n        var b = \"p\" + u + \",\" + v.toString(16);\n        null == o[b] && (o[b] = {}), o[b][void 0 !== S ? S : c] = g, o[b]._lang = v;\n      }\n      for (var y in o) if (null != o[y].postScriptName && 1033 == o[y]._lang) return o[y];\n      for (var y in o) if (null != o[y].postScriptName && 0 == o[y]._lang) return o[y];\n      for (var y in o) if (null != o[y].postScriptName && 3084 == o[y]._lang) return o[y];\n      for (var y in o) if (null != o[y].postScriptName) return o[y];\n      for (var y in o) {\n        i = y;\n        break;\n      }\n      return console.debug(\"returning name table with languageID \" + o[i]._lang), o[i];\n    }, e[\"OS/2\"] = {}, e[\"OS/2\"].parse = function (r, t, a) {\n      var n = e._bin.readUshort(r, t);\n      t += 2;\n      var o = {};\n      if (0 == n) e[\"OS/2\"].version0(r, t, o);else if (1 == n) e[\"OS/2\"].version1(r, t, o);else if (2 == n || 3 == n || 4 == n) e[\"OS/2\"].version2(r, t, o);else {\n        if (5 != n) throw \"unknown OS/2 table version: \" + n;\n        e[\"OS/2\"].version5(r, t, o);\n      }\n      return o;\n    }, e[\"OS/2\"].version0 = function (r, t, a) {\n      var n = e._bin;\n      return a.xAvgCharWidth = n.readShort(r, t), t += 2, a.usWeightClass = n.readUshort(r, t), t += 2, a.usWidthClass = n.readUshort(r, t), t += 2, a.fsType = n.readUshort(r, t), t += 2, a.ySubscriptXSize = n.readShort(r, t), t += 2, a.ySubscriptYSize = n.readShort(r, t), t += 2, a.ySubscriptXOffset = n.readShort(r, t), t += 2, a.ySubscriptYOffset = n.readShort(r, t), t += 2, a.ySuperscriptXSize = n.readShort(r, t), t += 2, a.ySuperscriptYSize = n.readShort(r, t), t += 2, a.ySuperscriptXOffset = n.readShort(r, t), t += 2, a.ySuperscriptYOffset = n.readShort(r, t), t += 2, a.yStrikeoutSize = n.readShort(r, t), t += 2, a.yStrikeoutPosition = n.readShort(r, t), t += 2, a.sFamilyClass = n.readShort(r, t), t += 2, a.panose = n.readBytes(r, t, 10), t += 10, a.ulUnicodeRange1 = n.readUint(r, t), t += 4, a.ulUnicodeRange2 = n.readUint(r, t), t += 4, a.ulUnicodeRange3 = n.readUint(r, t), t += 4, a.ulUnicodeRange4 = n.readUint(r, t), t += 4, a.achVendID = [n.readInt8(r, t), n.readInt8(r, t + 1), n.readInt8(r, t + 2), n.readInt8(r, t + 3)], t += 4, a.fsSelection = n.readUshort(r, t), t += 2, a.usFirstCharIndex = n.readUshort(r, t), t += 2, a.usLastCharIndex = n.readUshort(r, t), t += 2, a.sTypoAscender = n.readShort(r, t), t += 2, a.sTypoDescender = n.readShort(r, t), t += 2, a.sTypoLineGap = n.readShort(r, t), t += 2, a.usWinAscent = n.readUshort(r, t), t += 2, a.usWinDescent = n.readUshort(r, t), t += 2;\n    }, e[\"OS/2\"].version1 = function (r, t, a) {\n      var n = e._bin;\n      return t = e[\"OS/2\"].version0(r, t, a), a.ulCodePageRange1 = n.readUint(r, t), t += 4, a.ulCodePageRange2 = n.readUint(r, t), t += 4;\n    }, e[\"OS/2\"].version2 = function (r, t, a) {\n      var n = e._bin;\n      return t = e[\"OS/2\"].version1(r, t, a), a.sxHeight = n.readShort(r, t), t += 2, a.sCapHeight = n.readShort(r, t), t += 2, a.usDefault = n.readUshort(r, t), t += 2, a.usBreak = n.readUshort(r, t), t += 2, a.usMaxContext = n.readUshort(r, t), t += 2;\n    }, e[\"OS/2\"].version5 = function (r, t, a) {\n      var n = e._bin;\n      return t = e[\"OS/2\"].version2(r, t, a), a.usLowerOpticalPointSize = n.readUshort(r, t), t += 2, a.usUpperOpticalPointSize = n.readUshort(r, t), t += 2;\n    }, e.post = {}, e.post.parse = function (r, t, a) {\n      var n = e._bin,\n        o = {};\n      return o.version = n.readFixed(r, t), t += 4, o.italicAngle = n.readFixed(r, t), t += 4, o.underlinePosition = n.readShort(r, t), t += 2, o.underlineThickness = n.readShort(r, t), t += 2, o;\n    }, null == e && (e = {}), null == e.U && (e.U = {}), e.U.codeToGlyph = function (r, e) {\n      var t = r.cmap,\n        a = -1;\n      if (null != t.p0e4 ? a = t.p0e4 : null != t.p3e1 ? a = t.p3e1 : null != t.p1e0 ? a = t.p1e0 : null != t.p0e3 && (a = t.p0e3), -1 == a) throw \"no familiar platform and encoding!\";\n      var n = t.tables[a];\n      if (0 == n.format) return e >= n.map.length ? 0 : n.map[e];\n      if (4 == n.format) {\n        for (var o = -1, s = 0; s < n.endCount.length; s++) if (e <= n.endCount[s]) {\n          o = s;\n          break;\n        }\n        if (-1 == o) return 0;\n        if (n.startCount[o] > e) return 0;\n        return 65535 & (0 != n.idRangeOffset[o] ? n.glyphIdArray[e - n.startCount[o] + (n.idRangeOffset[o] >> 1) - (n.idRangeOffset.length - o)] : e + n.idDelta[o]);\n      }\n      if (12 == n.format) {\n        if (e > n.groups[n.groups.length - 1][1]) return 0;\n        for (s = 0; s < n.groups.length; s++) {\n          var i = n.groups[s];\n          if (i[0] <= e && e <= i[1]) return i[2] + (e - i[0]);\n        }\n        return 0;\n      }\n      throw \"unknown cmap table format \" + n.format;\n    }, e.U.glyphToPath = function (r, t) {\n      var a = {\n        cmds: [],\n        crds: []\n      };\n      if (r.SVG && r.SVG.entries[t]) {\n        var n = r.SVG.entries[t];\n        return null == n ? a : (\"string\" == typeof n && (n = e.SVG.toPath(n), r.SVG.entries[t] = n), n);\n      }\n      if (r.CFF) {\n        var o = {\n            x: 0,\n            y: 0,\n            stack: [],\n            nStems: 0,\n            haveWidth: !1,\n            width: r.CFF.Private ? r.CFF.Private.defaultWidthX : 0,\n            open: !1\n          },\n          s = r.CFF,\n          i = r.CFF.Private;\n        if (s.ROS) {\n          for (var h = 0; s.FDSelect[h + 2] <= t;) h += 2;\n          i = s.FDArray[s.FDSelect[h + 1]].Private;\n        }\n        e.U._drawCFF(r.CFF.CharStrings[t], o, s, i, a);\n      } else r.glyf && e.U._drawGlyf(t, r, a);\n      return a;\n    }, e.U._drawGlyf = function (r, t, a) {\n      var n = t.glyf[r];\n      null == n && (n = t.glyf[r] = e.glyf._parseGlyf(t, r)), null != n && (n.noc > -1 ? e.U._simpleGlyph(n, a) : e.U._compoGlyph(n, t, a));\n    }, e.U._simpleGlyph = function (r, t) {\n      for (var a = 0; a < r.noc; a++) {\n        for (var n = 0 == a ? 0 : r.endPts[a - 1] + 1, o = r.endPts[a], s = n; s <= o; s++) {\n          var i = s == n ? o : s - 1,\n            h = s == o ? n : s + 1,\n            f = 1 & r.flags[s],\n            d = 1 & r.flags[i],\n            u = 1 & r.flags[h],\n            l = r.xs[s],\n            v = r.ys[s];\n          if (s == n) if (f) {\n            if (!d) {\n              e.U.P.moveTo(t, l, v);\n              continue;\n            }\n            e.U.P.moveTo(t, r.xs[i], r.ys[i]);\n          } else d ? e.U.P.moveTo(t, r.xs[i], r.ys[i]) : e.U.P.moveTo(t, (r.xs[i] + l) / 2, (r.ys[i] + v) / 2);\n          f ? d && e.U.P.lineTo(t, l, v) : u ? e.U.P.qcurveTo(t, l, v, r.xs[h], r.ys[h]) : e.U.P.qcurveTo(t, l, v, (l + r.xs[h]) / 2, (v + r.ys[h]) / 2);\n        }\n        e.U.P.closePath(t);\n      }\n    }, e.U._compoGlyph = function (r, t, a) {\n      for (var n = 0; n < r.parts.length; n++) {\n        var o = {\n            cmds: [],\n            crds: []\n          },\n          s = r.parts[n];\n        e.U._drawGlyf(s.glyphIndex, t, o);\n        for (var i = s.m, h = 0; h < o.crds.length; h += 2) {\n          var f = o.crds[h],\n            d = o.crds[h + 1];\n          a.crds.push(f * i.a + d * i.b + i.tx), a.crds.push(f * i.c + d * i.d + i.ty);\n        }\n        for (h = 0; h < o.cmds.length; h++) a.cmds.push(o.cmds[h]);\n      }\n    }, e.U._getGlyphClass = function (r, t) {\n      var a = e._lctf.getInterval(t, r);\n      return -1 == a ? 0 : t[a + 2];\n    }, e.U.getPairAdjustment = function (r, t, a) {\n      var n = !1;\n      if (r.GPOS) for (var o = r.GPOS, s = o.lookupList, i = o.featureList, h = [], f = 0; f < i.length; f++) {\n        var d = i[f];\n        if (\"kern\" == d.tag) {\n          n = !0;\n          for (var u = 0; u < d.tab.length; u++) if (!h[d.tab[u]]) {\n            h[d.tab[u]] = !0;\n            for (var l = s[d.tab[u]], v = 0; v < l.tabs.length; v++) if (null != l.tabs[v]) {\n              var c,\n                p = l.tabs[v];\n              if (!p.coverage || -1 != (c = e._lctf.coverageIndex(p.coverage, t))) if (1 == l.ltype) ;else if (2 == l.ltype) {\n                var U = null;\n                if (1 == p.fmt) {\n                  var g = p.pairsets[c];\n                  for (f = 0; f < g.length; f++) g[f].gid2 == a && (U = g[f]);\n                } else if (2 == p.fmt) {\n                  var S = e.U._getGlyphClass(t, p.classDef1),\n                    m = e.U._getGlyphClass(a, p.classDef2);\n                  U = p.matrix[S][m];\n                }\n                if (U) {\n                  var b = 0;\n                  return U.val1 && U.val1[2] && (b += U.val1[2]), U.val2 && U.val2[0] && (b += U.val2[0]), b;\n                }\n              }\n            }\n          }\n        }\n      }\n      if (r.kern && !n) {\n        var y = r.kern.glyph1.indexOf(t);\n        if (-1 != y) {\n          var F = r.kern.rval[y].glyph2.indexOf(a);\n          if (-1 != F) return r.kern.rval[y].vals[F];\n        }\n      }\n      return 0;\n    }, e.U._applySubs = function (r, t, a, n) {\n      for (var o = r.length - t - 1, s = 0; s < a.tabs.length; s++) if (null != a.tabs[s]) {\n        var i,\n          h = a.tabs[s];\n        if (!h.coverage || -1 != (i = e._lctf.coverageIndex(h.coverage, r[t]))) if (1 == a.ltype) r[t], 1 == h.fmt ? r[t] = r[t] + h.delta : r[t] = h.newg[i];else if (4 == a.ltype) for (var f = h.vals[i], d = 0; d < f.length; d++) {\n          var u = f[d],\n            l = u.chain.length;\n          if (!(l > o)) {\n            for (var v = !0, c = 0, p = 0; p < l; p++) {\n              for (; -1 == r[t + c + (1 + p)];) c++;\n              u.chain[p] != r[t + c + (1 + p)] && (v = !1);\n            }\n            if (v) {\n              r[t] = u.nglyph;\n              for (p = 0; p < l + c; p++) r[t + p + 1] = -1;\n              break;\n            }\n          }\n        } else if (5 == a.ltype && 2 == h.fmt) for (var U = e._lctf.getInterval(h.cDef, r[t]), g = h.cDef[U + 2], S = h.scset[g], m = 0; m < S.length; m++) {\n          var b = S[m],\n            y = b.input;\n          if (!(y.length > o)) {\n            for (v = !0, p = 0; p < y.length; p++) {\n              var F = e._lctf.getInterval(h.cDef, r[t + 1 + p]);\n              if (-1 == U && h.cDef[F + 2] != y[p]) {\n                v = !1;\n                break;\n              }\n            }\n            if (v) {\n              var _ = b.substLookupRecords;\n              for (d = 0; d < _.length; d += 2) _[d], _[d + 1];\n            }\n          }\n        } else if (6 == a.ltype && 3 == h.fmt) {\n          if (!e.U._glsCovered(r, h.backCvg, t - h.backCvg.length)) continue;\n          if (!e.U._glsCovered(r, h.inptCvg, t)) continue;\n          if (!e.U._glsCovered(r, h.ahedCvg, t + h.inptCvg.length)) continue;\n          var C = h.lookupRec;\n          for (m = 0; m < C.length; m += 2) {\n            U = C[m];\n            var x = n[C[m + 1]];\n            e.U._applySubs(r, t + U, x, n);\n          }\n        }\n      }\n    }, e.U._glsCovered = function (r, t, a) {\n      for (var n = 0; n < t.length; n++) {\n        if (-1 == e._lctf.coverageIndex(t[n], r[a + n])) return !1;\n      }\n      return !0;\n    }, e.U.glyphsToPath = function (r, t, a) {\n      for (var n = {\n          cmds: [],\n          crds: []\n        }, o = 0, s = 0; s < t.length; s++) {\n        var i = t[s];\n        if (-1 != i) {\n          for (var h = s < t.length - 1 && -1 != t[s + 1] ? t[s + 1] : 0, f = e.U.glyphToPath(r, i), d = 0; d < f.crds.length; d += 2) n.crds.push(f.crds[d] + o), n.crds.push(f.crds[d + 1]);\n          a && n.cmds.push(a);\n          for (d = 0; d < f.cmds.length; d++) n.cmds.push(f.cmds[d]);\n          a && n.cmds.push(\"X\"), o += r.hmtx.aWidth[i], s < t.length - 1 && (o += e.U.getPairAdjustment(r, i, h));\n        }\n      }\n      return n;\n    }, e.U.P = {}, e.U.P.moveTo = function (r, e, t) {\n      r.cmds.push(\"M\"), r.crds.push(e, t);\n    }, e.U.P.lineTo = function (r, e, t) {\n      r.cmds.push(\"L\"), r.crds.push(e, t);\n    }, e.U.P.curveTo = function (r, e, t, a, n, o, s) {\n      r.cmds.push(\"C\"), r.crds.push(e, t, a, n, o, s);\n    }, e.U.P.qcurveTo = function (r, e, t, a, n) {\n      r.cmds.push(\"Q\"), r.crds.push(e, t, a, n);\n    }, e.U.P.closePath = function (r) {\n      r.cmds.push(\"Z\");\n    }, e.U._drawCFF = function (r, t, a, n, o) {\n      for (var s = t.stack, i = t.nStems, h = t.haveWidth, f = t.width, d = t.open, u = 0, l = t.x, v = t.y, c = 0, p = 0, U = 0, g = 0, S = 0, m = 0, b = 0, y = 0, F = 0, _ = 0, C = {\n          val: 0,\n          size: 0\n        }; u < r.length;) {\n        e.CFF.getCharString(r, u, C);\n        var x = C.val;\n        if (u += C.size, \"o1\" == x || \"o18\" == x) s.length % 2 != 0 && !h && (f = s.shift() + n.nominalWidthX), i += s.length >> 1, s.length = 0, h = !0;else if (\"o3\" == x || \"o23\" == x) {\n          s.length % 2 != 0 && !h && (f = s.shift() + n.nominalWidthX), i += s.length >> 1, s.length = 0, h = !0;\n        } else if (\"o4\" == x) s.length > 1 && !h && (f = s.shift() + n.nominalWidthX, h = !0), d && e.U.P.closePath(o), v += s.pop(), e.U.P.moveTo(o, l, v), d = !0;else if (\"o5\" == x) for (; s.length > 0;) l += s.shift(), v += s.shift(), e.U.P.lineTo(o, l, v);else if (\"o6\" == x || \"o7\" == x) for (var P = s.length, I = \"o6\" == x, w = 0; w < P; w++) {\n          var O = s.shift();\n          I ? l += O : v += O, I = !I, e.U.P.lineTo(o, l, v);\n        } else if (\"o8\" == x || \"o24\" == x) {\n          P = s.length;\n          for (var T = 0; T + 6 <= P;) c = l + s.shift(), p = v + s.shift(), U = c + s.shift(), g = p + s.shift(), l = U + s.shift(), v = g + s.shift(), e.U.P.curveTo(o, c, p, U, g, l, v), T += 6;\n          \"o24\" == x && (l += s.shift(), v += s.shift(), e.U.P.lineTo(o, l, v));\n        } else {\n          if (\"o11\" == x) break;\n          if (\"o1234\" == x || \"o1235\" == x || \"o1236\" == x || \"o1237\" == x) \"o1234\" == x && (p = v, U = (c = l + s.shift()) + s.shift(), _ = g = p + s.shift(), m = g, y = v, l = (b = (S = (F = U + s.shift()) + s.shift()) + s.shift()) + s.shift(), e.U.P.curveTo(o, c, p, U, g, F, _), e.U.P.curveTo(o, S, m, b, y, l, v)), \"o1235\" == x && (c = l + s.shift(), p = v + s.shift(), U = c + s.shift(), g = p + s.shift(), F = U + s.shift(), _ = g + s.shift(), S = F + s.shift(), m = _ + s.shift(), b = S + s.shift(), y = m + s.shift(), l = b + s.shift(), v = y + s.shift(), s.shift(), e.U.P.curveTo(o, c, p, U, g, F, _), e.U.P.curveTo(o, S, m, b, y, l, v)), \"o1236\" == x && (c = l + s.shift(), p = v + s.shift(), U = c + s.shift(), _ = g = p + s.shift(), m = g, b = (S = (F = U + s.shift()) + s.shift()) + s.shift(), y = m + s.shift(), l = b + s.shift(), e.U.P.curveTo(o, c, p, U, g, F, _), e.U.P.curveTo(o, S, m, b, y, l, v)), \"o1237\" == x && (c = l + s.shift(), p = v + s.shift(), U = c + s.shift(), g = p + s.shift(), F = U + s.shift(), _ = g + s.shift(), S = F + s.shift(), m = _ + s.shift(), b = S + s.shift(), y = m + s.shift(), Math.abs(b - l) > Math.abs(y - v) ? l = b + s.shift() : v = y + s.shift(), e.U.P.curveTo(o, c, p, U, g, F, _), e.U.P.curveTo(o, S, m, b, y, l, v));else if (\"o14\" == x) {\n            if (s.length > 0 && !h && (f = s.shift() + a.nominalWidthX, h = !0), 4 == s.length) {\n              var k = s.shift(),\n                G = s.shift(),\n                D = s.shift(),\n                B = s.shift(),\n                L = e.CFF.glyphBySE(a, D),\n                R = e.CFF.glyphBySE(a, B);\n              e.U._drawCFF(a.CharStrings[L], t, a, n, o), t.x = k, t.y = G, e.U._drawCFF(a.CharStrings[R], t, a, n, o);\n            }\n            d && (e.U.P.closePath(o), d = !1);\n          } else if (\"o19\" == x || \"o20\" == x) {\n            s.length % 2 != 0 && !h && (f = s.shift() + n.nominalWidthX), i += s.length >> 1, s.length = 0, h = !0, u += i + 7 >> 3;\n          } else if (\"o21\" == x) s.length > 2 && !h && (f = s.shift() + n.nominalWidthX, h = !0), v += s.pop(), l += s.pop(), d && e.U.P.closePath(o), e.U.P.moveTo(o, l, v), d = !0;else if (\"o22\" == x) s.length > 1 && !h && (f = s.shift() + n.nominalWidthX, h = !0), l += s.pop(), d && e.U.P.closePath(o), e.U.P.moveTo(o, l, v), d = !0;else if (\"o25\" == x) {\n            for (; s.length > 6;) l += s.shift(), v += s.shift(), e.U.P.lineTo(o, l, v);\n            c = l + s.shift(), p = v + s.shift(), U = c + s.shift(), g = p + s.shift(), l = U + s.shift(), v = g + s.shift(), e.U.P.curveTo(o, c, p, U, g, l, v);\n          } else if (\"o26\" == x) for (s.length % 2 && (l += s.shift()); s.length > 0;) c = l, p = v + s.shift(), l = U = c + s.shift(), v = (g = p + s.shift()) + s.shift(), e.U.P.curveTo(o, c, p, U, g, l, v);else if (\"o27\" == x) for (s.length % 2 && (v += s.shift()); s.length > 0;) p = v, U = (c = l + s.shift()) + s.shift(), g = p + s.shift(), l = U + s.shift(), v = g, e.U.P.curveTo(o, c, p, U, g, l, v);else if (\"o10\" == x || \"o29\" == x) {\n            var A = \"o10\" == x ? n : a;\n            if (0 == s.length) console.debug(\"error: empty stack\");else {\n              var W = s.pop(),\n                M = A.Subrs[W + A.Bias];\n              t.x = l, t.y = v, t.nStems = i, t.haveWidth = h, t.width = f, t.open = d, e.U._drawCFF(M, t, a, n, o), l = t.x, v = t.y, i = t.nStems, h = t.haveWidth, f = t.width, d = t.open;\n            }\n          } else if (\"o30\" == x || \"o31\" == x) {\n            var V = s.length,\n              N = (T = 0, \"o31\" == x);\n            for (T += V - (P = -3 & V); T < P;) N ? (p = v, U = (c = l + s.shift()) + s.shift(), v = (g = p + s.shift()) + s.shift(), P - T == 5 ? (l = U + s.shift(), T++) : l = U, N = !1) : (c = l, p = v + s.shift(), U = c + s.shift(), g = p + s.shift(), l = U + s.shift(), P - T == 5 ? (v = g + s.shift(), T++) : v = g, N = !0), e.U.P.curveTo(o, c, p, U, g, l, v), T += 4;\n          } else {\n            if (\"o\" == (x + \"\").charAt(0)) throw console.debug(\"Unknown operation: \" + x, r), x;\n            s.push(x);\n          }\n        }\n      }\n      t.x = l, t.y = v, t.nStems = i, t.haveWidth = h, t.width = f, t.open = d;\n    };\n    var t = e,\n      a = {\n        Typr: t\n      };\n    return r.Typr = t, r.default = a, Object.defineProperty(r, \"__esModule\", {\n      value: !0\n    }), r;\n  }({}).Typr;\n}\n\n/*!\nCustom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate\n(https://github.com/101arrowz/fflate) for use in Troika text rendering. \nOriginal licenses apply: \n- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)\n- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)\n*/\nfunction woff2otfFactory() {\n  return function (r) {\n    var e = Uint8Array,\n      n = Uint16Array,\n      t = Uint32Array,\n      a = new e([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]),\n      i = new e([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]),\n      o = new e([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),\n      f = function f(r, e) {\n        for (var a = new n(31), i = 0; i < 31; ++i) a[i] = e += 1 << r[i - 1];\n        var o = new t(a[30]);\n        for (i = 1; i < 30; ++i) for (var f = a[i]; f < a[i + 1]; ++f) o[f] = f - a[i] << 5 | i;\n        return [a, o];\n      },\n      u = f(a, 2),\n      v = u[0],\n      s = u[1];\n    v[28] = 258, s[258] = 28;\n    for (var l = f(i, 0)[0], c = new n(32768), g = 0; g < 32768; ++g) {\n      var h = (43690 & g) >>> 1 | (21845 & g) << 1;\n      h = (61680 & (h = (52428 & h) >>> 2 | (13107 & h) << 2)) >>> 4 | (3855 & h) << 4, c[g] = ((65280 & h) >>> 8 | (255 & h) << 8) >>> 1;\n    }\n    var w = function w(r, e, t) {\n        for (var a = r.length, i = 0, o = new n(e); i < a; ++i) ++o[r[i] - 1];\n        var f,\n          u = new n(e);\n        for (i = 0; i < e; ++i) u[i] = u[i - 1] + o[i - 1] << 1;\n        if (t) {\n          f = new n(1 << e);\n          var v = 15 - e;\n          for (i = 0; i < a; ++i) if (r[i]) for (var s = i << 4 | r[i], l = e - r[i], g = u[r[i] - 1]++ << l, h = g | (1 << l) - 1; g <= h; ++g) f[c[g] >>> v] = s;\n        } else for (f = new n(a), i = 0; i < a; ++i) r[i] && (f[i] = c[u[r[i] - 1]++] >>> 15 - r[i]);\n        return f;\n      },\n      d = new e(288);\n    for (g = 0; g < 144; ++g) d[g] = 8;\n    for (g = 144; g < 256; ++g) d[g] = 9;\n    for (g = 256; g < 280; ++g) d[g] = 7;\n    for (g = 280; g < 288; ++g) d[g] = 8;\n    var m = new e(32);\n    for (g = 0; g < 32; ++g) m[g] = 5;\n    var b = w(d, 9, 1),\n      p = w(m, 5, 1),\n      y = function y(r) {\n        for (var e = r[0], n = 1; n < r.length; ++n) r[n] > e && (e = r[n]);\n        return e;\n      },\n      L = function L(r, e, n) {\n        var t = e / 8 | 0;\n        return (r[t] | r[t + 1] << 8) >> (7 & e) & n;\n      },\n      U = function U(r, e) {\n        var n = e / 8 | 0;\n        return (r[n] | r[n + 1] << 8 | r[n + 2] << 16) >> (7 & e);\n      },\n      k = [\"unexpected EOF\", \"invalid block type\", \"invalid length/literal\", \"invalid distance\", \"stream finished\", \"no stream handler\",, \"no callback\", \"invalid UTF-8 data\", \"extra field too long\", \"date not in range 1980-2099\", \"filename too long\", \"stream finishing\", \"invalid zip data\"],\n      T = function T(r, e, n) {\n        var t = new Error(e || k[r]);\n        if (t.code = r, Error.captureStackTrace && Error.captureStackTrace(t, T), !n) throw t;\n        return t;\n      },\n      O = function O(r, f, u) {\n        var s = r.length;\n        if (!s || u && !u.l && s < 5) return f || new e(0);\n        var c = !f || u,\n          g = !u || u.i;\n        u || (u = {}), f || (f = new e(3 * s));\n        var h,\n          d = function d(r) {\n            var n = f.length;\n            if (r > n) {\n              var t = new e(Math.max(2 * n, r));\n              t.set(f), f = t;\n            }\n          },\n          m = u.f || 0,\n          k = u.p || 0,\n          O = u.b || 0,\n          A = u.l,\n          x = u.d,\n          E = u.m,\n          D = u.n,\n          M = 8 * s;\n        do {\n          if (!A) {\n            u.f = m = L(r, k, 1);\n            var S = L(r, k + 1, 3);\n            if (k += 3, !S) {\n              var V = r[(I = ((h = k) / 8 | 0) + (7 & h && 1) + 4) - 4] | r[I - 3] << 8,\n                _ = I + V;\n              if (_ > s) {\n                g && T(0);\n                break;\n              }\n              c && d(O + V), f.set(r.subarray(I, _), O), u.b = O += V, u.p = k = 8 * _;\n              continue;\n            }\n            if (1 == S) A = b, x = p, E = 9, D = 5;else if (2 == S) {\n              var j = L(r, k, 31) + 257,\n                z = L(r, k + 10, 15) + 4,\n                C = j + L(r, k + 5, 31) + 1;\n              k += 14;\n              for (var F = new e(C), P = new e(19), q = 0; q < z; ++q) P[o[q]] = L(r, k + 3 * q, 7);\n              k += 3 * z;\n              var B = y(P),\n                G = (1 << B) - 1,\n                H = w(P, B, 1);\n              for (q = 0; q < C;) {\n                var I,\n                  J = H[L(r, k, G)];\n                if (k += 15 & J, (I = J >>> 4) < 16) F[q++] = I;else {\n                  var K = 0,\n                    N = 0;\n                  for (16 == I ? (N = 3 + L(r, k, 3), k += 2, K = F[q - 1]) : 17 == I ? (N = 3 + L(r, k, 7), k += 3) : 18 == I && (N = 11 + L(r, k, 127), k += 7); N--;) F[q++] = K;\n                }\n              }\n              var Q = F.subarray(0, j),\n                R = F.subarray(j);\n              E = y(Q), D = y(R), A = w(Q, E, 1), x = w(R, D, 1);\n            } else T(1);\n            if (k > M) {\n              g && T(0);\n              break;\n            }\n          }\n          c && d(O + 131072);\n          for (var W = (1 << E) - 1, X = (1 << D) - 1, Y = k;; Y = k) {\n            var Z = (K = A[U(r, k) & W]) >>> 4;\n            if ((k += 15 & K) > M) {\n              g && T(0);\n              break;\n            }\n            if (K || T(2), Z < 256) f[O++] = Z;else {\n              if (256 == Z) {\n                Y = k, A = null;\n                break;\n              }\n              var $ = Z - 254;\n              if (Z > 264) {\n                var rr = a[q = Z - 257];\n                $ = L(r, k, (1 << rr) - 1) + v[q], k += rr;\n              }\n              var er = x[U(r, k) & X],\n                nr = er >>> 4;\n              er || T(3), k += 15 & er;\n              R = l[nr];\n              if (nr > 3) {\n                rr = i[nr];\n                R += U(r, k) & (1 << rr) - 1, k += rr;\n              }\n              if (k > M) {\n                g && T(0);\n                break;\n              }\n              c && d(O + 131072);\n              for (var tr = O + $; O < tr; O += 4) f[O] = f[O - R], f[O + 1] = f[O + 1 - R], f[O + 2] = f[O + 2 - R], f[O + 3] = f[O + 3 - R];\n              O = tr;\n            }\n          }\n          u.l = A, u.p = Y, u.b = O, A && (m = 1, u.m = E, u.d = x, u.n = D);\n        } while (!m);\n        return O == f.length ? f : function (r, a, i) {\n          (null == a || a < 0) && (a = 0), (null == i || i > r.length) && (i = r.length);\n          var o = new (r instanceof n ? n : r instanceof t ? t : e)(i - a);\n          return o.set(r.subarray(a, i)), o;\n        }(f, 0, O);\n      },\n      A = new e(0);\n    var x = \"undefined\" != typeof TextDecoder && new TextDecoder();\n    try {\n      x.decode(A, {\n        stream: !0\n      }), 1;\n    } catch (r) {}\n    return r.convert_streams = function (r) {\n      var e = new DataView(r),\n        n = 0;\n      function t() {\n        var r = e.getUint16(n);\n        return n += 2, r;\n      }\n      function a() {\n        var r = e.getUint32(n);\n        return n += 4, r;\n      }\n      function i(r) {\n        m.setUint16(b, r), b += 2;\n      }\n      function o(r) {\n        m.setUint32(b, r), b += 4;\n      }\n      for (var f = {\n          signature: a(),\n          flavor: a(),\n          length: a(),\n          numTables: t(),\n          reserved: t(),\n          totalSfntSize: a(),\n          majorVersion: t(),\n          minorVersion: t(),\n          metaOffset: a(),\n          metaLength: a(),\n          metaOrigLength: a(),\n          privOffset: a(),\n          privLength: a()\n        }, u = 0; Math.pow(2, u) <= f.numTables;) u++;\n      u--;\n      for (var v = 16 * Math.pow(2, u), s = 16 * f.numTables - v, l = 12, c = [], g = 0; g < f.numTables; g++) c.push({\n        tag: a(),\n        offset: a(),\n        compLength: a(),\n        origLength: a(),\n        origChecksum: a()\n      }), l += 16;\n      var h,\n        w = new Uint8Array(12 + 16 * c.length + c.reduce(function (r, e) {\n          return r + e.origLength + 4;\n        }, 0)),\n        d = w.buffer,\n        m = new DataView(d),\n        b = 0;\n      return o(f.flavor), i(f.numTables), i(v), i(u), i(s), c.forEach(function (r) {\n        o(r.tag), o(r.origChecksum), o(l), o(r.origLength), r.outOffset = l, (l += r.origLength) % 4 != 0 && (l += 4 - l % 4);\n      }), c.forEach(function (e) {\n        var n,\n          t = r.slice(e.offset, e.offset + e.compLength);\n        if (e.compLength != e.origLength) {\n          var a = new Uint8Array(e.origLength);\n          n = new Uint8Array(t, 2), O(n, a);\n        } else a = new Uint8Array(t);\n        w.set(a, e.outOffset);\n        var i = 0;\n        (l = e.outOffset + e.origLength) % 4 != 0 && (i = 4 - l % 4), w.set(new Uint8Array(i).buffer, e.outOffset + e.origLength), h = l + i;\n      }), d.slice(0, h);\n    }, Object.defineProperty(r, \"__esModule\", {\n      value: !0\n    }), r;\n  }({}).convert_streams;\n}\n\n/**\n * A factory wrapper parsing a font file using Typr.\n * Also adds support for WOFF files (not WOFF2).\n */\n\nfunction parserFactory(Typr, woff2otf) {\n  var cmdArgLengths = {\n    M: 2,\n    L: 2,\n    Q: 4,\n    C: 6,\n    Z: 0\n  };\n\n  // {joinType: \"skip+step,...\"}\n  var joiningTypeRawData = {\n    \"C\": \"18g,ca,368,1kz\",\n    \"D\": \"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v\",\n    \"R\": \"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6\",\n    \"L\": \"x9u,jff,a,fd,jv\",\n    \"T\": \"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n\"\n  };\n  var JT_LEFT = 1,\n    //indicates that a character joins with the subsequent character, but does not join with the preceding character.\n    JT_RIGHT = 2,\n    //indicates that a character joins with the preceding character, but does not join with the subsequent character.\n    JT_DUAL = 4,\n    //indicates that a character joins with the preceding character and joins with the subsequent character.\n    JT_TRANSPARENT = 8,\n    //indicates that the character does not join with adjacent characters and that the character must be skipped over when the shaping engine is evaluating the joining positions in a sequence of characters. When a JT_TRANSPARENT character is encountered in a sequence, the JOINING_TYPE of the preceding character passes through. Diacritical marks are frequently assigned this value.\n    JT_JOIN_CAUSING = 16,\n    //indicates that the character forces the use of joining forms with the preceding and subsequent characters. Kashidas and the Zero Width Joiner (U+200D) are both JOIN_CAUSING characters.\n    JT_NON_JOINING = 32; //indicates that a character does not join with the preceding or with the subsequent character.,\n\n  var joiningTypeMap;\n  function getCharJoiningType(ch) {\n    if (!joiningTypeMap) {\n      var m = {\n        R: JT_RIGHT,\n        L: JT_LEFT,\n        D: JT_DUAL,\n        C: JT_JOIN_CAUSING,\n        U: JT_NON_JOINING,\n        T: JT_TRANSPARENT\n      };\n      joiningTypeMap = new Map();\n      var _loop = function _loop(type) {\n        var lastCode = 0;\n        joiningTypeRawData[type].split(',').forEach(function (range) {\n          var _range$split = range.split('+'),\n            _range$split2 = _slicedToArray(_range$split, 2),\n            skip = _range$split2[0],\n            step = _range$split2[1];\n          skip = parseInt(skip, 36);\n          step = step ? parseInt(step, 36) : 0;\n          joiningTypeMap.set(lastCode += skip, m[type]);\n          for (var i = step; i--;) {\n            joiningTypeMap.set(++lastCode, m[type]);\n          }\n        });\n      };\n      for (var type in joiningTypeRawData) {\n        _loop(type);\n      }\n    }\n    return joiningTypeMap.get(ch) || JT_NON_JOINING;\n  }\n  var ISOL = 1,\n    INIT = 2,\n    FINA = 3,\n    MEDI = 4;\n  var formsToFeatures = [null, 'isol', 'init', 'fina', 'medi'];\n  function detectJoiningForms(str) {\n    // This implements the algorithm described here:\n    // https://github.com/n8willis/opentype-shaping-documents/blob/master/opentype-shaping-arabic-general.md\n    var joiningForms = new Uint8Array(str.length);\n    var prevJoiningType = JT_NON_JOINING;\n    var prevForm = ISOL;\n    var prevIndex = -1;\n    for (var i = 0; i < str.length; i++) {\n      var code = str.codePointAt(i);\n      var joiningType = getCharJoiningType(code) | 0;\n      var form = ISOL;\n      if (joiningType & JT_TRANSPARENT) {\n        continue;\n      }\n      if (prevJoiningType & (JT_LEFT | JT_DUAL | JT_JOIN_CAUSING)) {\n        if (joiningType & (JT_RIGHT | JT_DUAL | JT_JOIN_CAUSING)) {\n          form = FINA;\n          // isol->init, fina->medi\n          if (prevForm === ISOL || prevForm === FINA) {\n            joiningForms[prevIndex]++;\n          }\n        } else if (joiningType & (JT_LEFT | JT_NON_JOINING)) {\n          // medi->fina, init->isol\n          if (prevForm === INIT || prevForm === MEDI) {\n            joiningForms[prevIndex]--;\n          }\n        }\n      } else if (prevJoiningType & (JT_RIGHT | JT_NON_JOINING)) {\n        // medi->fina, init->isol\n        if (prevForm === INIT || prevForm === MEDI) {\n          joiningForms[prevIndex]--;\n        }\n      }\n      prevForm = joiningForms[i] = form;\n      prevJoiningType = joiningType;\n      prevIndex = i;\n      if (code > 0xffff) i++;\n    }\n    // console.log(str.split('').map(ch => ch.codePointAt(0).toString(16)))\n    // console.log(str.split('').map(ch => getCharJoiningType(ch.codePointAt(0))))\n    // console.log(Array.from(joiningForms).map(f => formsToFeatures[f] || 'none'))\n    return joiningForms;\n  }\n  function stringToGlyphs(font, str) {\n    var glyphIds = [];\n    for (var i = 0; i < str.length; i++) {\n      var cc = str.codePointAt(i);\n      if (cc > 0xffff) i++;\n      glyphIds.push(Typr.U.codeToGlyph(font, cc));\n    }\n    var gsub = font['GSUB'];\n    if (gsub) {\n      var lookupList = gsub.lookupList,\n        featureList = gsub.featureList;\n      var joiningForms;\n      var supportedFeatures = /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/;\n      var usedLookups = [];\n      featureList.forEach(function (feature) {\n        if (supportedFeatures.test(feature.tag)) {\n          for (var ti = 0; ti < feature.tab.length; ti++) {\n            if (usedLookups[feature.tab[ti]]) continue;\n            usedLookups[feature.tab[ti]] = true;\n            var tab = lookupList[feature.tab[ti]];\n            var isJoiningFeature = /^(isol|init|fina|medi)$/.test(feature.tag);\n            if (isJoiningFeature && !joiningForms) {\n              //lazy\n              joiningForms = detectJoiningForms(str);\n            }\n            for (var ci = 0; ci < glyphIds.length; ci++) {\n              if (!joiningForms || !isJoiningFeature || formsToFeatures[joiningForms[ci]] === feature.tag) {\n                Typr.U._applySubs(glyphIds, ci, tab, lookupList);\n              }\n            }\n          }\n        }\n      });\n    }\n    return glyphIds;\n  }\n  function firstNum() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    for (var i = 0; i < args.length; i++) {\n      if (typeof args[i] === 'number') {\n        return args[i];\n      }\n    }\n  }\n  function wrapFontObj(typrFont) {\n    var glyphMap = Object.create(null);\n    var os2 = typrFont['OS/2'];\n    var hhea = typrFont.hhea;\n    var unitsPerEm = typrFont.head.unitsPerEm;\n    var ascender = firstNum(os2 && os2.sTypoAscender, hhea && hhea.ascender, unitsPerEm);\n    var fontObj = {\n      unitsPerEm: unitsPerEm,\n      ascender: ascender,\n      descender: firstNum(os2 && os2.sTypoDescender, hhea && hhea.descender, 0),\n      capHeight: firstNum(os2 && os2.sCapHeight, ascender),\n      xHeight: firstNum(os2 && os2.sxHeight, ascender),\n      lineGap: firstNum(os2 && os2.sTypoLineGap, hhea && hhea.lineGap),\n      forEachGlyph: function forEachGlyph(text, fontSize, letterSpacing, callback) {\n        var glyphX = 0;\n        var fontScale = 1 / fontObj.unitsPerEm * fontSize;\n        var glyphIndices = stringToGlyphs(typrFont, text);\n        var charIndex = 0;\n        var prevGlyphIndex = -1;\n        glyphIndices.forEach(function (glyphIndex, i) {\n          // Typr returns a glyph index per string codepoint, with -1s in place of those that\n          // were omitted due to ligature substitution. So we can track original index in the\n          // string via simple increment, and skip everything else when seeing a -1.\n          if (glyphIndex !== -1) {\n            var glyphObj = glyphMap[glyphIndex];\n            if (!glyphObj) {\n              var _Typr$U$glyphToPath = Typr.U.glyphToPath(typrFont, glyphIndex),\n                cmds = _Typr$U$glyphToPath.cmds,\n                crds = _Typr$U$glyphToPath.crds;\n\n              // Build path string\n              var path = '';\n              var crdsIdx = 0;\n              for (var _i5 = 0, len = cmds.length; _i5 < len; _i5++) {\n                var numArgs = cmdArgLengths[cmds[_i5]];\n                path += cmds[_i5];\n                for (var j = 1; j <= numArgs; j++) {\n                  path += (j > 1 ? ',' : '') + crds[crdsIdx++];\n                }\n              }\n\n              // Find extents - Glyf gives this in metadata but not CFF, and Typr doesn't\n              // normalize the two, so it's simplest just to iterate ourselves.\n              var xMin, yMin, xMax, yMax;\n              if (crds.length) {\n                xMin = yMin = Infinity;\n                xMax = yMax = -Infinity;\n                for (var _i6 = 0, _len3 = crds.length; _i6 < _len3; _i6 += 2) {\n                  var x = crds[_i6];\n                  var y = crds[_i6 + 1];\n                  if (x < xMin) xMin = x;\n                  if (y < yMin) yMin = y;\n                  if (x > xMax) xMax = x;\n                  if (y > yMax) yMax = y;\n                }\n              } else {\n                xMin = xMax = yMin = yMax = 0;\n              }\n              glyphObj = glyphMap[glyphIndex] = {\n                index: glyphIndex,\n                advanceWidth: typrFont.hmtx.aWidth[glyphIndex],\n                xMin: xMin,\n                yMin: yMin,\n                xMax: xMax,\n                yMax: yMax,\n                path: path,\n                pathCommandCount: cmds.length\n                // forEachPathCommand(callback) {\n                //   let argsIndex = 0\n                //   const argsArray = []\n                //   for (let i = 0, len = cmds.length; i < len; i++) {\n                //     const numArgs = cmdArgLengths[cmds[i]]\n                //     argsArray.length = 1 + numArgs\n                //     argsArray[0] = cmds[i]\n                //     for (let j = 1; j <= numArgs; j++) {\n                //       argsArray[j] = crds[argsIndex++]\n                //     }\n                //     callback.apply(null, argsArray)\n                //   }\n                // }\n              };\n            }\n\n            // Kerning\n            if (prevGlyphIndex !== -1) {\n              glyphX += Typr.U.getPairAdjustment(typrFont, prevGlyphIndex, glyphIndex) * fontScale;\n            }\n            callback.call(null, glyphObj, glyphX, charIndex);\n            if (glyphObj.advanceWidth) {\n              glyphX += glyphObj.advanceWidth * fontScale;\n            }\n            if (letterSpacing) {\n              glyphX += letterSpacing * fontSize;\n            }\n            prevGlyphIndex = glyphIndex;\n          }\n          charIndex += text.codePointAt(charIndex) > 0xffff ? 2 : 1;\n        });\n        return glyphX;\n      }\n    };\n    return fontObj;\n  }\n  return function parse(buffer) {\n    // Look to see if we have a WOFF file and convert it if so:\n    var peek = new Uint8Array(buffer, 0, 4);\n    var tag = Typr._bin.readASCII(peek, 0, 4);\n    if (tag === 'wOFF') {\n      buffer = woff2otf(buffer);\n    } else if (tag === 'wOF2') {\n      throw new Error('woff2 fonts not supported');\n    }\n    return wrapFontObj(Typr.parse(buffer)[0]);\n  };\n}\nvar workerModule = /*#__PURE__*/defineWorkerModule({\n  name: 'Typr Font Parser',\n  dependencies: [typrFactory, woff2otfFactory, parserFactory],\n  init: function init(typrFactory, woff2otfFactory, parserFactory) {\n    var Typr = typrFactory();\n    var woff2otf = woff2otfFactory();\n    return parserFactory(Typr, woff2otf);\n  }\n});\nvar CONFIG = {\n  defaultFontURL: 'https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff',\n  //Roboto Regular\n  sdfGlyphSize: 64,\n  sdfMargin: 1 / 16,\n  sdfExponent: 9,\n  textureWidth: 2048\n};\nvar tempColor = /*#__PURE__*/new Color();\nvar hasRequested = false;\nfunction now$1() {\n  return (self.performance || Date).now();\n}\n\n/**\n * Customizes the text builder configuration. This must be called prior to the first font processing\n * request, and applies to all fonts.\n *\n * @param {String} config.defaultFontURL - The URL of the default font to use for text processing\n *                 requests, in case none is specified or the specifiede font fails to load or parse.\n *                 Defaults to \"Roboto Regular\" from Google Fonts.\n * @param {Number} config.sdfGlyphSize - The default size of each glyph's SDF (signed distance field)\n *                 texture used for rendering. Must be a power-of-two number, and applies to all fonts,\n *                 but note that this can also be overridden per call to `getTextRenderInfo()`.\n *                 Larger sizes can improve the quality of glyph rendering by increasing the sharpness\n *                 of corners and preventing loss of very thin lines, at the expense of memory. Defaults\n *                 to 64 which is generally a good balance of size and quality.\n * @param {Number} config.sdfExponent - The exponent used when encoding the SDF values. A higher exponent\n *                 shifts the encoded 8-bit values to achieve higher precision/accuracy at texels nearer\n *                 the glyph's path, with lower precision further away. Defaults to 9.\n * @param {Number} config.sdfMargin - How much space to reserve in the SDF as margin outside the glyph's\n *                 path, as a percentage of the SDF width. A larger margin increases the quality of\n *                 extruded glyph outlines, but decreases the precision available for the glyph itself.\n *                 Defaults to 1/16th of the glyph size.\n * @param {Number} config.textureWidth - The width of the SDF texture; must be a power of 2. Defaults to\n *                 2048 which is a safe maximum texture dimension according to the stats at\n *                 https://webglstats.com/webgl/parameter/MAX_TEXTURE_SIZE and should allow for a\n *                 reasonably large number of glyphs (default glyph size of 64^2 and safe texture size of\n *                 2048^2, times 4 channels, allows for 4096 glyphs.) This can be increased if you need to\n *                 increase the glyph size and/or have an extraordinary number of glyphs.\n */\nfunction configureTextBuilder(config) {\n  if (hasRequested) {\n    console.warn('configureTextBuilder called after first font request; will be ignored.');\n  } else {\n    assign(CONFIG, config);\n  }\n}\n\n/**\n * Repository for all font SDF atlas textures and their glyph mappings. There is a separate atlas for\n * each sdfGlyphSize. Each atlas has a single Texture that holds all glyphs for all fonts.\n *\n *   {\n *     [sdfGlyphSize]: {\n *       glyphCount: number,\n *       sdfGlyphSize: number,\n *       sdfTexture: Texture,\n *       sdfCanvas: HTMLCanvasElement,\n *       contextLost: boolean,\n *       glyphsByFont: Map<fontURL, Map<glyphID, {path, atlasIndex, sdfViewBox}>>\n *     }\n *   }\n */\nvar atlases = Object.create(null);\n\n/**\n * @typedef {object} TroikaTextRenderInfo - Format of the result from `getTextRenderInfo`.\n * @property {object} parameters - The normalized input arguments to the render call.\n * @property {Texture} sdfTexture - The SDF atlas texture.\n * @property {number} sdfGlyphSize - The size of each glyph's SDF; see `configureTextBuilder`.\n * @property {number} sdfExponent - The exponent used in encoding the SDF's values; see `configureTextBuilder`.\n * @property {Float32Array} glyphBounds - List of [minX, minY, maxX, maxY] quad bounds for each glyph.\n * @property {Float32Array} glyphAtlasIndices - List holding each glyph's index in the SDF atlas.\n * @property {Uint8Array} [glyphColors] - List holding each glyph's [r, g, b] color, if `colorRanges` was supplied.\n * @property {Float32Array} [caretPositions] - A list of caret positions for all characters in the string; each is\n *           three elements: the starting X, the ending X, and the bottom Y for the caret.\n * @property {number} [caretHeight] - An appropriate height for all selection carets.\n * @property {number} ascender - The font's ascender metric.\n * @property {number} descender - The font's descender metric.\n * @property {number} capHeight - The font's cap height metric, based on the height of Latin capital letters.\n * @property {number} xHeight - The font's x height metric, based on the height of Latin lowercase letters.\n * @property {number} lineHeight - The final computed lineHeight measurement.\n * @property {number} topBaseline - The y position of the top line's baseline.\n * @property {Array<number>} blockBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\n *           this can include extra vertical space beyond the visible glyphs due to lineHeight, and is\n *           equivalent to the dimensions of a block-level text element in CSS.\n * @property {Array<number>} visibleBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\n *           unlike `blockBounds` this is tightly wrapped to the visible glyph paths.\n * @property {Array<object>} chunkedBounds - List of bounding rects for each consecutive set of N glyphs,\n *           in the format `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`.\n * @property {object} timings - Timing info for various parts of the rendering logic including SDF\n *           generation, typesetting, etc.\n * @frozen\n */\n\n/**\n * @callback getTextRenderInfo~callback\n * @param {TroikaTextRenderInfo} textRenderInfo\n */\n\n/**\n * Main entry point for requesting the data needed to render a text string with given font parameters.\n * This is an asynchronous call, performing most of the logic in a web worker thread.\n * @param {object} args\n * @param {getTextRenderInfo~callback} callback\n */\nfunction getTextRenderInfo(args, callback) {\n  hasRequested = true;\n  args = assign({}, args);\n  var totalStart = now$1();\n\n  // Apply default font here to avoid a 'null' atlas, and convert relative\n  // URLs to absolute so they can be resolved in the worker\n  args.font = toAbsoluteURL(args.font || CONFIG.defaultFontURL);\n\n  // Normalize text to a string\n  args.text = '' + args.text;\n  args.sdfGlyphSize = args.sdfGlyphSize || CONFIG.sdfGlyphSize;\n\n  // Normalize colors\n  if (args.colorRanges != null) {\n    var colors = {};\n    for (var key in args.colorRanges) {\n      if (args.colorRanges.hasOwnProperty(key)) {\n        var val = args.colorRanges[key];\n        if (typeof val !== 'number') {\n          val = tempColor.set(val).getHex();\n        }\n        colors[key] = val;\n      }\n    }\n    args.colorRanges = colors;\n  }\n  Object.freeze(args);\n\n  // Init the atlas if needed\n  var textureWidth = CONFIG.textureWidth,\n    sdfExponent = CONFIG.sdfExponent;\n  var _args = args,\n    sdfGlyphSize = _args.sdfGlyphSize;\n  var glyphsPerRow = textureWidth / sdfGlyphSize * 4;\n  var atlas = atlases[sdfGlyphSize];\n  if (!atlas) {\n    var canvas = document.createElement('canvas');\n    canvas.width = textureWidth;\n    canvas.height = sdfGlyphSize * 256 / glyphsPerRow; // start tall enough to fit 256 glyphs\n    atlas = atlases[sdfGlyphSize] = {\n      glyphCount: 0,\n      sdfGlyphSize: sdfGlyphSize,\n      sdfCanvas: canvas,\n      sdfTexture: new Texture(canvas, undefined, undefined, undefined, LinearFilter, LinearFilter),\n      contextLost: false,\n      glyphsByFont: new Map()\n    };\n    atlas.sdfTexture.generateMipmaps = false;\n    initContextLossHandling(atlas);\n  }\n  var _atlas = atlas,\n    sdfTexture = _atlas.sdfTexture,\n    sdfCanvas = _atlas.sdfCanvas;\n  var fontGlyphs = atlas.glyphsByFont.get(args.font);\n  if (!fontGlyphs) {\n    atlas.glyphsByFont.set(args.font, fontGlyphs = new Map());\n  }\n\n  // Issue request to the typesetting engine in the worker\n  typesetInWorker(args).then(function (result) {\n    var glyphIds = result.glyphIds,\n      glyphPositions = result.glyphPositions,\n      fontSize = result.fontSize,\n      unitsPerEm = result.unitsPerEm,\n      timings = result.timings;\n    var neededSDFs = [];\n    var glyphBounds = new Float32Array(glyphIds.length * 4);\n    var fontSizeMult = fontSize / unitsPerEm;\n    var boundsIdx = 0;\n    var positionsIdx = 0;\n    var quadsStart = now$1();\n    glyphIds.forEach(function (glyphId, i) {\n      var glyphInfo = fontGlyphs.get(glyphId);\n\n      // If this is a glyphId not seen before, add it to the atlas\n      if (!glyphInfo) {\n        var _result$glyphData$gly = result.glyphData[glyphId],\n          path = _result$glyphData$gly.path,\n          pathBounds = _result$glyphData$gly.pathBounds;\n\n        // Margin around path edges in SDF, based on a percentage of the glyph's max dimension.\n        // Note we add an extra 0.5 px over the configured value because the outer 0.5 doesn't contain\n        // useful interpolated values and will be ignored anyway.\n        var fontUnitsMargin = Math.max(pathBounds[2] - pathBounds[0], pathBounds[3] - pathBounds[1]) / sdfGlyphSize * (CONFIG.sdfMargin * sdfGlyphSize + 0.5);\n        var atlasIndex = atlas.glyphCount++;\n        var _sdfViewBox = [pathBounds[0] - fontUnitsMargin, pathBounds[1] - fontUnitsMargin, pathBounds[2] + fontUnitsMargin, pathBounds[3] + fontUnitsMargin];\n        fontGlyphs.set(glyphId, glyphInfo = {\n          path: path,\n          atlasIndex: atlasIndex,\n          sdfViewBox: _sdfViewBox\n        });\n\n        // Collect those that need SDF generation\n        neededSDFs.push(glyphInfo);\n      }\n\n      // Calculate bounds for renderable quads\n      // TODO can we get this back off the main thread?\n      var _glyphInfo3 = glyphInfo,\n        sdfViewBox = _glyphInfo3.sdfViewBox;\n      var posX = glyphPositions[positionsIdx++];\n      var posY = glyphPositions[positionsIdx++];\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[0] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[1] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[2] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[3] * fontSizeMult;\n\n      // Convert glyphId to SDF index for the shader\n      glyphIds[i] = glyphInfo.atlasIndex;\n    });\n    timings.quads = (timings.quads || 0) + (now$1() - quadsStart);\n    var sdfStart = now$1();\n    timings.sdf = {};\n\n    // Grow the texture height by power of 2 if needed\n    var currentHeight = sdfCanvas.height;\n    var neededRows = Math.ceil(atlas.glyphCount / glyphsPerRow);\n    var neededHeight = Math.pow(2, Math.ceil(Math.log2(neededRows * sdfGlyphSize)));\n    if (neededHeight > currentHeight) {\n      // Since resizing the canvas clears its render buffer, it needs special handling to copy the old contents over\n      console.info(\"Increasing SDF texture size \".concat(currentHeight, \"->\").concat(neededHeight));\n      resizeWebGLCanvasWithoutClearing(sdfCanvas, textureWidth, neededHeight);\n      // As of Three r136 textures cannot be resized once they're allocated on the GPU, we must dispose to reallocate it\n      sdfTexture.dispose();\n    }\n    Promise.all(neededSDFs.map(function (glyphInfo) {\n      return generateGlyphSDF(glyphInfo, atlas, args.gpuAccelerateSDF).then(function (_ref3) {\n        var timing = _ref3.timing;\n        timings.sdf[glyphInfo.atlasIndex] = timing;\n      });\n    })).then(function () {\n      if (neededSDFs.length && !atlas.contextLost) {\n        safariPre15Workaround(atlas);\n        sdfTexture.needsUpdate = true;\n      }\n      timings.sdfTotal = now$1() - sdfStart;\n      timings.total = now$1() - totalStart;\n      // console.log(`SDF - ${timings.sdfTotal}, Total - ${timings.total - timings.fontLoad}`)\n\n      // Invoke callback with the text layout arrays and updated texture\n      callback(Object.freeze({\n        parameters: args,\n        sdfTexture: sdfTexture,\n        sdfGlyphSize: sdfGlyphSize,\n        sdfExponent: sdfExponent,\n        glyphBounds: glyphBounds,\n        glyphAtlasIndices: glyphIds,\n        glyphColors: result.glyphColors,\n        caretPositions: result.caretPositions,\n        caretHeight: result.caretHeight,\n        chunkedBounds: result.chunkedBounds,\n        ascender: result.ascender,\n        descender: result.descender,\n        lineHeight: result.lineHeight,\n        capHeight: result.capHeight,\n        xHeight: result.xHeight,\n        topBaseline: result.topBaseline,\n        blockBounds: result.blockBounds,\n        visibleBounds: result.visibleBounds,\n        timings: result.timings\n      }));\n    });\n  });\n\n  // While the typesetting request is being handled, go ahead and make sure the atlas canvas context is\n  // \"warmed up\"; the first request will be the longest due to shader program compilation so this gets\n  // a head start on that process before SDFs actually start getting processed.\n  Promise.resolve().then(function () {\n    if (!atlas.contextLost) {\n      warmUpSDFCanvas(sdfCanvas);\n    }\n  });\n}\nfunction generateGlyphSDF(_ref4, _ref5, useGPU) {\n  var path = _ref4.path,\n    atlasIndex = _ref4.atlasIndex,\n    sdfViewBox = _ref4.sdfViewBox;\n  var sdfGlyphSize = _ref5.sdfGlyphSize,\n    sdfCanvas = _ref5.sdfCanvas,\n    contextLost = _ref5.contextLost;\n  if (contextLost) {\n    // If the context is lost there's nothing we can do, just quit silently and let it\n    // get regenerated when the context is restored\n    return Promise.resolve({\n      timing: -1\n    });\n  }\n  var textureWidth = CONFIG.textureWidth,\n    sdfExponent = CONFIG.sdfExponent;\n  var maxDist = Math.max(sdfViewBox[2] - sdfViewBox[0], sdfViewBox[3] - sdfViewBox[1]);\n  var squareIndex = Math.floor(atlasIndex / 4);\n  var x = squareIndex % (textureWidth / sdfGlyphSize) * sdfGlyphSize;\n  var y = Math.floor(squareIndex / (textureWidth / sdfGlyphSize)) * sdfGlyphSize;\n  var channel = atlasIndex % 4;\n  return generateSDF(sdfGlyphSize, sdfGlyphSize, path, sdfViewBox, maxDist, sdfExponent, sdfCanvas, x, y, channel, useGPU);\n}\nfunction initContextLossHandling(atlas) {\n  var canvas = atlas.sdfCanvas;\n\n  /*\n  // Begin context loss simulation\n  if (!window.WebGLDebugUtils) {\n    let script = document.getElementById('WebGLDebugUtilsScript')\n    if (!script) {\n      script = document.createElement('script')\n      script.id = 'WebGLDebugUtils'\n      document.head.appendChild(script)\n      script.src = 'https://cdn.jsdelivr.net/gh/KhronosGroup/WebGLDeveloperTools@b42e702/src/debug/webgl-debug.js'\n    }\n    script.addEventListener('load', () => {\n      initContextLossHandling(atlas)\n    })\n    return\n  }\n  window.WebGLDebugUtils.makeLostContextSimulatingCanvas(canvas)\n  canvas.loseContextInNCalls(500)\n  canvas.addEventListener('webglcontextrestored', (event) => {\n    canvas.loseContextInNCalls(5000)\n  })\n  // End context loss simulation\n  */\n\n  canvas.addEventListener('webglcontextlost', function (event) {\n    console.log('Context Lost', event);\n    event.preventDefault();\n    atlas.contextLost = true;\n  });\n  canvas.addEventListener('webglcontextrestored', function (event) {\n    console.log('Context Restored', event);\n    atlas.contextLost = false;\n    // Regenerate all glyphs into the restored canvas:\n    var promises = [];\n    atlas.glyphsByFont.forEach(function (glyphMap) {\n      glyphMap.forEach(function (glyph) {\n        promises.push(generateGlyphSDF(glyph, atlas, true));\n      });\n    });\n    Promise.all(promises).then(function () {\n      safariPre15Workaround(atlas);\n      atlas.sdfTexture.needsUpdate = true;\n    });\n  });\n}\n\n/**\n * Preload a given font and optionally pre-generate glyph SDFs for one or more character sequences.\n * This can be useful to avoid long pauses when first showing text in a scene, by preloading the\n * needed fonts and glyphs up front along with other assets.\n *\n * @param {object} options\n * @param {string} options.font - URL of the font file to preload. If not given, the default font will\n *        be loaded.\n * @param {string|string[]} options.characters - One or more character sequences for which to pre-\n *        generate glyph SDFs. Note that this will honor ligature substitution, so you may need\n *        to specify ligature sequences in addition to their individual characters to get all\n *        possible glyphs, e.g. `[\"t\", \"h\", \"th\"]` to get the \"t\" and \"h\" glyphs plus the \"th\" ligature.\n * @param {number} options.sdfGlyphSize - The size at which to prerender the SDF textures for the\n *        specified `characters`.\n * @param {function} callback - A function that will be called when the preloading is complete.\n */\nfunction preloadFont(_ref6, callback) {\n  var font = _ref6.font,\n    characters = _ref6.characters,\n    sdfGlyphSize = _ref6.sdfGlyphSize;\n  var text = Array.isArray(characters) ? characters.join('\\n') : '' + characters;\n  getTextRenderInfo({\n    font: font,\n    sdfGlyphSize: sdfGlyphSize,\n    text: text\n  }, callback);\n}\n\n// Local assign impl so we don't have to import troika-core\nfunction assign(toObj, fromObj) {\n  for (var key in fromObj) {\n    if (fromObj.hasOwnProperty(key)) {\n      toObj[key] = fromObj[key];\n    }\n  }\n  return toObj;\n}\n\n// Utility for making URLs absolute\nvar linkEl;\nfunction toAbsoluteURL(path) {\n  if (!linkEl) {\n    linkEl = typeof document === 'undefined' ? {} : document.createElement('a');\n  }\n  linkEl.href = path;\n  return linkEl.href;\n}\n\n/**\n * Safari < v15 seems unable to use the SDF webgl canvas as a texture. This applies a workaround\n * where it reads the pixels out of that canvas and uploads them as a data texture instead, at\n * a slight performance cost.\n */\nfunction safariPre15Workaround(atlas) {\n  // Use createImageBitmap support as a proxy for Safari<15, all other mainstream browsers\n  // have supported it for a long while so any false positives should be minimal.\n  if (typeof createImageBitmap !== 'function') {\n    console.info('Safari<15: applying SDF canvas workaround');\n    var sdfCanvas = atlas.sdfCanvas,\n      sdfTexture = atlas.sdfTexture;\n    var width = sdfCanvas.width,\n      height = sdfCanvas.height;\n    var gl = atlas.sdfCanvas.getContext('webgl');\n    var pixels = sdfTexture.image.data;\n    if (!pixels || pixels.length !== width * height * 4) {\n      pixels = new Uint8Array(width * height * 4);\n      sdfTexture.image = {\n        width: width,\n        height: height,\n        data: pixels\n      };\n      sdfTexture.flipY = false;\n      sdfTexture.isDataTexture = true;\n    }\n    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n  }\n}\nvar typesetterWorkerModule = /*#__PURE__*/defineWorkerModule({\n  name: 'Typesetter',\n  dependencies: [CONFIG, workerModule, createTypesetter, bidiFactory],\n  init: function init(config, fontParser, createTypesetter, bidiFactory) {\n    var defaultFontURL = config.defaultFontURL;\n    return createTypesetter(fontParser, bidiFactory(), {\n      defaultFontURL: defaultFontURL\n    });\n  }\n});\nvar typesetInWorker = /*#__PURE__*/defineWorkerModule({\n  name: 'Typesetter',\n  dependencies: [typesetterWorkerModule],\n  init: function init(typesetter) {\n    return function (args) {\n      return new Promise(function (resolve) {\n        typesetter.typeset(args, resolve);\n      });\n    };\n  },\n  getTransferables: function getTransferables(result) {\n    // Mark array buffers as transferable to avoid cloning during postMessage\n    var transferables = [result.glyphPositions.buffer, result.glyphIds.buffer];\n    if (result.caretPositions) {\n      transferables.push(result.caretPositions.buffer);\n    }\n    if (result.glyphColors) {\n      transferables.push(result.glyphColors.buffer);\n    }\n    return transferables;\n  }\n});\nfunction dumpSDFTextures() {\n  Object.keys(atlases).forEach(function (size) {\n    var canvas = atlases[size].sdfCanvas;\n    var width = canvas.width,\n      height = canvas.height;\n    console.log(\"%c.\", \"\\n      background: url(\".concat(canvas.toDataURL(), \");\\n      background-size: \").concat(width, \"px \").concat(height, \"px;\\n      color: transparent;\\n      font-size: 0;\\n      line-height: \").concat(height, \"px;\\n      padding-left: \").concat(width, \"px;\\n    \"));\n  });\n}\nvar templateGeometries = {};\nfunction getTemplateGeometry(detail) {\n  var geom = templateGeometries[detail];\n  if (!geom) {\n    // Geometry is two planes back-to-back, which will always be rendered FrontSide only but\n    // appear as DoubleSide by default. FrontSide/BackSide are emulated using drawRange.\n    // We do it this way to avoid the performance hit of two draw calls for DoubleSide materials\n    // introduced by Three.js in r130 - see https://github.com/mrdoob/three.js/pull/21967\n    var front = new PlaneGeometry(1, 1, detail, detail);\n    var back = front.clone();\n    var frontAttrs = front.attributes;\n    var backAttrs = back.attributes;\n    var combined = new BufferGeometry();\n    var vertCount = frontAttrs.uv.count;\n    for (var i = 0; i < vertCount; i++) {\n      backAttrs.position.array[i * 3] *= -1; // flip position x\n      backAttrs.normal.array[i * 3 + 2] *= -1; // flip normal z\n    }\n\n    ['position', 'normal', 'uv'].forEach(function (name) {\n      combined.setAttribute(name, new Float32BufferAttribute([].concat(_toConsumableArray(frontAttrs[name].array), _toConsumableArray(backAttrs[name].array)), frontAttrs[name].itemSize));\n    });\n    combined.setIndex([].concat(_toConsumableArray(front.index.array), _toConsumableArray(back.index.array.map(function (n) {\n      return n + vertCount;\n    }))));\n    combined.translate(0.5, 0.5, 0);\n    geom = templateGeometries[detail] = combined;\n  }\n  return geom;\n}\nvar glyphBoundsAttrName = 'aTroikaGlyphBounds';\nvar glyphIndexAttrName = 'aTroikaGlyphIndex';\nvar glyphColorAttrName = 'aTroikaGlyphColor';\n\n/**\n@class GlyphsGeometry\n\nA specialized Geometry for rendering a set of text glyphs. Uses InstancedBufferGeometry to\nrender the glyphs using GPU instancing of a single quad, rather than constructing a whole\ngeometry with vertices, for much smaller attribute arraybuffers according to this math:\n\n  Where N = number of glyphs...\n\n  Instanced:\n  - position: 4 * 3\n  - index: 2 * 3\n  - normal: 4 * 3\n  - uv: 4 * 2\n  - glyph x/y bounds: N * 4\n  - glyph indices: N * 1\n  = 5N + 38\n\n  Non-instanced:\n  - position: N * 4 * 3\n  - index: N * 2 * 3\n  - normal: N * 4 * 3\n  - uv: N * 4 * 2\n  - glyph indices: N * 1\n  = 39N\n\nA downside of this is the rare-but-possible lack of the instanced arrays extension,\nwhich we could potentially work around with a fallback non-instanced implementation.\n\n*/\nvar GlyphsGeometry = /*#__PURE__*/function (_InstancedBufferGeome) {\n  _inherits(GlyphsGeometry, _InstancedBufferGeome);\n  var _super = _createSuper(GlyphsGeometry);\n  function GlyphsGeometry() {\n    var _this;\n    _classCallCheck(this, GlyphsGeometry);\n    _this = _super.call(this);\n    _this.detail = 1;\n    _this.curveRadius = 0;\n\n    // Define groups for rendering text outline as a separate pass; these will only\n    // be used when the `material` getter returns an array, i.e. outlineWidth > 0.\n    _this.groups = [{\n      start: 0,\n      count: Infinity,\n      materialIndex: 0\n    }, {\n      start: 0,\n      count: Infinity,\n      materialIndex: 1\n    }];\n\n    // Preallocate empty bounding objects\n    _this.boundingSphere = new Sphere();\n    _this.boundingBox = new Box3();\n    return _this;\n  }\n  _createClass(GlyphsGeometry, [{\n    key: \"computeBoundingSphere\",\n    value: function computeBoundingSphere() {\n      // No-op; we'll sync the boundingSphere proactively when needed.\n    }\n  }, {\n    key: \"computeBoundingBox\",\n    value: function computeBoundingBox() {\n      // No-op; we'll sync the boundingBox proactively when needed.\n    }\n\n    // Since our base geometry contains triangles for both front and back sides, we can emulate\n    // the \"side\" by restricting the draw range.\n  }, {\n    key: \"setSide\",\n    value: function setSide(side) {\n      var verts = this.getIndex().count;\n      this.setDrawRange(side === BackSide ? verts / 2 : 0, side === DoubleSide ? verts : verts / 2);\n    }\n  }, {\n    key: \"detail\",\n    get: function get() {\n      return this._detail;\n    },\n    set: function set(detail) {\n      var _this2 = this;\n      if (detail !== this._detail) {\n        this._detail = detail;\n        if (typeof detail !== 'number' || detail < 1) {\n          detail = 1;\n        }\n        var tpl = getTemplateGeometry(detail);\n        ['position', 'normal', 'uv'].forEach(function (attr) {\n          _this2.attributes[attr] = tpl.attributes[attr].clone();\n        });\n        this.setIndex(tpl.getIndex().clone());\n      }\n    }\n  }, {\n    key: \"curveRadius\",\n    get: function get() {\n      return this._curveRadius;\n    }\n\n    /**\n     * Update the geometry for a new set of glyphs.\n     * @param {Float32Array} glyphBounds - An array holding the planar bounds for all glyphs\n     *        to be rendered, 4 entries for each glyph: x1,x2,y1,y1\n     * @param {Float32Array} glyphAtlasIndices - An array holding the index of each glyph within\n     *        the SDF atlas texture.\n     * @param {Array} blockBounds - An array holding the [minX, minY, maxX, maxY] across all glyphs\n     * @param {Array} [chunkedBounds] - An array of objects describing bounds for each chunk of N\n     *        consecutive glyphs: `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`. This can be\n     *        used with `applyClipRect` to choose an optimized `instanceCount`.\n     * @param {Uint8Array} [glyphColors] - An array holding r,g,b values for each glyph.\n     */,\n    set: function set(r) {\n      if (r !== this._curveRadius) {\n        this._curveRadius = r;\n        this._updateBounds();\n      }\n    }\n  }, {\n    key: \"updateGlyphs\",\n    value: function updateGlyphs(glyphBounds, glyphAtlasIndices, blockBounds, chunkedBounds, glyphColors) {\n      // Update the instance attributes\n      updateBufferAttr(this, glyphBoundsAttrName, glyphBounds, 4);\n      updateBufferAttr(this, glyphIndexAttrName, glyphAtlasIndices, 1);\n      updateBufferAttr(this, glyphColorAttrName, glyphColors, 3);\n      this._blockBounds = blockBounds;\n      this._chunkedBounds = chunkedBounds;\n      this.instanceCount = glyphAtlasIndices.length;\n      this._updateBounds();\n    }\n  }, {\n    key: \"_updateBounds\",\n    value: function _updateBounds() {\n      var bounds = this._blockBounds;\n      if (bounds) {\n        var curveRadius = this.curveRadius,\n          bbox = this.boundingBox;\n        if (curveRadius) {\n          var PI = Math.PI,\n            floor = Math.floor,\n            min = Math.min,\n            max = Math.max,\n            sin = Math.sin,\n            cos = Math.cos;\n          var halfPi = PI / 2;\n          var twoPi = PI * 2;\n          var absR = Math.abs(curveRadius);\n          var leftAngle = bounds[0] / absR;\n          var rightAngle = bounds[2] / absR;\n          var minX = floor((leftAngle + halfPi) / twoPi) !== floor((rightAngle + halfPi) / twoPi) ? -absR : min(sin(leftAngle) * absR, sin(rightAngle) * absR);\n          var maxX = floor((leftAngle - halfPi) / twoPi) !== floor((rightAngle - halfPi) / twoPi) ? absR : max(sin(leftAngle) * absR, sin(rightAngle) * absR);\n          var maxZ = floor((leftAngle + PI) / twoPi) !== floor((rightAngle + PI) / twoPi) ? absR * 2 : max(absR - cos(leftAngle) * absR, absR - cos(rightAngle) * absR);\n          bbox.min.set(minX, bounds[1], curveRadius < 0 ? -maxZ : 0);\n          bbox.max.set(maxX, bounds[3], curveRadius < 0 ? 0 : maxZ);\n        } else {\n          bbox.min.set(bounds[0], bounds[1], 0);\n          bbox.max.set(bounds[2], bounds[3], 0);\n        }\n        bbox.getBoundingSphere(this.boundingSphere);\n      }\n    }\n\n    /**\n     * Given a clipping rect, and the chunkedBounds from the last updateGlyphs call, choose the lowest\n     * `instanceCount` that will show all glyphs within the clipped view. This is an optimization\n     * for long blocks of text that are clipped, to skip vertex shader evaluation for glyphs that would\n     * be clipped anyway.\n     *\n     * Note that since `drawElementsInstanced[ANGLE]` only accepts an instance count and not a starting\n     * offset, this optimization becomes less effective as the clipRect moves closer to the end of the\n     * text block. We could fix that by switching from instancing to a full geometry with a drawRange,\n     * but at the expense of much larger attribute buffers (see classdoc above.)\n     *\n     * @param {Vector4} clipRect\n     */\n  }, {\n    key: \"applyClipRect\",\n    value: function applyClipRect(clipRect) {\n      var count = this.getAttribute(glyphIndexAttrName).count;\n      var chunks = this._chunkedBounds;\n      if (chunks) {\n        for (var i = chunks.length; i--;) {\n          count = chunks[i].end;\n          var rect = chunks[i].rect;\n          // note: both rects are l-b-r-t\n          if (rect[1] < clipRect.w && rect[3] > clipRect.y && rect[0] < clipRect.z && rect[2] > clipRect.x) {\n            break;\n          }\n        }\n      }\n      this.instanceCount = count;\n    }\n  }]);\n  return GlyphsGeometry;\n}(InstancedBufferGeometry);\nfunction updateBufferAttr(geom, attrName, newArray, itemSize) {\n  var attr = geom.getAttribute(attrName);\n  if (newArray) {\n    // If length isn't changing, just update the attribute's array data\n    if (attr && attr.array.length === newArray.length) {\n      attr.array.set(newArray);\n      attr.needsUpdate = true;\n    } else {\n      geom.setAttribute(attrName, new InstancedBufferAttribute(newArray, itemSize));\n      // If the new attribute has a different size, we also have to (as of r117) manually clear the\n      // internal cached max instance count. See https://github.com/mrdoob/three.js/issues/19706\n      // It's unclear if this is a threejs bug or a truly unsupported scenario; discussion in\n      // that ticket is ambiguous as to whether replacing a BufferAttribute with one of a\n      // different size is supported, but https://github.com/mrdoob/three.js/pull/17418 strongly\n      // implies it should be supported. It's possible we need to\n      delete geom._maxInstanceCount; //for r117+, could be fragile\n      geom.dispose(); //for r118+, more robust feeling, but more heavy-handed than I'd like\n    }\n  } else if (attr) {\n    geom.deleteAttribute(attrName);\n  }\n}\n\n// language=GLSL\nvar VERTEX_DEFS = \"\\nuniform vec2 uTroikaSDFTextureSize;\\nuniform float uTroikaSDFGlyphSize;\\nuniform vec4 uTroikaTotalBounds;\\nuniform vec4 uTroikaClipRect;\\nuniform mat3 uTroikaOrient;\\nuniform bool uTroikaUseGlyphColors;\\nuniform float uTroikaDistanceOffset;\\nuniform float uTroikaBlurRadius;\\nuniform vec2 uTroikaPositionOffset;\\nuniform float uTroikaCurveRadius;\\nattribute vec4 aTroikaGlyphBounds;\\nattribute float aTroikaGlyphIndex;\\nattribute vec3 aTroikaGlyphColor;\\nvarying vec2 vTroikaGlyphUV;\\nvarying vec4 vTroikaTextureUVBounds;\\nvarying float vTroikaTextureChannel;\\nvarying vec3 vTroikaGlyphColor;\\nvarying vec2 vTroikaGlyphDimensions;\\n\";\n\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\nvar VERTEX_TRANSFORM = \"\\nvec4 bounds = aTroikaGlyphBounds;\\nbounds.xz += uTroikaPositionOffset.x;\\nbounds.yw -= uTroikaPositionOffset.y;\\n\\nvec4 outlineBounds = vec4(\\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\\n);\\nvec4 clippedBounds = vec4(\\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\\n);\\n\\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\\n\\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\\n\\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\\n\\nfloat rad = uTroikaCurveRadius;\\nif (rad != 0.0) {\\n  float angle = position.x / rad;\\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\\n  normal.xz = vec2(sin(angle), cos(angle));\\n}\\n  \\nposition = uTroikaOrient * position;\\nnormal = uTroikaOrient * normal;\\n\\nvTroikaGlyphUV = clippedXY.xy;\\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\\n\\n\".concat(\"\\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\\nvec2 txStartUV = txUvPerSquare * vec2(\\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\\n);\\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\\n\");\n\n// language=GLSL\nvar FRAGMENT_DEFS = \"\\nuniform sampler2D uTroikaSDFTexture;\\nuniform vec2 uTroikaSDFTextureSize;\\nuniform float uTroikaSDFGlyphSize;\\nuniform float uTroikaSDFExponent;\\nuniform float uTroikaDistanceOffset;\\nuniform float uTroikaFillOpacity;\\nuniform float uTroikaOutlineOpacity;\\nuniform float uTroikaBlurRadius;\\nuniform vec3 uTroikaStrokeColor;\\nuniform float uTroikaStrokeWidth;\\nuniform float uTroikaStrokeOpacity;\\nuniform bool uTroikaSDFDebug;\\nvarying vec2 vTroikaGlyphUV;\\nvarying vec4 vTroikaTextureUVBounds;\\nvarying float vTroikaTextureChannel;\\nvarying vec2 vTroikaGlyphDimensions;\\n\\nfloat troikaSdfValueToSignedDistance(float alpha) {\\n  // Inverse of exponential encoding in webgl-sdf-generator\\n  \".concat(\"\\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\\n  return signedDist;\\n}\\n\\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\\n}\\n\\nfloat troikaGlyphUvToDistance(vec2 uv) {\\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\\n}\\n\\nfloat troikaGetAADist() {\\n  \", \"\\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\\n  #else\\n  return vTroikaGlyphDimensions.x / 64.0;\\n  #endif\\n}\\n\\nfloat troikaGetFragDistValue() {\\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\\n \\n  // Extrapolate distance when outside bounds:\\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \\n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\\n\\n  \", \"\\n\\n  return distance;\\n}\\n\\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\\n  float alpha = step(-distanceOffset, -distance);\\n  #else\\n\\n  float alpha = smoothstep(\\n    distanceOffset + aaDist,\\n    distanceOffset - aaDist,\\n    distance\\n  );\\n  #endif\\n\\n  return alpha;\\n}\\n\");\n\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\nvar FRAGMENT_TRANSFORM = \"\\nfloat aaDist = troikaGetAADist();\\nfloat fragDistance = troikaGetFragDistValue();\\nfloat edgeAlpha = uTroikaSDFDebug ?\\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\\n\\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\\nvec4 fillRGBA = gl_FragColor;\\nfillRGBA.a *= uTroikaFillOpacity;\\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\\n  -uTroikaStrokeWidth - aaDist,\\n  -uTroikaStrokeWidth + aaDist,\\n  fragDistance\\n));\\ngl_FragColor.a *= edgeAlpha;\\n#endif\\n\\nif (edgeAlpha == 0.0) {\\n  discard;\\n}\\n\";\n\n/**\n * Create a material for rendering text, derived from a baseMaterial\n */\nfunction createTextDerivedMaterial(baseMaterial) {\n  var textMaterial = createDerivedMaterial(baseMaterial, {\n    chained: true,\n    extensions: {\n      derivatives: true\n    },\n    uniforms: {\n      uTroikaSDFTexture: {\n        value: null\n      },\n      uTroikaSDFTextureSize: {\n        value: new Vector2()\n      },\n      uTroikaSDFGlyphSize: {\n        value: 0\n      },\n      uTroikaSDFExponent: {\n        value: 0\n      },\n      uTroikaTotalBounds: {\n        value: new Vector4(0, 0, 0, 0)\n      },\n      uTroikaClipRect: {\n        value: new Vector4(0, 0, 0, 0)\n      },\n      uTroikaDistanceOffset: {\n        value: 0\n      },\n      uTroikaOutlineOpacity: {\n        value: 0\n      },\n      uTroikaFillOpacity: {\n        value: 1\n      },\n      uTroikaPositionOffset: {\n        value: new Vector2()\n      },\n      uTroikaCurveRadius: {\n        value: 0\n      },\n      uTroikaBlurRadius: {\n        value: 0\n      },\n      uTroikaStrokeWidth: {\n        value: 0\n      },\n      uTroikaStrokeColor: {\n        value: new Color()\n      },\n      uTroikaStrokeOpacity: {\n        value: 1\n      },\n      uTroikaOrient: {\n        value: new Matrix3()\n      },\n      uTroikaUseGlyphColors: {\n        value: true\n      },\n      uTroikaSDFDebug: {\n        value: false\n      }\n    },\n    vertexDefs: VERTEX_DEFS,\n    vertexTransform: VERTEX_TRANSFORM,\n    fragmentDefs: FRAGMENT_DEFS,\n    fragmentColorTransform: FRAGMENT_TRANSFORM,\n    customRewriter: function customRewriter(_ref7) {\n      var vertexShader = _ref7.vertexShader,\n        fragmentShader = _ref7.fragmentShader;\n      var uDiffuseRE = /\\buniform\\s+vec3\\s+diffuse\\b/;\n      if (uDiffuseRE.test(fragmentShader)) {\n        // Replace all instances of `diffuse` with our varying\n        fragmentShader = fragmentShader.replace(uDiffuseRE, 'varying vec3 vTroikaGlyphColor').replace(/\\bdiffuse\\b/g, 'vTroikaGlyphColor');\n        // Make sure the vertex shader declares the uniform so we can grab it as a fallback\n        if (!uDiffuseRE.test(vertexShader)) {\n          vertexShader = vertexShader.replace(voidMainRegExp, 'uniform vec3 diffuse;\\n$&\\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\\n');\n        }\n      }\n      return {\n        vertexShader: vertexShader,\n        fragmentShader: fragmentShader\n      };\n    }\n  });\n\n  // Force transparency - TODO is this reasonable?\n  textMaterial.transparent = true;\n  Object.defineProperties(textMaterial, {\n    isTroikaTextMaterial: {\n      value: true\n    },\n    // WebGLShadowMap reverses the side of the shadow material by default, which fails\n    // for planes, so here we force the `shadowSide` to always match the main side.\n    shadowSide: {\n      get: function get() {\n        return this.side;\n      },\n      set: function set() {\n        //no-op\n      }\n    }\n  });\n  return textMaterial;\n}\nvar defaultMaterial = /*#__PURE__*/new MeshBasicMaterial({\n  color: 0xffffff,\n  side: DoubleSide,\n  transparent: true\n});\nvar defaultStrokeColor = 0x808080;\nvar tempMat4 = /*#__PURE__*/new Matrix4();\nvar tempVec3a = /*#__PURE__*/new Vector3();\nvar tempVec3b = /*#__PURE__*/new Vector3();\nvar tempArray = [];\nvar origin = /*#__PURE__*/new Vector3();\nvar defaultOrient = '+x+y';\nfunction first(o) {\n  return Array.isArray(o) ? o[0] : o;\n}\nvar _getFlatRaycastMesh = function getFlatRaycastMesh() {\n  var mesh = new Mesh(new PlaneGeometry(1, 1), defaultMaterial);\n  _getFlatRaycastMesh = function getFlatRaycastMesh() {\n    return mesh;\n  };\n  return mesh;\n};\nvar _getCurvedRaycastMesh = function getCurvedRaycastMesh() {\n  var mesh = new Mesh(new PlaneGeometry(1, 1, 32, 1), defaultMaterial);\n  _getCurvedRaycastMesh = function getCurvedRaycastMesh() {\n    return mesh;\n  };\n  return mesh;\n};\nvar syncStartEvent = {\n  type: 'syncstart'\n};\nvar syncCompleteEvent = {\n  type: 'synccomplete'\n};\nvar SYNCABLE_PROPS = ['font', 'fontSize', 'letterSpacing', 'lineHeight', 'maxWidth', 'overflowWrap', 'text', 'direction', 'textAlign', 'textIndent', 'whiteSpace', 'anchorX', 'anchorY', 'colorRanges', 'sdfGlyphSize'];\nvar COPYABLE_PROPS = SYNCABLE_PROPS.concat('material', 'color', 'depthOffset', 'clipRect', 'curveRadius', 'orientation', 'glyphGeometryDetail');\n\n/**\n * @class Text\n *\n * A ThreeJS Mesh that renders a string of text on a plane in 3D space using signed distance\n * fields (SDF).\n */\nvar Text = /*#__PURE__*/function (_Mesh) {\n  _inherits(Text, _Mesh);\n  var _super2 = _createSuper(Text);\n  function Text() {\n    var _this3;\n    _classCallCheck(this, Text);\n    var geometry = new GlyphsGeometry();\n    _this3 = _super2.call(this, geometry, null);\n\n    // === Text layout properties: === //\n\n    /**\n     * @member {string} text\n     * The string of text to be rendered.\n     */\n    _this3.text = '';\n\n    /**\n     * @member {number|string} anchorX\n     * Defines the horizontal position in the text block that should line up with the local origin.\n     * Can be specified as a numeric x position in local units, a string percentage of the total\n     * text block width e.g. `'25%'`, or one of the following keyword strings: 'left', 'center',\n     * or 'right'.\n     */\n    _this3.anchorX = 0;\n\n    /**\n     * @member {number|string} anchorX\n     * Defines the vertical position in the text block that should line up with the local origin.\n     * Can be specified as a numeric y position in local units (note: down is negative y), a string\n     * percentage of the total text block height e.g. `'25%'`, or one of the following keyword strings:\n     * 'top', 'top-baseline', 'top-cap', 'top-ex', 'middle', 'bottom-baseline', or 'bottom'.\n     */\n    _this3.anchorY = 0;\n\n    /**\n     * @member {number} curveRadius\n     * Defines a cylindrical radius along which the text's plane will be curved. Positive numbers put\n     * the cylinder's centerline (oriented vertically) that distance in front of the text, for a concave\n     * curvature, while negative numbers put it behind the text for a convex curvature. The centerline\n     * will be aligned with the text's local origin; you can use `anchorX` to offset it.\n     *\n     * Since each glyph is by default rendered with a simple quad, each glyph remains a flat plane\n     * internally. You can use `glyphGeometryDetail` to add more vertices for curvature inside glyphs.\n     */\n    _this3.curveRadius = 0;\n\n    /**\n     * @member {string} direction\n     * Sets the base direction for the text. The default value of \"auto\" will choose a direction based\n     * on the text's content according to the bidi spec. A value of \"ltr\" or \"rtl\" will force the direction.\n     */\n    _this3.direction = 'auto';\n\n    /**\n     * @member {string} font\n     * URL of a custom font to be used. Font files can be in .ttf, .otf, or .woff (not .woff2) formats.\n     * Defaults to the Roboto font loaded from Google Fonts.\n     */\n    _this3.font = null; //will use default from TextBuilder\n\n    /**\n     * @member {number} fontSize\n     * The size at which to render the font in local units; corresponds to the em-box height\n     * of the chosen `font`.\n     */\n    _this3.fontSize = 0.1;\n\n    /**\n     * @member {number} letterSpacing\n     * Sets a uniform adjustment to spacing between letters after kerning is applied. Positive\n     * numbers increase spacing and negative numbers decrease it.\n     */\n    _this3.letterSpacing = 0;\n\n    /**\n     * @member {number|string} lineHeight\n     * Sets the height of each line of text, as a multiple of the `fontSize`. Defaults to 'normal'\n     * which chooses a reasonable height based on the chosen font's ascender/descender metrics.\n     */\n    _this3.lineHeight = 'normal';\n\n    /**\n     * @member {number} maxWidth\n     * The maximum width of the text block, above which text may start wrapping according to the\n     * `whiteSpace` and `overflowWrap` properties.\n     */\n    _this3.maxWidth = Infinity;\n\n    /**\n     * @member {string} overflowWrap\n     * Defines how text wraps if the `whiteSpace` property is `normal`. Can be either `'normal'`\n     * to break at whitespace characters, or `'break-word'` to allow breaking within words.\n     * Defaults to `'normal'`.\n     */\n    _this3.overflowWrap = 'normal';\n\n    /**\n     * @member {string} textAlign\n     * The horizontal alignment of each line of text within the overall text bounding box.\n     */\n    _this3.textAlign = 'left';\n\n    /**\n     * @member {number} textIndent\n     * Indentation for the first character of a line; see CSS `text-indent`.\n     */\n    _this3.textIndent = 0;\n\n    /**\n     * @member {string} whiteSpace\n     * Defines whether text should wrap when a line reaches the `maxWidth`. Can\n     * be either `'normal'` (the default), to allow wrapping according to the `overflowWrap` property,\n     * or `'nowrap'` to prevent wrapping. Note that `'normal'` here honors newline characters to\n     * manually break lines, making it behave more like `'pre-wrap'` does in CSS.\n     */\n    _this3.whiteSpace = 'normal';\n\n    // === Presentation properties: === //\n\n    /**\n     * @member {THREE.Material} material\n     * Defines a _base_ material to be used when rendering the text. This material will be\n     * automatically replaced with a material derived from it, that adds shader code to\n     * decrease the alpha for each fragment (pixel) outside the text glyphs, with antialiasing.\n     * By default it will derive from a simple white MeshBasicMaterial, but you can use any\n     * of the other mesh materials to gain other features like lighting, texture maps, etc.\n     *\n     * Also see the `color` shortcut property.\n     */\n    _this3.material = null;\n\n    /**\n     * @member {string|number|THREE.Color} color\n     * This is a shortcut for setting the `color` of the text's material. You can use this\n     * if you don't want to specify a whole custom `material`. Also, if you do use a custom\n     * `material`, this color will only be used for this particuar Text instance, even if\n     * that same material instance is shared across multiple Text objects.\n     */\n    _this3.color = null;\n\n    /**\n     * @member {object|null} colorRanges\n     * WARNING: This API is experimental and may change.\n     * This allows more fine-grained control of colors for individual or ranges of characters,\n     * taking precedence over the material's `color`. Its format is an Object whose keys each\n     * define a starting character index for a range, and whose values are the color for each\n     * range. The color value can be a numeric hex color value, a `THREE.Color` object, or\n     * any of the strings accepted by `THREE.Color`.\n     */\n    _this3.colorRanges = null;\n\n    /**\n     * @member {number|string} outlineWidth\n     * WARNING: This API is experimental and may change.\n     * The width of an outline/halo to be drawn around each text glyph using the `outlineColor` and `outlineOpacity`.\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g.\n     * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`, which means\n     * no outline will be drawn unless an `outlineOffsetX/Y` or `outlineBlur` is set.\n     */\n    _this3.outlineWidth = 0;\n\n    /**\n     * @member {string|number|THREE.Color} outlineColor\n     * WARNING: This API is experimental and may change.\n     * The color of the text outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\n     * Defaults to black.\n     */\n    _this3.outlineColor = 0x000000;\n\n    /**\n     * @member {number} outlineOpacity\n     * WARNING: This API is experimental and may change.\n     * The opacity of the outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\n     * Defaults to `1`.\n     */\n    _this3.outlineOpacity = 1;\n\n    /**\n     * @member {number|string} outlineBlur\n     * WARNING: This API is experimental and may change.\n     * A blur radius applied to the outer edge of the text's outline. If the `outlineWidth` is\n     * zero, the blur will be applied at the glyph edge, like CSS's `text-shadow` blur radius.\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g.\n     * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`.\n     */\n    _this3.outlineBlur = 0;\n\n    /**\n     * @member {number|string} outlineOffsetX\n     * WARNING: This API is experimental and may change.\n     * A horizontal offset for the text outline.\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n     */\n    _this3.outlineOffsetX = 0;\n\n    /**\n     * @member {number|string} outlineOffsetY\n     * WARNING: This API is experimental and may change.\n     * A vertical offset for the text outline.\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n     */\n    _this3.outlineOffsetY = 0;\n\n    /**\n     * @member {number|string} strokeWidth\n     * WARNING: This API is experimental and may change.\n     * The width of an inner stroke drawn inside each text glyph using the `strokeColor` and `strokeOpacity`.\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n     */\n    _this3.strokeWidth = 0;\n\n    /**\n     * @member {string|number|THREE.Color} strokeColor\n     * WARNING: This API is experimental and may change.\n     * The color of the text stroke, if `strokeWidth` is greater than zero. Defaults to gray.\n     */\n    _this3.strokeColor = defaultStrokeColor;\n\n    /**\n     * @member {number} strokeOpacity\n     * WARNING: This API is experimental and may change.\n     * The opacity of the stroke, if `strokeWidth` is greater than zero. Defaults to `1`.\n     */\n    _this3.strokeOpacity = 1;\n\n    /**\n     * @member {number} fillOpacity\n     * WARNING: This API is experimental and may change.\n     * The opacity of the glyph's fill from 0 to 1. This behaves like the material's `opacity` but allows\n     * giving the fill a different opacity than the `strokeOpacity`. A fillOpacity of `0` makes the\n     * interior of the glyph invisible, leaving just the `strokeWidth`. Defaults to `1`.\n     */\n    _this3.fillOpacity = 1;\n\n    /**\n     * @member {number} depthOffset\n     * This is a shortcut for setting the material's `polygonOffset` and related properties,\n     * which can be useful in preventing z-fighting when this text is laid on top of another\n     * plane in the scene. Positive numbers are further from the camera, negatives closer.\n     */\n    _this3.depthOffset = 0;\n\n    /**\n     * @member {Array<number>} clipRect\n     * If specified, defines a `[minX, minY, maxX, maxY]` of a rectangle outside of which all\n     * pixels will be discarded. This can be used for example to clip overflowing text when\n     * `whiteSpace='nowrap'`.\n     */\n    _this3.clipRect = null;\n\n    /**\n     * @member {string} orientation\n     * Defines the axis plane on which the text should be laid out when the mesh has no extra\n     * rotation transform. It is specified as a string with two axes: the horizontal axis with\n     * positive pointing right, and the vertical axis with positive pointing up. By default this\n     * is '+x+y', meaning the text sits on the xy plane with the text's top toward positive y\n     * and facing positive z. A value of '+x-z' would place it on the xz plane with the text's\n     * top toward negative z and facing positive y.\n     */\n    _this3.orientation = defaultOrient;\n\n    /**\n     * @member {number} glyphGeometryDetail\n     * Controls number of vertical/horizontal segments that make up each glyph's rectangular\n     * plane. Defaults to 1. This can be increased to provide more geometrical detail for custom\n     * vertex shader effects, for example.\n     */\n    _this3.glyphGeometryDetail = 1;\n\n    /**\n     * @member {number|null} sdfGlyphSize\n     * The size of each glyph's SDF (signed distance field) used for rendering. This must be a\n     * power-of-two number. Defaults to 64 which is generally a good balance of size and quality\n     * for most fonts. Larger sizes can improve the quality of glyph rendering by increasing\n     * the sharpness of corners and preventing loss of very thin lines, at the expense of\n     * increased memory footprint and longer SDF generation time.\n     */\n    _this3.sdfGlyphSize = null;\n\n    /**\n     * @member {boolean} gpuAccelerateSDF\n     * When `true`, the SDF generation process will be GPU-accelerated with WebGL when possible,\n     * making it much faster especially for complex glyphs, and falling back to a JavaScript version\n     * executed in web workers when support isn't available. It should automatically detect support,\n     * but it's still somewhat experimental, so you can set it to `false` to force it to use the JS\n     * version if you encounter issues with it.\n     */\n    _this3.gpuAccelerateSDF = true;\n    _this3.debugSDF = false;\n    return _this3;\n  }\n\n  /**\n   * Updates the text rendering according to the current text-related configuration properties.\n   * This is an async process, so you can pass in a callback function to be executed when it\n   * finishes.\n   * @param {function} [callback]\n   */\n  _createClass(Text, [{\n    key: \"sync\",\n    value: function sync(callback) {\n      var _this4 = this;\n      if (this._needsSync) {\n        this._needsSync = false;\n\n        // If there's another sync still in progress, queue\n        if (this._isSyncing) {\n          (this._queuedSyncs || (this._queuedSyncs = [])).push(callback);\n        } else {\n          this._isSyncing = true;\n          this.dispatchEvent(syncStartEvent);\n          getTextRenderInfo({\n            text: this.text,\n            font: this.font,\n            fontSize: this.fontSize || 0.1,\n            letterSpacing: this.letterSpacing || 0,\n            lineHeight: this.lineHeight || 'normal',\n            maxWidth: this.maxWidth,\n            direction: this.direction || 'auto',\n            textAlign: this.textAlign,\n            textIndent: this.textIndent,\n            whiteSpace: this.whiteSpace,\n            overflowWrap: this.overflowWrap,\n            anchorX: this.anchorX,\n            anchorY: this.anchorY,\n            colorRanges: this.colorRanges,\n            includeCaretPositions: true,\n            //TODO parameterize\n            sdfGlyphSize: this.sdfGlyphSize,\n            gpuAccelerateSDF: this.gpuAccelerateSDF\n          }, function (textRenderInfo) {\n            _this4._isSyncing = false;\n\n            // Save result for later use in onBeforeRender\n            _this4._textRenderInfo = textRenderInfo;\n\n            // Update the geometry attributes\n            _this4.geometry.updateGlyphs(textRenderInfo.glyphBounds, textRenderInfo.glyphAtlasIndices, textRenderInfo.blockBounds, textRenderInfo.chunkedBounds, textRenderInfo.glyphColors);\n\n            // If we had extra sync requests queued up, kick it off\n            var queued = _this4._queuedSyncs;\n            if (queued) {\n              _this4._queuedSyncs = null;\n              _this4._needsSync = true;\n              _this4.sync(function () {\n                queued.forEach(function (fn) {\n                  return fn && fn();\n                });\n              });\n            }\n            _this4.dispatchEvent(syncCompleteEvent);\n            if (callback) {\n              callback();\n            }\n          });\n        }\n      }\n    }\n\n    /**\n     * Initiate a sync if needed - note it won't complete until next frame at the\n     * earliest so if possible it's a good idea to call sync() manually as soon as\n     * all the properties have been set.\n     * @override\n     */\n  }, {\n    key: \"onBeforeRender\",\n    value: function onBeforeRender(renderer, scene, camera, geometry, material, group) {\n      this.sync();\n\n      // This may not always be a text material, e.g. if there's a scene.overrideMaterial present\n      if (material.isTroikaTextMaterial) {\n        this._prepareForRender(material);\n      }\n\n      // We need to force the material to FrontSide to avoid the double-draw-call performance hit\n      // introduced in Three.js r130: https://github.com/mrdoob/three.js/pull/21967 - The sidedness\n      // is instead applied via drawRange in the GlyphsGeometry.\n      material._hadOwnSide = material.hasOwnProperty('side');\n      this.geometry.setSide(material._actualSide = material.side);\n      material.side = FrontSide;\n    }\n  }, {\n    key: \"onAfterRender\",\n    value: function onAfterRender(renderer, scene, camera, geometry, material, group) {\n      // Restore original material side\n      if (material._hadOwnSide) {\n        material.side = material._actualSide;\n      } else {\n        delete material.side; // back to inheriting from base material\n      }\n    }\n\n    /**\n     * Shortcut to dispose the geometry specific to this instance.\n     * Note: we don't also dispose the derived material here because if anything else is\n     * sharing the same base material it will result in a pause next frame as the program\n     * is recompiled. Instead users can dispose the base material manually, like normal,\n     * and we'll also dispose the derived material at that time.\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.geometry.dispose();\n    }\n\n    /**\n     * @property {TroikaTextRenderInfo|null} textRenderInfo\n     * @readonly\n     * The current processed rendering data for this TextMesh, returned by the TextBuilder after\n     * a `sync()` call. This will be `null` initially, and may be stale for a short period until\n     * the asynchrous `sync()` process completes.\n     */\n  }, {\n    key: \"textRenderInfo\",\n    get: function get() {\n      return this._textRenderInfo || null;\n    }\n\n    // Handler for automatically wrapping the base material with our upgrades. We do the wrapping\n    // lazily on _read_ rather than write to avoid unnecessary wrapping on transient values.\n  }, {\n    key: \"material\",\n    get: function get() {\n      var derivedMaterial = this._derivedMaterial;\n      var baseMaterial = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = defaultMaterial.clone());\n      if (!derivedMaterial || derivedMaterial.baseMaterial !== baseMaterial) {\n        derivedMaterial = this._derivedMaterial = createTextDerivedMaterial(baseMaterial);\n        // dispose the derived material when its base material is disposed:\n        baseMaterial.addEventListener('dispose', function onDispose() {\n          baseMaterial.removeEventListener('dispose', onDispose);\n          derivedMaterial.dispose();\n        });\n      }\n      // If text outline is configured, render it as a preliminary draw using Three's multi-material\n      // feature (see GlyphsGeometry which sets up `groups` for this purpose) Doing it with multi\n      // materials ensures the layers are always rendered consecutively in a consistent order.\n      // Each layer will trigger onBeforeRender with the appropriate material.\n      if (this.outlineWidth || this.outlineBlur || this.outlineOffsetX || this.outlineOffsetY) {\n        var outlineMaterial = derivedMaterial._outlineMtl;\n        if (!outlineMaterial) {\n          outlineMaterial = derivedMaterial._outlineMtl = Object.create(derivedMaterial, {\n            id: {\n              value: derivedMaterial.id + 0.1\n            }\n          });\n          outlineMaterial.isTextOutlineMaterial = true;\n          outlineMaterial.depthWrite = false;\n          outlineMaterial.map = null; //???\n          derivedMaterial.addEventListener('dispose', function onDispose() {\n            derivedMaterial.removeEventListener('dispose', onDispose);\n            outlineMaterial.dispose();\n          });\n        }\n        return [outlineMaterial, derivedMaterial];\n      } else {\n        return derivedMaterial;\n      }\n    },\n    set: function set(baseMaterial) {\n      if (baseMaterial && baseMaterial.isTroikaTextMaterial) {\n        //prevent double-derivation\n        this._derivedMaterial = baseMaterial;\n        this._baseMaterial = baseMaterial.baseMaterial;\n      } else {\n        this._baseMaterial = baseMaterial;\n      }\n    }\n  }, {\n    key: \"glyphGeometryDetail\",\n    get: function get() {\n      return this.geometry.detail;\n    },\n    set: function set(detail) {\n      this.geometry.detail = detail;\n    }\n  }, {\n    key: \"curveRadius\",\n    get: function get() {\n      return this.geometry.curveRadius;\n    },\n    set: function set(r) {\n      this.geometry.curveRadius = r;\n    }\n\n    // Create and update material for shadows upon request:\n  }, {\n    key: \"customDepthMaterial\",\n    get: function get() {\n      return first(this.material).getDepthMaterial();\n    }\n  }, {\n    key: \"customDistanceMaterial\",\n    get: function get() {\n      return first(this.material).getDistanceMaterial();\n    }\n  }, {\n    key: \"_prepareForRender\",\n    value: function _prepareForRender(material) {\n      var isOutline = material.isTextOutlineMaterial;\n      var uniforms = material.uniforms;\n      var textInfo = this.textRenderInfo;\n      if (textInfo) {\n        var sdfTexture = textInfo.sdfTexture,\n          blockBounds = textInfo.blockBounds;\n        uniforms.uTroikaSDFTexture.value = sdfTexture;\n        uniforms.uTroikaSDFTextureSize.value.set(sdfTexture.image.width, sdfTexture.image.height);\n        uniforms.uTroikaSDFGlyphSize.value = textInfo.sdfGlyphSize;\n        uniforms.uTroikaSDFExponent.value = textInfo.sdfExponent;\n        uniforms.uTroikaTotalBounds.value.fromArray(blockBounds);\n        uniforms.uTroikaUseGlyphColors.value = !isOutline && !!textInfo.glyphColors;\n        var distanceOffset = 0;\n        var blurRadius = 0;\n        var strokeWidth = 0;\n        var fillOpacity;\n        var strokeOpacity;\n        var strokeColor;\n        var offsetX = 0;\n        var offsetY = 0;\n        if (isOutline) {\n          var outlineWidth = this.outlineWidth,\n            outlineOffsetX = this.outlineOffsetX,\n            outlineOffsetY = this.outlineOffsetY,\n            outlineBlur = this.outlineBlur,\n            outlineOpacity = this.outlineOpacity;\n          distanceOffset = this._parsePercent(outlineWidth) || 0;\n          blurRadius = Math.max(0, this._parsePercent(outlineBlur) || 0);\n          fillOpacity = outlineOpacity;\n          offsetX = this._parsePercent(outlineOffsetX) || 0;\n          offsetY = this._parsePercent(outlineOffsetY) || 0;\n        } else {\n          strokeWidth = Math.max(0, this._parsePercent(this.strokeWidth) || 0);\n          if (strokeWidth) {\n            strokeColor = this.strokeColor;\n            uniforms.uTroikaStrokeColor.value.set(strokeColor == null ? defaultStrokeColor : strokeColor);\n            strokeOpacity = this.strokeOpacity;\n            if (strokeOpacity == null) strokeOpacity = 1;\n          }\n          fillOpacity = this.fillOpacity;\n        }\n        uniforms.uTroikaDistanceOffset.value = distanceOffset;\n        uniforms.uTroikaPositionOffset.value.set(offsetX, offsetY);\n        uniforms.uTroikaBlurRadius.value = blurRadius;\n        uniforms.uTroikaStrokeWidth.value = strokeWidth;\n        uniforms.uTroikaStrokeOpacity.value = strokeOpacity;\n        uniforms.uTroikaFillOpacity.value = fillOpacity == null ? 1 : fillOpacity;\n        uniforms.uTroikaCurveRadius.value = this.curveRadius || 0;\n        var clipRect = this.clipRect;\n        if (clipRect && Array.isArray(clipRect) && clipRect.length === 4) {\n          uniforms.uTroikaClipRect.value.fromArray(clipRect);\n        } else {\n          // no clipping - choose a finite rect that shouldn't ever be reached by overflowing glyphs or outlines\n          var pad = (this.fontSize || 0.1) * 100;\n          uniforms.uTroikaClipRect.value.set(blockBounds[0] - pad, blockBounds[1] - pad, blockBounds[2] + pad, blockBounds[3] + pad);\n        }\n        this.geometry.applyClipRect(uniforms.uTroikaClipRect.value);\n      }\n      uniforms.uTroikaSDFDebug.value = !!this.debugSDF;\n      material.polygonOffset = !!this.depthOffset;\n      material.polygonOffsetFactor = material.polygonOffsetUnits = this.depthOffset || 0;\n\n      // Shortcut for setting material color via `color` prop on the mesh; this is\n      // applied only to the derived material to avoid mutating a shared base material.\n      var color = isOutline ? this.outlineColor || 0 : this.color;\n      if (color == null) {\n        delete material.color; //inherit from base\n      } else {\n        var colorObj = material.hasOwnProperty('color') ? material.color : material.color = new Color();\n        if (color !== colorObj._input || typeof color === 'object') {\n          colorObj.set(colorObj._input = color);\n        }\n      }\n\n      // base orientation\n      var orient = this.orientation || defaultOrient;\n      if (orient !== material._orientation) {\n        var rotMat = uniforms.uTroikaOrient.value;\n        orient = orient.replace(/[^-+xyz]/g, '');\n        var match = orient !== defaultOrient && orient.match(/^([-+])([xyz])([-+])([xyz])$/);\n        if (match) {\n          var _match = _slicedToArray(match, 5),\n            hSign = _match[1],\n            hAxis = _match[2],\n            vSign = _match[3],\n            vAxis = _match[4];\n          tempVec3a.set(0, 0, 0)[hAxis] = hSign === '-' ? 1 : -1;\n          tempVec3b.set(0, 0, 0)[vAxis] = vSign === '-' ? -1 : 1;\n          tempMat4.lookAt(origin, tempVec3a.cross(tempVec3b), tempVec3b);\n          rotMat.setFromMatrix4(tempMat4);\n        } else {\n          rotMat.identity();\n        }\n        material._orientation = orient;\n      }\n    }\n  }, {\n    key: \"_parsePercent\",\n    value: function _parsePercent(value) {\n      if (typeof value === 'string') {\n        var match = value.match(/^(-?[\\d.]+)%$/);\n        var pct = match ? parseFloat(match[1]) : NaN;\n        value = (isNaN(pct) ? 0 : pct / 100) * this.fontSize;\n      }\n      return value;\n    }\n\n    /**\n     * Translate a point in local space to an x/y in the text plane.\n     */\n  }, {\n    key: \"localPositionToTextCoords\",\n    value: function localPositionToTextCoords(position) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      target.copy(position); //simple non-curved case is 1:1\n      var r = this.curveRadius;\n      if (r) {\n        //flatten the curve\n        target.x = Math.atan2(position.x, Math.abs(r) - Math.abs(position.z)) * Math.abs(r);\n      }\n      return target;\n    }\n\n    /**\n     * Translate a point in world space to an x/y in the text plane.\n     */\n  }, {\n    key: \"worldPositionToTextCoords\",\n    value: function worldPositionToTextCoords(position) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      tempVec3a.copy(position);\n      return this.localPositionToTextCoords(this.worldToLocal(tempVec3a), target);\n    }\n\n    /**\n     * @override Custom raycasting to test against the whole text block's max rectangular bounds\n     * TODO is there any reason to make this more granular, like within individual line or glyph rects?\n     */\n  }, {\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      var textRenderInfo = this.textRenderInfo,\n        curveRadius = this.curveRadius;\n      if (textRenderInfo) {\n        var bounds = textRenderInfo.blockBounds;\n        var raycastMesh = curveRadius ? _getCurvedRaycastMesh() : _getFlatRaycastMesh();\n        var geom = raycastMesh.geometry;\n        var _geom$attributes = geom.attributes,\n          position = _geom$attributes.position,\n          uv = _geom$attributes.uv;\n        for (var i = 0; i < uv.count; i++) {\n          var x = bounds[0] + uv.getX(i) * (bounds[2] - bounds[0]);\n          var y = bounds[1] + uv.getY(i) * (bounds[3] - bounds[1]);\n          var z = 0;\n          if (curveRadius) {\n            z = curveRadius - Math.cos(x / curveRadius) * curveRadius;\n            x = Math.sin(x / curveRadius) * curveRadius;\n          }\n          position.setXYZ(i, x, y, z);\n        }\n        geom.boundingSphere = this.geometry.boundingSphere;\n        geom.boundingBox = this.geometry.boundingBox;\n        raycastMesh.matrixWorld = this.matrixWorld;\n        raycastMesh.material.side = this.material.side;\n        tempArray.length = 0;\n        raycastMesh.raycast(raycaster, tempArray);\n        for (var _i7 = 0; _i7 < tempArray.length; _i7++) {\n          tempArray[_i7].object = this;\n          intersects.push(tempArray[_i7]);\n        }\n      }\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      var _this5 = this;\n      // Prevent copying the geometry reference so we don't end up sharing attributes between instances\n      var geom = this.geometry;\n      _get(_getPrototypeOf(Text.prototype), \"copy\", this).call(this, source);\n      this.geometry = geom;\n      COPYABLE_PROPS.forEach(function (prop) {\n        _this5[prop] = source[prop];\n      });\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n  return Text;\n}(Mesh); // Create setters for properties that affect text layout:\nSYNCABLE_PROPS.forEach(function (prop) {\n  var privateKey = '_private_' + prop;\n  Object.defineProperty(Text.prototype, prop, {\n    get: function get() {\n      return this[privateKey];\n    },\n    set: function set(value) {\n      if (value !== this[privateKey]) {\n        this[privateKey] = value;\n        this._needsSync = true;\n      }\n    }\n  });\n});\n\n//=== Utility functions for dealing with carets and selection ranges ===//\n\n/**\n * @typedef {object} TextCaret\n * @property {number} x - x position of the caret\n * @property {number} y - y position of the caret's bottom\n * @property {number} height - height of the caret\n * @property {number} charIndex - the index in the original input string of this caret's target\n *   character; the caret will be for the position _before_ that character.\n */\n\n/**\n * Given a local x/y coordinate in the text block plane, find the nearest caret position.\n * @param {TroikaTextRenderInfo} textRenderInfo - a result object from TextBuilder#getTextRenderInfo\n * @param {number} x\n * @param {number} y\n * @return {TextCaret | null}\n */\nfunction getCaretAtPoint(textRenderInfo, x, y) {\n  var closestCaret = null;\n  var caretHeight = textRenderInfo.caretHeight;\n  var caretsByRow = groupCaretsByRow(textRenderInfo);\n\n  // Find nearest row by y first\n  var closestRowY = Infinity;\n  caretsByRow.forEach(function (carets, rowY) {\n    if (Math.abs(y - (rowY + caretHeight / 2)) < Math.abs(y - (closestRowY + caretHeight / 2))) {\n      closestRowY = rowY;\n    }\n  });\n\n  // Then find closest caret by x within that row\n  caretsByRow.get(closestRowY).forEach(function (caret) {\n    if (!closestCaret || Math.abs(x - caret.x) < Math.abs(x - closestCaret.x)) {\n      closestCaret = caret;\n    }\n  });\n  return closestCaret;\n}\nvar _rectsCache = new WeakMap();\n\n/**\n * Given start and end character indexes, return a list of rectangles covering all the\n * characters within that selection.\n * @param {TroikaTextRenderInfo} textRenderInfo\n * @param {number} start - index of the first char in the selection\n * @param {number} end - index of the first char after the selection\n * @return {Array<{left, top, right, bottom}> | null}\n */\nfunction getSelectionRects(textRenderInfo, start, end) {\n  var rects;\n  if (textRenderInfo) {\n    // Check cache - textRenderInfo is frozen so it's safe to cache based on it\n    var prevResult = _rectsCache.get(textRenderInfo);\n    if (prevResult && prevResult.start === start && prevResult.end === end) {\n      return prevResult.rects;\n    }\n    var caretPositions = textRenderInfo.caretPositions,\n      caretHeight = textRenderInfo.caretHeight;\n\n    // Normalize\n    if (end < start) {\n      var s = start;\n      start = end;\n      end = s;\n    }\n    start = Math.max(start, 0);\n    end = Math.min(end, caretPositions.length + 1);\n\n    // Build list of rects, expanding the current rect for all characters in a run and starting\n    // a new rect whenever reaching a new line or a new bidi direction\n    rects = [];\n    var currentRect = null;\n    for (var i = start; i < end; i++) {\n      var x1 = caretPositions[i * 3];\n      var x2 = caretPositions[i * 3 + 1];\n      var left = Math.min(x1, x2);\n      var right = Math.max(x1, x2);\n      var bottom = caretPositions[i * 3 + 2];\n      if (!currentRect || bottom !== currentRect.bottom || left > currentRect.right || right < currentRect.left) {\n        currentRect = {\n          left: Infinity,\n          right: -Infinity,\n          bottom: bottom,\n          top: bottom + caretHeight\n        };\n        rects.push(currentRect);\n      }\n      currentRect.left = Math.min(left, currentRect.left);\n      currentRect.right = Math.max(right, currentRect.right);\n    }\n\n    // Merge any overlapping rects, e.g. those formed by adjacent bidi runs\n    rects.sort(function (a, b) {\n      return b.bottom - a.bottom || a.left - b.left;\n    });\n    for (var _i8 = rects.length - 1; _i8-- > 0;) {\n      var rectA = rects[_i8];\n      var rectB = rects[_i8 + 1];\n      if (rectA.bottom === rectB.bottom && rectA.left <= rectB.right && rectA.right >= rectB.left) {\n        rectB.left = Math.min(rectB.left, rectA.left);\n        rectB.right = Math.max(rectB.right, rectA.right);\n        rects.splice(_i8, 1);\n      }\n    }\n    _rectsCache.set(textRenderInfo, {\n      start: start,\n      end: end,\n      rects: rects\n    });\n  }\n  return rects;\n}\nvar _caretsByRowCache = new WeakMap();\nfunction groupCaretsByRow(textRenderInfo) {\n  // textRenderInfo is frozen so it's safe to cache based on it\n  var caretsByRow = _caretsByRowCache.get(textRenderInfo);\n  if (!caretsByRow) {\n    var caretPositions = textRenderInfo.caretPositions,\n      caretHeight = textRenderInfo.caretHeight;\n    caretsByRow = new Map();\n    for (var i = 0; i < caretPositions.length; i += 3) {\n      var rowY = caretPositions[i + 2];\n      var rowCarets = caretsByRow.get(rowY);\n      if (!rowCarets) {\n        caretsByRow.set(rowY, rowCarets = []);\n      }\n      rowCarets.push({\n        x: caretPositions[i],\n        y: rowY,\n        height: caretHeight,\n        charIndex: i / 3\n      });\n      // Add one more caret after the final char\n      if (i + 3 >= caretPositions.length) {\n        rowCarets.push({\n          x: caretPositions[i + 1],\n          y: rowY,\n          height: caretHeight,\n          charIndex: i / 3 + 1\n        });\n      }\n    }\n  }\n  _caretsByRowCache.set(textRenderInfo, caretsByRow);\n  return caretsByRow;\n}\nexport { GlyphsGeometry, Text, configureTextBuilder, createTextDerivedMaterial, dumpSDFTextures, getCaretAtPoint, getSelectionRects, preloadFont, typesetterWorkerModule };"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","warned","now","self","performance","Date","mainThreadGenerator","queue","timer","nextChunk","start","length","shift","setTimeout","generateSDF_GL","_len","args","Array","_key","Promise","resolve","reject","push","_mainThreadGenerator$","webgl","generateIntoCanvas","timing","err","threadCount","idleTimeout","threads","callNum","generateSDF_JS_Worker","width","height","path","viewBox","distance","exponent","canvas","x","y","channel","workerId","thread","workerModule","name","dependencies","init","_createSDFGenerator","generate","javascript","textureData","getTransferables","buffer","requests","idleTimer","clearTimeout","then","_ref2","imageData","Uint8Array","i","webglUtils","renderImageData","resizeWebGLCanvasWithoutClearing","window","r","parse","t","_bin","a","readASCII","n","readUshort","o","readUint","s","h","_readFont","readFixed","_data","_offset","f","d","u","l","offset","v","trim","_tabOffset","readF2dot14","readShort","readInt","_view","getInt32","readInt8","getInt8","getInt16","getUint16","readUshorts","getUint32","readUint64","String","fromCharCode","readUnicode","_tdec","TextDecoder","readUTF8","decode","readBytes","readASCIIArray","_dataView","DataView","byteOffset","byteLength","_lctf","scriptList","readScriptList","featureList","readFeatureList","lookupList","readLookupList","readLookupTable","tabs","ltype","flag","numOfOnes","readClassDef","getInterval","readCoverage","fmt","tab","coverageIndex","indexOf","readFeatureTable","tag","featureParams","readScriptTable","default","readLangSysTable","reqFeature","features","CFF","readIndex","readDict","readSubrs","CharStrings","ROS","FDArray","c","p","_readFDict","FDSelect","U","g","Encoding","readEncoding","charset","readCharset","Private","Subrs","Bias","tableSE","glyphByUnicode","glyphBySE","getCharString","val","size","readCharString","S","parseFloat","cmap","tables","parse0","parse4","parse6","parse12","console","debug","format","map","searchRange","entrySelector","rangeShift","endCount","startCount","idDelta","idRangeOffset","glyphIdArray","firstCode","groups","glyf","maxp","numGlyphs","_parseGlyf","loca","noc","xMin","yMin","xMax","yMax","endPts","instructions","flags","xs","ys","parts","m","b","tx","ty","p1","p2","glyphIndex","instr","GPOS","subt","coverage","pos","readValueRecord","pairsets","P","gid2","val1","val2","F","_","classDef1","classDef2","matrix","C","I","w","GSUB","delta","newg","vals","readLigatureSet","cDef","scset","readSubClassSet","backCvg","inptCvg","ahedCvg","lookupRec","readSubstLookupRecords","readSubClassRule","input","substLookupRecords","readChainSubClassSet","readChainSubClassRule","subst","readLigature","chain","nglyph","head","fontRevision","unitsPerEm","created","modified","macStyle","lowestRecPPEM","fontDirectionHint","indexToLocFormat","glyphDataFormat","hhea","ascender","descender","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","metricDataFormat","numberOfHMetrics","hmtx","aWidth","lsBearing","kern","parseV1","glyph1","rval","readFormat0","glyph2","maxPoints","maxContours","maxCompositePoints","maxCompositeContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth","toString","_lang","postScriptName","version0","version1","version2","version5","xAvgCharWidth","usWeightClass","usWidthClass","fsType","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","sFamilyClass","panose","ulUnicodeRange1","ulUnicodeRange2","ulUnicodeRange3","ulUnicodeRange4","achVendID","fsSelection","usFirstCharIndex","usLastCharIndex","sTypoAscender","sTypoDescender","sTypoLineGap","usWinAscent","usWinDescent","ulCodePageRange1","ulCodePageRange2","sxHeight","sCapHeight","usDefault","usBreak","usMaxContext","usLowerOpticalPointSize","usUpperOpticalPointSize","post","version","italicAngle","underlinePosition","underlineThickness","codeToGlyph","p0e4","p3e1","p1e0","p0e3","glyphToPath","cmds","crds","SVG","entries","toPath","stack","nStems","haveWidth","defaultWidthX","open","_drawCFF","_drawGlyf","_simpleGlyph","_compoGlyph","moveTo","lineTo","qcurveTo","closePath","_getGlyphClass","getPairAdjustment","_applySubs","_glsCovered","glyphsToPath","curveTo","nominalWidthX","pop","O","T","Math","abs","k","G","D","B","L","R","A","W","M","V","N","charAt","Typr","Object","defineProperty","value","Uint16Array","Uint32Array","Error","code","captureStackTrace","max","set","E","subarray","j","z","q","H","J","K","Q","X","Y","Z","$","rr","er","nr","tr","stream","convert_streams","setUint16","setUint32","signature","flavor","numTables","reserved","totalSfntSize","majorVersion","minorVersion","metaOffset","metaLength","metaOrigLength","privOffset","privLength","pow","compLength","origLength","origChecksum","reduce","forEach","outOffset","slice","woff2otf","joiningTypeMap","cmdArgLengths","joiningTypeRawData","JT_LEFT","JT_RIGHT","JT_DUAL","JT_TRANSPARENT","JT_JOIN_CAUSING","JT_NON_JOINING","getCharJoiningType","ch","Map","_loop","type","lastCode","split","range","_range$split","_range$split2","skip","step","parseInt","get","ISOL","INIT","FINA","MEDI","formsToFeatures","detectJoiningForms","str","joiningForms","prevJoiningType","prevForm","prevIndex","codePointAt","joiningType","form","firstNum","_len2","_key2","wrapFontObj","typrFont","glyphMap","create","os2","fontObj","capHeight","xHeight","forEachGlyph","text","fontSize","letterSpacing","callback","glyphX","fontScale","glyphIndices","font","glyphIds","cc","gsub","supportedFeatures","usedLookups","feature","test","ti","isJoiningFeature","ci","stringToGlyphs","charIndex","prevGlyphIndex","glyphObj","_Typr$U$glyphToPath","crdsIdx","_i5","len","numArgs","Infinity","_i6","_len3","index","advanceWidth","pathCommandCount","peek","typrFactory","woff2otfFactory","parserFactory","CONFIG","defaultFontURL","sdfGlyphSize","sdfMargin","sdfExponent","textureWidth","tempColor","Color","now$1","linkEl","atlases","getTextRenderInfo","assign","totalStart","document","createElement","href","toAbsoluteURL","colorRanges","colors","key","hasOwnProperty","getHex","freeze","glyphsPerRow","atlas","glyphCount","sdfCanvas","sdfTexture","Texture","undefined","LinearFilter","contextLost","glyphsByFont","generateMipmaps","addEventListener","event","log","preventDefault","promises","glyph","generateGlyphSDF","all","safariPre15Workaround","needsUpdate","initContextLossHandling","_atlas","fontGlyphs","typesetInWorker","glyphPositions","timings","neededSDFs","glyphBounds","Float32Array","fontSizeMult","boundsIdx","positionsIdx","quadsStart","glyphId","glyphInfo","_result$glyphData$gly","glyphData","pathBounds","fontUnitsMargin","atlasIndex","_sdfViewBox","sdfViewBox","posX","posY","quads","sdfStart","sdf","currentHeight","neededRows","ceil","neededHeight","log2","info","concat","dispose","gpuAccelerateSDF","_ref3","sdfTotal","total","parameters","glyphAtlasIndices","glyphColors","caretPositions","caretHeight","chunkedBounds","lineHeight","topBaseline","blockBounds","visibleBounds","_warm","isSupported","warmUpSDFCanvas","_ref4","_ref5","useGPU","maxDist","squareIndex","floor","warn","generateSDF","preloadFont","_ref6","characters","isArray","join","toObj","fromObj","createImageBitmap","gl","getContext","pixels","image","data","flipY","isDataTexture","readPixels","RGBA","UNSIGNED_BYTE","typesetterWorkerModule","fontParser","bidi","config","fonts","INF","DEFAULT_IGNORABLE_CHARS","lineBreakingWhiteSpace","BREAK_AFTER_CHARS","RegExp","loadFont","fontUrl","pending","url","tryLoad","onError","error","request","XMLHttpRequest","responseType","onload","status","statusText","response","onerror","send","doLoadFont","callbacks","cb","typeset","_ref","_ref$text","_ref$font","_ref$fontSize","_ref$letterSpacing","_ref$lineHeight","_ref$maxWidth","maxWidth","direction","_ref$textAlign","textAlign","_ref$textIndent","textIndent","_ref$whiteSpace","whiteSpace","_ref$overflowWrap","overflowWrap","_ref$anchorX","anchorX","_ref$anchorY","anchorY","_ref$includeCaretPosi","includeCaretPositions","_ref$chunkedBoundsSiz","chunkedBoundsSize","_ref$colorRanges","metricsOnly","mainStart","fontLoad","typesetting","replace","hasMaxWidth","isFinite","maxLineWidth","renderableGlyphCount","canWrap","typesetStart","halfLeading","min","caretBottomOffset","lineXOffset","currentLine","TextLine","lines","nextLine","char","glyphWidth","curLineCount","count","isWhitespace","canBreakAfter","isEmpty","glyphAt","adjustX","splitAt","isSoftWrapped","fly","line","_line$glyphAt","anchorXOffset","anchorYOffset","parsePercent","bidiLevelsResult","getEmbeddingLevels","lineYOffset","chunk","currentColor","renderableGlyphIndex","prevCharIndex","colorCharIndex","lineIndex","lineGlyphCount","lineWidth","trailingWhitespaceCount","_lineXOffset","justifyAdjust","whitespaceCount","_i","justifyOffset","_i2","_glyphObj","flips","getReorderSegments","fi","_flips$fi","end","left","right","_i3","startInLine","endInLine","_glyphInfo","setGlyphObj","_i4","_glyphInfo2","rtl","levels","mirrored","getMirroredCharacter","caretLeft","caretRight","ligCount","fillLigatureCaretPositions","_charIndex","idx","glyphY","visX0","visY0","visX1","visY1","rect","chunkRect","_start","match","pct","NaN","isNaN","ligStartIndex","ligStartX","ligEndX","ligY","guessedAdvanceX","startIndex","textLineProps","flyweight","newLine","splice","obj","prop","measure","_result$blockBounds","x0","y0","x1","y1","createTypesetter","bidiFactory","typesetter","transferables","templateGeometries","glyphIndexAttrName","GlyphsGeometry","_InstancedBufferGeome","_super","_this","detail","curveRadius","materialIndex","boundingSphere","Sphere","boundingBox","Box3","side","verts","getIndex","setDrawRange","BackSide","DoubleSide","_detail","_this2","tpl","geom","front","PlaneGeometry","back","clone","frontAttrs","attributes","backAttrs","combined","BufferGeometry","vertCount","uv","position","array","normal","setAttribute","Float32BufferAttribute","itemSize","setIndex","translate","getTemplateGeometry","attr","_curveRadius","_updateBounds","updateBufferAttr","_blockBounds","_chunkedBounds","instanceCount","bounds","bbox","PI","sin","cos","halfPi","twoPi","absR","leftAngle","rightAngle","minX","maxX","maxZ","getBoundingSphere","clipRect","getAttribute","chunks","InstancedBufferGeometry","attrName","newArray","InstancedBufferAttribute","_maxInstanceCount","deleteAttribute","VERTEX_TRANSFORM","FRAGMENT_DEFS","defaultMaterial","MeshBasicMaterial","color","transparent","defaultStrokeColor","tempMat4","Matrix4","tempVec3a","Vector3","tempVec3b","tempArray","origin","defaultOrient","first","_getFlatRaycastMesh","mesh","Mesh","_getCurvedRaycastMesh","syncStartEvent","syncCompleteEvent","SYNCABLE_PROPS","COPYABLE_PROPS","Text","_Mesh","_super2","_this3","geometry","material","outlineWidth","outlineColor","outlineOpacity","outlineBlur","outlineOffsetX","outlineOffsetY","strokeWidth","strokeColor","strokeOpacity","fillOpacity","depthOffset","orientation","glyphGeometryDetail","debugSDF","_this4","_needsSync","_isSyncing","_queuedSyncs","dispatchEvent","textRenderInfo","_textRenderInfo","updateGlyphs","queued","sync","fn","renderer","scene","camera","group","isTroikaTextMaterial","_prepareForRender","_hadOwnSide","setSide","_actualSide","FrontSide","derivedMaterial","_derivedMaterial","baseMaterial","_baseMaterial","_defaultMaterial","textMaterial","chained","extensions","derivatives","uniforms","uTroikaSDFTexture","uTroikaSDFTextureSize","Vector2","uTroikaSDFGlyphSize","uTroikaSDFExponent","uTroikaTotalBounds","Vector4","uTroikaClipRect","uTroikaDistanceOffset","uTroikaOutlineOpacity","uTroikaFillOpacity","uTroikaPositionOffset","uTroikaCurveRadius","uTroikaBlurRadius","uTroikaStrokeWidth","uTroikaStrokeColor","uTroikaStrokeOpacity","uTroikaOrient","Matrix3","uTroikaUseGlyphColors","uTroikaSDFDebug","vertexDefs","vertexTransform","fragmentDefs","fragmentColorTransform","customRewriter","_ref7","vertexShader","fragmentShader","uDiffuseRE","defineProperties","shadowSide","createTextDerivedMaterial","onDispose","removeEventListener","outlineMaterial","_outlineMtl","id","isTextOutlineMaterial","depthWrite","getDepthMaterial","getDistanceMaterial","isOutline","textInfo","fromArray","distanceOffset","blurRadius","offsetX","offsetY","_parsePercent","pad","applyClipRect","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","colorObj","_input","orient","_orientation","rotMat","_match","hSign","hAxis","vSign","vAxis","lookAt","cross","setFromMatrix4","identity","target","copy","atan2","localPositionToTextCoords","worldToLocal","raycaster","intersects","raycastMesh","_geom$attributes","getX","getY","setXYZ","matrixWorld","raycast","_i7","object","source","_this5","privateKey","WeakMap"],"sourceRoot":""}